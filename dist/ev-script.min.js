!function(e,t){"function"==typeof define&&define.amd?define(["jquery","plupload","jquery-ui","jquery.plupload.queue"],t):e.EV=t(e.$,e.plupload)}(this,function($,plupload){var requirejs,require,define;return function(e){function t(e,t){return b.call(e,t)}function i(e,t){var i,n,r,a,s,o,l,c,u,d,h,p,f=t&&t.split("/"),m=g.map,v=m&&m["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,g.nodeIdCompat&&w.test(e[s])&&(e[s]=e[s].replace(w,"")),"."===e[0].charAt(0)&&f&&(p=f.slice(0,f.length-1),e=p.concat(e)),u=0;u<e.length;u++)if(h=e[u],"."===h)e.splice(u,1),u-=1;else if(".."===h){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((f||v)&&m){for(i=e.split("/"),u=i.length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(d=f.length;d>0;d-=1)if(r=m[f.slice(0,d).join("/")],r&&(r=r[n])){a=r,o=u;break}if(a)break;!l&&v&&v[n]&&(l=v[n],c=u)}!a&&l&&(a=l,o=c),a&&(i.splice(0,o,a),e=i.join("/"))}return e}function n(t,i){return function(){var n=y.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),d.apply(e,n.concat([t,i]))}}function r(e){return function(t){return i(t,e)}}function a(e){return function(t){f[e]=t}}function s(i){if(t(m,i)){var n=m[i];delete m[i],v[i]=!0,u.apply(e,n)}if(!t(f,i)&&!t(v,i))throw new Error("No "+i);return f[i]}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function l(e){return e?o(e):[]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var u,d,h,p,f={},m={},g={},v={},b=Object.prototype.hasOwnProperty,y=[].slice,w=/\.js$/;h=function(e,t){var n,a=o(e),l=a[0],c=t[1];return e=a[1],l&&(l=i(l,c),n=s(l)),l?e=n&&n.normalize?n.normalize(e,r(c)):i(e,c):(e=i(e,c),a=o(e),l=a[0],e=a[1],l&&(n=s(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:n}},p={require:function(e){return n(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:c(e)}}},u=function(i,r,o,c){var u,d,g,b,y,w,L,k=[],x=typeof o;if(c=c||i,w=l(c),"undefined"===x||"function"===x){for(r=!r.length&&o.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(b=h(r[y],w),d=b.f,"require"===d)k[y]=p.require(i);else if("exports"===d)k[y]=p.exports(i),L=!0;else if("module"===d)u=k[y]=p.module(i);else if(t(f,d)||t(m,d)||t(v,d))k[y]=s(d);else{if(!b.p)throw new Error(i+" missing "+d);b.p.load(b.n,n(c,!0),a(d),{}),k[y]=f[d]}g=o?o.apply(f[i],k):void 0,i&&(u&&u.exports!==e&&u.exports!==f[i]?f[i]=u.exports:g===e&&L||(f[i]=g))}else i&&(f[i]=o)},requirejs=require=d=function(t,i,n,r,a){if("string"==typeof t)return p[t]?p[t](i):s(h(t,l(i)).f);if(!t.splice){if(g=t,g.deps&&d(g.deps,g.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=r,r=a),r?u(e,t,i,n):setTimeout(function(){u(e,t,i,n)},4),d},d.config=function(e){return d(e)},requirejs._defined=f,define=function(e,i,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");i.splice||(n=i,i=[]),t(f,e)||t(m,e)||(m[e]=[e,i,n])},define.amd={jQuery:!0}}(),define("bower_components/almond/almond",function(){}),function(){function e(e){function t(t,i,n,r,a,s){for(;a>=0&&a<s;a+=e){var o=r?r[a]:a;n=i(n,t[o],o,t)}return n}return function(i,n,r,a){n=y(n,a,4);var s=!M(i)&&b.keys(i),o=(s||i).length,l=e>0?0:o-1;return arguments.length<3&&(r=i[s?s[l]:l],l+=e),t(i,n,r,s,l,o)}}function t(e){return function(t,i,n){i=w(i,n);for(var r=S(t),a=e>0?0:r-1;a>=0&&a<r;a+=e)if(i(t[a],a,t))return a;return-1}}function i(e,t,i){return function(n,r,a){var s=0,o=S(n);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+o,s):o=a>=0?Math.min(a+1,o):a+o+1;else if(i&&a&&o)return a=i(n,r),n[a]===r?a:-1;if(r!==r)return a=t(u.call(n,s,o),b.isNaN),a>=0?a+s:-1;for(a=e>0?s:o-1;a>=0&&a<o;a+=e)if(n[a]===r)return a;return-1}}function n(e,t){var i=P.length,n=e.constructor,r=b.isFunction(n)&&n.prototype||o,a="constructor";for(b.has(e,a)&&!b.contains(t,a)&&t.push(a);i--;)a=P[i],a in e&&e[a]!==r[a]&&!b.contains(t,a)&&t.push(a)}var r=this,a=r._,s=Array.prototype,o=Object.prototype,l=Function.prototype,c=s.push,u=s.slice,d=o.toString,h=o.hasOwnProperty,p=Array.isArray,f=Object.keys,m=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):r._=b,b.VERSION="1.8.3";var y=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)};case 4:return function(i,n,r,a){return e.call(t,i,n,r,a)}}return function(){return e.apply(t,arguments)}},w=function(e,t,i){return null==e?b.identity:b.isFunction(e)?y(e,t,i):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var L=function(e,t){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var r=1;r<n;r++)for(var a=arguments[r],s=e(a),o=s.length,l=0;l<o;l++){var c=s[l];t&&void 0!==i[c]||(i[c]=a[c])}return i}},k=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},x=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,S=x("length"),M=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=C};b.each=b.forEach=function(e,t,i){t=y(t,i);var n,r;if(M(e))for(n=0,r=e.length;n<r;n++)t(e[n],n,e);else{var a=b.keys(e);for(n=0,r=a.length;n<r;n++)t(e[a[n]],a[n],e)}return e},b.map=b.collect=function(e,t,i){t=w(t,i);for(var n=!M(e)&&b.keys(e),r=(n||e).length,a=Array(r),s=0;s<r;s++){var o=n?n[s]:s;a[s]=t(e[o],o,e)}return a},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,i){var n;if(n=M(e)?b.findIndex(e,t,i):b.findKey(e,t,i),void 0!==n&&n!==-1)return e[n]},b.filter=b.select=function(e,t,i){var n=[];return t=w(t,i),b.each(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n},b.reject=function(e,t,i){return b.filter(e,b.negate(w(t)),i)},b.every=b.all=function(e,t,i){t=w(t,i);for(var n=!M(e)&&b.keys(e),r=(n||e).length,a=0;a<r;a++){var s=n?n[a]:a;if(!t(e[s],s,e))return!1}return!0},b.some=b.any=function(e,t,i){t=w(t,i);for(var n=!M(e)&&b.keys(e),r=(n||e).length,a=0;a<r;a++){var s=n?n[a]:a;if(t(e[s],s,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,i,n){return M(e)||(e=b.values(e)),("number"!=typeof i||n)&&(i=0),b.indexOf(e,t,i)>=0},b.invoke=function(e,t){var i=u.call(arguments,2),n=b.isFunction(t);return b.map(e,function(e){var r=n?t:e[t];return null==r?r:r.apply(e,i)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,i){var n,r,a=-(1/0),s=-(1/0);if(null==t&&null!=e){e=M(e)?e:b.values(e);for(var o=0,l=e.length;o<l;o++)n=e[o],n>a&&(a=n)}else t=w(t,i),b.each(e,function(e,i,n){r=t(e,i,n),(r>s||r===-(1/0)&&a===-(1/0))&&(a=e,s=r)});return a},b.min=function(e,t,i){var n,r,a=1/0,s=1/0;if(null==t&&null!=e){e=M(e)?e:b.values(e);for(var o=0,l=e.length;o<l;o++)n=e[o],n<a&&(a=n)}else t=w(t,i),b.each(e,function(e,i,n){r=t(e,i,n),(r<s||r===1/0&&a===1/0)&&(a=e,s=r)});return a},b.shuffle=function(e){for(var t,i=M(e)?e:b.values(e),n=i.length,r=Array(n),a=0;a<n;a++)t=b.random(0,a),t!==a&&(r[a]=r[t]),r[t]=i[a];return r},b.sample=function(e,t,i){return null==t||i?(M(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,i){return t=w(t,i),b.pluck(b.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,i,n){var r={};return i=w(i,n),b.each(t,function(n,a){var s=i(n,a,t);e(r,n,s)}),r}};b.groupBy=I(function(e,t,i){b.has(e,i)?e[i].push(t):e[i]=[t]}),b.indexBy=I(function(e,t,i){e[i]=t}),b.countBy=I(function(e,t,i){b.has(e,i)?e[i]++:e[i]=1}),b.toArray=function(e){return e?b.isArray(e)?u.call(e):M(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:M(e)?e.length:b.keys(e).length},b.partition=function(e,t,i){t=w(t,i);var n=[],r=[];return b.each(e,function(e,i,a){(t(e,i,a)?n:r).push(e)}),[n,r]},b.first=b.head=b.take=function(e,t,i){if(null!=e)return null==t||i?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,i){return u.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},b.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,i){return u.call(e,null==t||i?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var A=function(e,t,i,n){for(var r=[],a=0,s=n||0,o=S(e);s<o;s++){var l=e[s];if(M(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=A(l,t,i));var c=0,u=l.length;for(r.length+=u;c<u;)r[a++]=l[c++]}else i||(r[a++]=l)}return r};b.flatten=function(e,t){return A(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,i,n){b.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=w(i,n));for(var r=[],a=[],s=0,o=S(e);s<o;s++){var l=e[s],c=i?i(l,s,e):l;t?(s&&a===c||r.push(l),a=c):i?b.contains(a,c)||(a.push(c),r.push(l)):b.contains(r,l)||r.push(l)}return r},b.union=function(){return b.uniq(A(arguments,!0,!0))},b.intersection=function(e){for(var t=[],i=arguments.length,n=0,r=S(e);n<r;n++){var a=e[n];if(!b.contains(t,a)){for(var s=1;s<i&&b.contains(arguments[s],a);s++);s===i&&t.push(a)}}return t},b.difference=function(e){var t=A(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,S).length||0,i=Array(t),n=0;n<t;n++)i[n]=b.pluck(e,n);return i},b.object=function(e,t){for(var i={},n=0,r=S(e);n<r;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,i,n){i=w(i,n,1);for(var r=i(t),a=0,s=S(e);a<s;){var o=Math.floor((a+s)/2);i(e[o])<r?a=o+1:s=o}return a},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=Array(n),a=0;a<n;a++,e+=i)r[a]=e;return r};var z=function(e,t,i,n,r){if(!(n instanceof t))return e.apply(i,r);var a=k(e.prototype),s=e.apply(a,r);return b.isObject(s)?s:a};b.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var i=u.call(arguments,2),n=function(){return z(e,n,t,this,i.concat(u.call(arguments)))};return n},b.partial=function(e){var t=u.call(arguments,1),i=function(){for(var n=0,r=t.length,a=Array(r),s=0;s<r;s++)a[s]=t[s]===b?arguments[n++]:t[s];for(;n<arguments.length;)a.push(arguments[n++]);return z(e,i,this,this,a)};return i},b.bindAll=function(e){var t,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)i=arguments[t],e[i]=b.bind(e[i],e);return e},b.memoize=function(e,t){var i=function(n){var r=i.cache,a=""+(t?t.apply(this,arguments):n);return b.has(r,a)||(r[a]=e.apply(this,arguments)),r[a]};return i.cache={},i},b.delay=function(e,t){var i=u.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,i){var n,r,a,s=null,o=0;i||(i={});var l=function(){o=i.leading===!1?0:b.now(),s=null,a=e.apply(n,r),s||(n=r=null)};return function(){var c=b.now();o||i.leading!==!1||(o=c);var u=t-(c-o);return n=this,r=arguments,u<=0||u>t?(s&&(clearTimeout(s),s=null),o=c,a=e.apply(n,r),s||(n=r=null)):s||i.trailing===!1||(s=setTimeout(l,u)),a}},b.debounce=function(e,t,i){var n,r,a,s,o,l=function(){var c=b.now()-s;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,i||(o=e.apply(a,r),n||(a=r=null)))};return function(){a=this,r=arguments,s=b.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(o=e.apply(a,r),a=r=null),o}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},b.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},b.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},b.once=b.partial(b.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(f)return f(e);var t=[];for(var i in e)b.has(e,i)&&t.push(i);return E&&n(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var i in e)t.push(i);return E&&n(e,t),t},b.values=function(e){for(var t=b.keys(e),i=t.length,n=Array(i),r=0;r<i;r++)n[r]=e[t[r]];return n},b.mapObject=function(e,t,i){t=w(t,i);for(var n,r=b.keys(e),a=r.length,s={},o=0;o<a;o++)n=r[o],s[n]=t(e[n],n,e);return s},b.pairs=function(e){for(var t=b.keys(e),i=t.length,n=Array(i),r=0;r<i;r++)n[r]=[t[r],e[t[r]]];return n},b.invert=function(e){for(var t={},i=b.keys(e),n=0,r=i.length;n<r;n++)t[e[i[n]]]=i[n];return t},b.functions=b.methods=function(e){var t=[];for(var i in e)b.isFunction(e[i])&&t.push(i);return t.sort()},b.extend=L(b.allKeys),b.extendOwn=b.assign=L(b.keys),b.findKey=function(e,t,i){t=w(t,i);for(var n,r=b.keys(e),a=0,s=r.length;a<s;a++)if(n=r[a],t(e[n],n,e))return n},b.pick=function(e,t,i){var n,r,a={},s=e;if(null==s)return a;b.isFunction(t)?(r=b.allKeys(s),n=y(t,i)):(r=A(arguments,!1,!1,1),n=function(e,t,i){return t in i},s=Object(s));for(var o=0,l=r.length;o<l;o++){var c=r[o],u=s[c];n(u,c,s)&&(a[c]=u)}return a},b.omit=function(e,t,i){if(b.isFunction(t))t=b.negate(t);else{var n=b.map(A(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(n,t)}}return b.pick(e,t,i)},b.defaults=L(b.allKeys,!0),b.create=function(e,t){var i=k(e);return t&&b.extendOwn(i,t),i},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var i=b.keys(t),n=i.length;if(null==e)return!n;for(var r=Object(e),a=0;a<n;a++){var s=i[a];if(t[s]!==r[s]||!(s in r))return!1}return!0};var T=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===r;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,o=t.constructor;if(s!==o&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),a){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!T(e[l],t[l],i,n))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!T(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};b.isEqual=function(e,t){return T(e,t)},b.isEmpty=function(e){return null==e||(M(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=p||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return r._=a,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=x,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,i){var n=Array(Math.max(0,e));t=y(t,i,1);for(var r=0;r<e;r++)n[r]=t(r);return n},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=b.invert(N),D=function(e){var t=function(t){return e[t]},i="(?:"+b.keys(e).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(r,t):e}};b.escape=D(N),b.unescape=D(j),b.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),b.isFunction(n)?n.call(e):n};var R=0;b.uniqueId=function(e){var t=++R+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var _=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+O[e]};b.template=function(e,t,i){!t&&i&&(t=i),t=b.defaults({},t,b.templateSettings);var n=RegExp([(t.escape||_).source,(t.interpolate||_).source,(t.evaluate||_).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(n,function(t,i,n,s,o){return a+=e.slice(r,o).replace(G,H),r=o+t.length,i?a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(a+="';\n"+s+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var o=function(e){return s.call(this,e,b)},l=t.variable||"obj";return o.source="function("+l+"){\n"+a+"}",o},b.chain=function(e){var t=b(e);return t._chain=!0,t};var U=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var i=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),U(this,i.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];b.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],U(this,i)}}),b.each(["concat","join","slice"],function(e){var t=s[e];b.prototype[e]=function(){return U(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),function(e){var t="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,r){t.Backbone=e(t,r,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(e){}e(t,exports,n,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,i,n){var r=e.Backbone,a=Array.prototype.slice;t.VERSION="1.2.3",t.$=n,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,n){switch(e){case 1:return function(){return i[t](this[n])};case 2:return function(e){return i[t](this[n],e)};case 3:return function(e,r){return i[t](this[n],l(e,this),r)};case 4:return function(e,r,a){return i[t](this[n],l(e,this),r,a)};default:return function(){var e=a.call(arguments);return e.unshift(this[n]),i[t].apply(i,e)}}},o=function(e,t,n){i.each(t,function(t,r){i[r]&&(e.prototype[r]=s(t,r,n))})},l=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?c(e):i.isString(e)?function(t){return t.get(e)}:e},c=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},u=t.Events={},d=/\s+/,h=function(e,t,n,r,a){var s,o=0;if(n&&"object"==typeof n){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(s=i.keys(n);o<s.length;o++)t=h(e,t,s[o],n[s[o]],a)}else if(n&&d.test(n))for(s=n.split(d);o<s.length;o++)t=e(t,s[o],r,a);else t=e(t,n,r,a);return t};u.on=function(e,t,i){return p(this,e,t,i)};var p=function(e,t,i,n,r){if(e._events=h(f,e._events||{},t,i,{context:n,ctx:e,listening:r}),r){var a=e._listeners||(e._listeners={});a[r.id]=r}return e};u.listenTo=function(e,t,n){if(!e)return this;var r=e._listenId||(e._listenId=i.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),s=a[r];if(!s){var o=this._listenId||(this._listenId=i.uniqueId("l"));s=a[r]={obj:e,objId:r,id:o,listeningTo:a,count:0}}return p(e,t,n,this,s),this};var f=function(e,t,i,n){if(i){var r=e[t]||(e[t]=[]),a=n.context,s=n.ctx,o=n.listening;o&&o.count++,r.push({callback:i,context:a,ctx:a||s,listening:o})}return e};u.off=function(e,t,i){return this._events?(this._events=h(m,this._events,e,t,{context:i,listeners:this._listeners}),this):this},u.stopListening=function(e,t,n){var r=this._listeningTo;if(!r)return this;for(var a=e?[e._listenId]:i.keys(r),s=0;s<a.length;s++){var o=r[a[s]];if(!o)break;o.obj.off(t,n,this)}return i.isEmpty(r)&&(this._listeningTo=void 0),this};var m=function(e,t,n,r){if(e){var a,s=0,o=r.context,l=r.listeners;if(t||n||o){for(var c=t?[t]:i.keys(e);s<c.length;s++){t=c[s];var u=e[t];if(!u)break;for(var d=[],h=0;h<u.length;h++){var p=u[h];n&&n!==p.callback&&n!==p.callback._callback||o&&o!==p.context?d.push(p):(a=p.listening,a&&0===--a.count&&(delete l[a.id],delete a.listeningTo[a.objId]))}d.length?e[t]=d:delete e[t]}return i.size(e)?e:void 0}for(var f=i.keys(l);s<f.length;s++)a=l[f[s]],delete l[a.id],delete a.listeningTo[a.objId]}};u.once=function(e,t,n){var r=h(g,{},e,t,i.bind(this.off,this));return this.on(r,void 0,n)},u.listenToOnce=function(e,t,n){var r=h(g,{},t,n,i.bind(this.stopListening,this,e));return this.listenTo(e,r)};var g=function(e,t,n,r){if(n){var a=e[t]=i.once(function(){r(t,a),n.apply(this,arguments)});a._callback=n}return e};u.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),n=0;n<t;n++)i[n]=arguments[n+1];return h(v,this._events,e,void 0,i),this};var v=function(e,t,i,n){if(e){var r=e[t],a=e.all;r&&a&&(a=a.slice()),r&&b(r,n),a&&b(a,[t].concat(n))}return e},b=function(e,t){var i,n=-1,r=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,s);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,s,o);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t);return}};u.bind=u.on,u.unbind=u.off,i.extend(t,u);var y=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var r;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;var a=n.unset,s=n.silent,o=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var h in r)t=r[h],i.isEqual(c[h],t)||o.push(h),i.isEqual(d[h],t)?delete u[h]:u[h]=t,a?delete c[h]:c[h]=t;if(this.id=this.get(this.idAttribute),!s){o.length&&(this._pending=n);for(var p=0;p<o.length;p++)this.trigger("change:"+o[p],this,c[o[p]],n)}if(l)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var r in e){var a=e[r];i.isEqual(t[r],a)||(n[r]=a)}return!!i.size(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var r=e.parse?t.parse(i,e):i;return!!t.set(r,e)&&(n&&n.call(e.context,t,i,e),void t.trigger("sync",t,i,e))},U(this,e),this.sync("read",this,e)},save:function(e,t,n){var r;null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,n=i.extend({validate:!0,parse:!0},n);var a=n.wait;if(r&&!a){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;var s=this,o=n.success,l=this.attributes;n.success=function(e){s.attributes=l;var t=n.parse?s.parse(e,n):e;return a&&(t=i.extend({},r,t)),!(t&&!s.set(t,n))&&(o&&o.call(n.context,s,e,n),void s.trigger("sync",s,e,n))},U(this,n),r&&a&&(this.attributes=i.extend({},l,r));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=r);var u=this.sync(c,this,n);return this.attributes=l,u},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,r=e.wait,a=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){r&&a(),n&&n.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var s=!1;return this.isNew()?i.defer(e.success):(U(this,e),s=this.sync("delete",this,e)),r||a(),s},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||H();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};o(y,w,"attributes");var L=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},k={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},C=function(e,t,i){i=Math.min(Math.max(i,0),e.length);for(var n=Array(e.length-i),r=t.length,a=0;a<n.length;a++)n[a]=e[a+i];for(a=0;a<r;a++)e[a+i]=t[a];for(a=0;a<n.length;a++)e[a+r+i]=n[a]};i.extend(L.prototype,u,{model:y,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,x))},remove:function(e,t){t=i.extend({},t);var n=!i.isArray(e);e=n?[e]:i.clone(e);var r=this._removeModels(e,t);return!t.silent&&r&&this.trigger("update",this,t),n?r[0]:r},set:function(e,t){if(null!=e){t=i.defaults({},t,k),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r<0&&(r+=this.length+1);for(var a,s=[],o=[],l=[],c={},u=t.add,d=t.merge,h=t.remove,p=!1,f=this.comparator&&null==r&&t.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,g=0;g<e.length;g++){a=e[g];var v=this.get(a);if(v){if(d&&a!==v){var b=this._isModel(a)?a.attributes:a;t.parse&&(b=v.parse(b,t)),v.set(b,t),f&&!p&&(p=v.hasChanged(m))}c[v.cid]||(c[v.cid]=!0,s.push(v)),e[g]=v}else u&&(a=e[g]=this._prepareModel(a,t),a&&(o.push(a),this._addReference(a,t),c[a.cid]=!0,s.push(a)))}if(h){for(g=0;g<this.length;g++)a=this.models[g],c[a.cid]||l.push(a);l.length&&this._removeModels(l,t)}var y=!1,w=!f&&u&&h;if(s.length&&w?(y=this.length!=s.length||i.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,C(this.models,s,0),this.length=this.models.length):o.length&&(f&&(p=!0),C(this.models,o,null==r?this.length:r),this.length=this.models.length),p&&this.sort({silent:!0}),!t.silent){for(g=0;g<o.length;g++)null!=r&&(t.index=r+g),a=o[g],a.trigger("add",a,this,t);(p||y)&&this.trigger("sort",this,t),(o.length||l.length)&&this.trigger("update",this,t)}return n?e[0]:e}},reset:function(e,t){t=t?i.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return i.isFunction(t)&&(t=i.bind(t,this)),1===n||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=i.extend({parse:!0},e);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},U(this,e),this.sync("read",this,e)},create:function(e,t){t=t?i.clone(t):{};var n=t.wait;if(e=this._prepareModel(e,t),!e)return!1;n||this.add(e,t);var r=this,a=t.success;return t.success=function(e,t,i){n&&r.add(e,i),a&&a.call(i.context,e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var i=[],n=0;n<e.length;n++){var r=this.get(e[n]);if(r){var a=this.indexOf(r);this.models.splice(a,1),this.length--,t.silent||(t.index=a,r.trigger("remove",r,this,t)),i.push(r),this._removeReference(r,t)}}return!!i.length&&i},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;
var i=this.modelId(e.attributes);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){if("add"!==e&&"remove"!==e||i===this){if("destroy"===e&&this.remove(t,n),"change"===e){var r=this.modelId(t.previousAttributes()),a=this.modelId(t.attributes);r!==a&&(null!=r&&delete this._byId[r],null!=a&&(this._byId[a]=t))}this.trigger.apply(this,arguments)}}});var S={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};o(L,S,"models");var M=t.View=function(e){this.cid=i.uniqueId("view"),i.extend(this,i.pick(e,A)),this._ensureElement(),this.initialize.apply(this,arguments)},I=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];i.extend(M.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[n]),n){var r=t.match(I);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,r){var a=z[e];i.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:a,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||H()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){s.type="POST",r.emulateJSON&&(s.data._method=a);var o=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),o)return o.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var l=r.error;r.error=function(e,t,i){r.textStatus=t,r.errorThrown=i,l&&l.call(r.context,e,t,i)};var c=r.xhr=t.ajax(i.extend(s,r));return n.trigger("request",n,c,r),c};var z={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,N=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(E.prototype,u,{initialize:function(){},route:function(e,n,r){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var a=this;return t.history.route(e,function(i){var s=a._extractParameters(e,i);a.execute(r,s,n)!==!1&&(a.trigger.apply(a,["route:"+n].concat(s)),a.trigger("route",n,s),t.history.trigger("route",a,n,s))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(j,"\\$&").replace(P,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,O=/#.*$/;D.started=!1,i.extend(D.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(R,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(_,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var a=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),i.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;""!==e&&"?"!==e.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+e;if(e=this.decodeFragment(e.replace(O,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new D;var G=function(e,t){var n,r=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,t);var a=function(){this.constructor=n};return a.prototype=r.prototype,n.prototype=new a,e&&i.extend(n.prototype,e),n.__super__=r.prototype,n};y.extend=L.extend=E.extend=M.extend=D.extend=G;var H=function(){throw new Error('A "url" property or function must be specified')},U=function(e,t){var i=t.error;t.error=function(n){i&&i.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t}),function(e,t){"function"==typeof define&&define.amd?define("cldr",t):"object"==typeof module&&"object"==typeof module.exports?module.exports=t():e.Cldr=t()}(this,function(){var e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=function(t,i){if(e(t)&&(t=t.join("/")),"string"!=typeof t)throw new Error('invalid path "'+t+'"');return t=t.replace(/^\//,"").replace(/^cldr\//,""),t=t.replace(/{[a-zA-Z]+}/g,function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),i[e]}),t.split("/")},i=function(e,t){var i,n;if(e.some)return e.some(t);for(i=0,n=e.length;i<n;i++)if(t(e[i],i,e))return!0;return!1},n=function(e,t,n,r){var a,s,o=n[0],l=n[1],c=e.localeSep,u=n[2],d=n.slice(3,4);return r=r||{},"und"!==o&&"Zzzz"!==l&&"ZZ"!==u?[o,l,u].concat(d):"undefined"!=typeof t.get("supplemental/likelySubtags")?(s=i([[o,l,u],[o,u],[o,l],[o],["und",l]],function(e){return a=!/\b(Zzzz|ZZ)\b/.test(e.join(c))&&t.get(["supplemental/likelySubtags",e.join(c)])}),s?(a=a.split(c),["und"!==o?o:a[0],"Zzzz"!==l?l:a[1],"ZZ"!==u?u:a[2]].concat(d)):r.force?t.get("supplemental/likelySubtags/und").split(c):void 0):void 0},r=function(e,t,r){var a,s,o=r[0],l=r[1],c=r[2],u=r[3];return s=i([[[o,"Zzzz","ZZ"],[o]],[[o,"Zzzz",c],[o,c]],[[o,l,"ZZ"],[o,l]]],function(i){var s=n(e,t,i[0]);return a=i[1],s&&s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]}),s?(u&&a.push(u),a):r},a=function(e){var t,i,n=[];return e=e.replace(/_/,"-"),t=e.split("-u-"),t[1]&&(t[1]=t[1].split("-t-"),e=t[0]+(t[1][1]?"-t-"+t[1][1]:""),n[4]=t[1][0]),i=e.split("-t-")[0],t=i.match(/^(([a-z]{2,3})(-([A-Z][a-z]{3}))?(-([A-Z]{2}|[0-9]{3}))?)((-([a-zA-Z0-9]{5,8}|[0-9][a-zA-Z0-9]{3}))*)$|^(root)$/),null===t?["und","Zzzz","ZZ"]:(n[0]=t[10]||t[2]||"und",n[1]=t[4]||"Zzzz",n[2]=t[6]||"ZZ",t[7]&&t[7].length&&(n[3]=t[7].slice(1)),n)},s=function(e,t){var i,n;if(e.forEach)return e.forEach(t);for(i=0,n=e.length;i<n;i++)t(e[i],i,e)},o=function(e,t,i){var o=e._availableBundleMap,l=e._availableBundleMapQueue;return l.length&&(s(l,function(i){var s,c,u,d;d=a(i),c=n(e,t,d),u=r(e,t,c),u=u.join(e.localeSep),s=l[u],s&&s.length<i.length||(o[u]=i)}),e._availableBundleMapQueue=[]),o[i]||null},l=function(e){var t,i=[];if(Object.keys)return Object.keys(e);for(t in e)i.push(t);return i},c=function(e,t){var i,n;return n=e+(t&&JSON?": "+JSON.stringify(t):""),i=new Error(n),i.code=e,s(l(t),function(e){i[e]=t[e]}),i},u=function(e,t,i){if(!t)throw c(e,i)},d=function(e,t){u("E_MISSING_PARAMETER","undefined"!=typeof e,{name:t})},h=function(e,t,i,n){u("E_INVALID_PAR_TYPE",i,{expected:n,name:t,value:e})},p=function(t,i){h(t,i,"string"==typeof t||e(t),"String or Array")},f=function(e){return null!==e&&""+e=="[object Object]"},m=function(e,t){h(e,t,"undefined"==typeof e||f(e),"Plain Object")},g=function(e,t){h(e,t,"string"==typeof e,"a string")},v=function(e,t){var i,n=e,r=t.length;for(i=0;i<r-1;i++)if(n=n[t[i]],!n)return;return n[t[i]]},b=function(e,t){var i,n=e._availableBundleMapQueue,r=v(t,["main"]);if(r)for(i in r)r.hasOwnProperty(i)&&"root"!==i&&n.indexOf(i)===-1&&n.push(i)},y=function(t){return e(t)?t:[t]},w=function(){var t=function(){var i={},n=[].slice.call(arguments,0);return s(n,function(n){var r;for(r in n)r in i&&"object"==typeof i[r]&&!e(i[r])?i[r]=t(i[r],n[r]):i[r]=n[r]}),i};return t}(),L=function(e,t,i){var n,r,a;for(d(i[0],"json"),n=0;n<i.length;n++)for(a=y(i[n]),r=0;r<a.length;r++)m(a[r],"json"),t=w(t,a[r]),b(e,a[r]);return t},k=function(e,i,n){var r=t(i,n);return v(e._resolved,r)},x=function(e){this.init(e)};return x._alwaysArray=y,x._coreLoad=L,x._createError=c,x._itemGetResolved=k,x._jsonMerge=w,x._pathNormalize=t,x._resourceGet=v,x._validatePresence=d,x._validateType=h,x._validateTypePath=p,x._validateTypePlainObject=m,x._availableBundleMap={},x._availableBundleMapQueue=[],x._resolved={},x.localeSep="-",x.load=function(){x._resolved=L(x,x._resolved,arguments)},x.prototype.init=function(e){var t,i,s,l,c,u,h,p,f,m=x.localeSep,v="";d(e,"locale"),g(e,"locale"),u=a(e),5===u.length&&(p=u.pop(),v=m+"u"+m+p,u[3]||u.pop()),f=u[3],s=n(x,this,u,{force:!0})||u,i=s[0],c=s[1],h=s[2],l=r(x,this,s).join(m),this.attributes=t={bundle:o(x,this,l),minLanguageId:l+v,maxLanguageId:s.join(m)+v,language:i,script:c,territory:h,region:h,variant:f},p&&("-"+p).replace(/-[a-z]{3,8}|(-[a-z]{2})-([a-z]{3,8})/g,function(e,i,n){i?t["u"+i]=n:t["u"+e]=!0}),this.locale=e},x.prototype.get=function(e){return d(e,"path"),p(e,"path"),k(x,e,this.attributes)},x.prototype.main=function(e){return d(e,"path"),p(e,"path"),u("E_MISSING_BUNDLE",null!==this.attributes.bundle,{locale:this.locale}),e=y(e),this.get(["main/{bundle}"].concat(e))},x}),function(e){"function"==typeof define&&define.amd?define("cldr/event",["../cldr"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("../cldr")):e(Cldr)}(function(e){function t(e,t){u(e,t,"string"==typeof e||e instanceof RegExp,"String or RegExp")}function i(e,i){return function(n,r){return c(n,"event"),t(n,"event"),c(r,"listener"),p(r,"listener"),i[e].apply(i,arguments)}}function n(e){return i("off",e)}function r(e){return i("on",e)}function a(e){return i("once",e)}function s(){d=e.prototype.get,e.prototype.get=function(e){var t=d.apply(this,arguments);return e=l(e,this.attributes).join("/"),f.trigger("get",[e,t]),this.ee.trigger("get",[e,t]),t}}var o,l=e._pathNormalize,c=e._validatePresence,u=e._validateType;o=function(){function e(){}function t(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}var n=e.prototype,r=this,a=r.EventEmitter;return n.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp){t={};for(i in n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i])}else t=n[e]||(n[e]=[]);return t},n.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},n.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},n.addListener=function(e,i){var n,r=this.getListenersAsObject(e),a="object"==typeof i;for(n in r)r.hasOwnProperty(n)&&t(r[n],i)===-1&&r[n].push(a?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,i){var n,r,a=this.getListenersAsObject(e);for(r in a)a.hasOwnProperty(r)&&(n=t(a[r],i),n!==-1&&a[r].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,i){var n,r,a=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)a.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(r=t[n])&&("function"==typeof r?a.call(this,n,r):s.call(this,n,r));return this},n.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){var i,n,r,a,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].length;n--;)i=s[r][n],i.once===!0&&this.removeListener(e,i.listener),a=i.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=a,e},e}();var d,h,p=function(e,t){u(e,t,"undefined"==typeof e||"function"==typeof e,"Function")},f=new o;return e.off=n(f),e.on=r(f),e.once=a(f),h=e.prototype.init,e.prototype.init=function(){var e;this.ee=e=new o,this.off=n(e),this.on=r(e),this.once=a(e),h.apply(this,arguments)},e._eventInit=s,s(),e}),function(e,t){"function"==typeof define&&define.amd?define("globalize",["cldr","cldr/event"],t):"object"==typeof exports?module.exports=t(require("cldrjs")):e.Globalize=t(e.Cldr)}(this,function(e){function t(e){e.once("get",p),e.get("supplemental/likelySubtags")}function i(e){return this instanceof i?(m(e,"locale"),b(e,"locale"),this.cldr=L(e),void t(this.cldr)):new i(e)}var n=function(e){return"string"==typeof e?e:"number"==typeof e?""+e:JSON.stringify(e)},r=function(e,t){return e=e.replace(/{[0-9a-zA-Z-_. ]+}/g,function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),n(t[e])})},a=function(){var e=arguments[0],t=[].slice.call(arguments,1);return t.forEach(function(t){var i;for(i in t)e[i]=t[i]}),e},s=function(e,t,i){var n;return t=e+(t?": "+r(t,i):""),n=new Error(t),n.code=e,a(n,i),n},o=function(e){return[].reduce.call(e,function(e,t){var i=t.charCodeAt(0);return e=(e<<5)-e+i,0|e},0)},l=function(e,t,i,n){var r;return n=n||JSON.stringify(i),r=o(e+t+n),r>0?"a"+r:"b"+Math.abs(r)},c=function(e){if(void 0!==e.name)return e.name;var t=/^function\s+([\w\$]+)\s*\(/.exec(e.toString());return t&&t.length>0?t[1]:void 0},u=function(e,t,i,n){var r=JSON.stringify(e),a=c(i),s=t.locale;return a?(i.runtimeKey=l(a,s,null,r),i.generatorString=function(){return'Globalize("'+s+'").'+a+"("+r.slice(1,-1)+")"},i.runtimeArgs=n,i):i},d=function(e,t,i,n){if(!i)throw s(e,t,n)},h=function(e){return Array.isArray(e)?e:e?[e]:[]},p=function(e,t,i){var n;i=i||{},n=h(i.skip).some(function(t){return t.test(e)}),d("E_MISSING_CLDR","Missing required CLDR content `{path}`.",t||n,{path:e})},f=function(e){d("E_DEFAULT_LOCALE_NOT_DEFINED","Default locale has not been defined.",void 0!==e,{})},m=function(e,t){d("E_MISSING_PARAMETER","Missing required parameter `{name}`.",void 0!==e,{name:t})},g=function(e,t,i,n){d("E_PAR_OUT_OF_RANGE","Parameter `{name}` has value `{value}` out of range [{minimum}, {maximum}].",void 0===e||e>=i&&e<=n,{maximum:n,minimum:i,name:t,value:e})},v=function(e,t,i,n){d("E_INVALID_PAR_TYPE","Invalid `{name}` parameter ({value}). {expected} expected.",i,{expected:n,name:t,value:e})},b=function(t,i){v(t,i,void 0===t||"string"==typeof t||t instanceof e,"String or Cldr instance")},y=function(e){return null!==e&&""+e=="[object Object]"},w=function(e,t){v(e,t,void 0===e||y(e),"Plain Object")},L=function(t){return t instanceof e?t:new e(t)},k=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},x=function(e,t,i){var n;for("string"!=typeof e&&(e=String(e)),n=e.length;n<t;n+=1)e=i?e+"0":"0"+e;return e};return i.load=function(){e.load.apply(e,arguments)},i.locale=function(e){return b(e,"locale"),arguments.length&&(this.cldr=L(e),t(this.cldr)),this.cldr},i._alwaysArray=h,i._createError=s,i._formatMessage=r,i._isPlainObject=y,i._objectExtend=a,i._regexpEscape=k,i._runtimeBind=u,i._stringPad=x,i._validate=d,i._validateCldr=p,i._validateDefaultLocale=f,i._validateParameterPresence=m,i._validateParameterRange=g,i._validateParameterTypePlainObject=w,i._validateParameterType=v,i}),define("text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function i(e,i,n,r){if(i===r)return!0;if(e===n){if("http"===e)return t(i,"80")===t(r,"80");if("https"===e)return t(i,"443")===t(r,"443")}return!1}var n,r,a,s,o,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),p=d&&location.hostname,f=d&&(location.port||void 0),m={},g=e.config&&e.config()||{};return n={version:"2.0.15",strip:function(e){if(e){e=e.replace(c,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=l[t];try{e=new ActiveXObject(i)}catch(e){}if(e){l=[i];break}}return e},parseName:function(e){var t,i,n,r=!1,a=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return a!==-1&&(!s||a>1)?(t=e.substring(0,a),i=e.substring(a+1)):t=e,n=i||t,a=n.indexOf("!"),a!==-1&&(r="strip"===n.substring(a+1),n=n.substring(0,a),i?i=n:t=n),{moduleName:t,ext:i,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,a){var s,o,l,c=n.xdRegExp.exec(e);return!c||(s=c[2],o=c[3],o=o.split(":"),l=o[1],o=o[0],(!s||s===t)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!l&&!o||i(s,l,t,a)))},finishLoad:function(e,t,i,r){i=t?n.strip(i):i,g.isBuild&&(m[e]=i),r(i)},load:function(e,t,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();g.isBuild=r&&r.isBuild;var a=n.parseName(e),s=a.moduleName+(a.ext?"."+a.ext:""),o=t.toUrl(s),l=g.useXhr||n.useXhr;return 0===o.indexOf("empty:")?void i():void(!d||l(o,h,p,f)?n.get(o,function(t){n.finishLoad(e,a.strip,t,i)},function(e){i.error&&i.error(e)}):t([s],function(e){n.finishLoad(a.moduleName+"."+a.ext,a.strip,e,i)}))},write:function(e,t,i,r){if(m.hasOwnProperty(t)){var a=n.jsEscape(m[t]);i.asModule(e+"!"+t,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,t,i,r,a){var s=n.parseName(t),o=s.ext?"."+s.ext:"",l=s.moduleName+o,c=i.toUrl(s.moduleName+o)+".js";n.load(l,i,function(t){var i=function(e){return r(c,e)};i.asModule=function(e,t){return r.asModule(e,c,t)},n.write(e,l,i,a)},a)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(r=require.nodeRequire("fs"),n.get=function(e,t,i){try{var n=r.readFileSync(e,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),t(n)}catch(e){i&&i(e)}}):"xhr"===g.env||!g.env&&n.createXhr()?n.get=function(e,t,i,r){var a,s=n.createXhr();if(s.open("GET",e,!0),r)for(a in r)r.hasOwnProperty(a)&&s.setRequestHeader(a.toLowerCase(),r[a]);g.onXhr&&g.onXhr(s,e),s.onreadystatechange=function(n){var r,a;4===s.readyState&&(r=s.status||0,r>399&&r<600?(a=new Error(e+" HTTP status: "+r),a.xhr=s,i&&i(a)):t(s.responseText),g.onXhrComplete&&g.onXhrComplete(s,e))},s.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var i,n,r="utf-8",a=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),r)),l="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(s),i.append(n);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in a,n.get=function(e,t){var i,n,r,l={};o&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{i=a["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(r,1,0,!1),n=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),n.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),t(l.value)}catch(e){throw new Error((r&&r.path||"")+": "+e)}}),n}),define("json",["text"],function(text){var parseJSON=JSON&&JSON.parse?JSON.parse:function(val){return eval("("+val+")")};return{load:function(e,t,i,n){n.isBuild?i(""):t(["text!"+e],function(e){i(parseJSON(e))})},loadFromFileSystem:function(e,t){var i=nodeRequire("fs"),n=require.toUrl(t),r=i.readFileSync(n).toString();return r='define("'+e+"!"+t+'", function () {\nreturn '+r+";\n});\n"},write:function(e,t,i){i(this.loadFromFileSystem(e,t))}}}),define("json!cldr-data/supplemental/likelySubtags.json",function(){return{supplemental:{version:{_number:"$Revision: 12447 $",_unicodeVersion:"8.0.0",_cldrVersion:"29"},likelySubtags:{aa:"aa-Latn-ET",ab:"ab-Cyrl-GE",abr:"abr-Latn-GH",ace:"ace-Latn-ID",ach:"ach-Latn-UG",ada:"ada-Latn-GH",ady:"ady-Cyrl-RU",ae:"ae-Avst-IR",aeb:"aeb-Arab-TN",af:"af-Latn-ZA",agq:"agq-Latn-CM",aho:"aho-Ahom-IN",ak:"ak-Latn-GH",akk:"akk-Xsux-IQ",aln:"aln-Latn-XK",alt:"alt-Cyrl-RU",am:"am-Ethi-ET",amo:"amo-Latn-NG",aoz:"aoz-Latn-ID",ar:"ar-Arab-EG",arc:"arc-Armi-IR","arc-Nbat":"arc-Nbat-JO","arc-Palm":"arc-Palm-SY",arn:"arn-Latn-CL",aro:"aro-Latn-BO",arq:"arq-Arab-DZ",ary:"ary-Arab-MA",arz:"arz-Arab-EG",as:"as-Beng-IN",asa:"asa-Latn-TZ",ase:"ase-Sgnw-US",ast:"ast-Latn-ES",atj:"atj-Latn-CA",av:"av-Cyrl-RU",awa:"awa-Deva-IN",ay:"ay-Latn-BO",az:"az-Latn-AZ","az-Arab":"az-Arab-IR","az-IQ":"az-Arab-IQ","az-IR":"az-Arab-IR","az-RU":"az-Cyrl-RU",ba:"ba-Cyrl-RU",bal:"bal-Arab-PK",ban:"ban-Latn-ID",bap:"bap-Deva-NP",bar:"bar-Latn-AT",bas:"bas-Latn-CM",bax:"bax-Bamu-CM",bbc:"bbc-Latn-ID",bbj:"bbj-Latn-CM",bci:"bci-Latn-CI",be:"be-Cyrl-BY",bej:"bej-Arab-SD",bem:"bem-Latn-ZM",bew:"bew-Latn-ID",bez:"bez-Latn-TZ",bfd:"bfd-Latn-CM",bfq:"bfq-Taml-IN",bft:"bft-Arab-PK",bfy:"bfy-Deva-IN",bg:"bg-Cyrl-BG",bgc:"bgc-Deva-IN",bgn:"bgn-Arab-PK",bgx:"bgx-Grek-TR",bhb:"bhb-Deva-IN",bhi:"bhi-Deva-IN",bhk:"bhk-Latn-PH",bho:"bho-Deva-IN",bi:"bi-Latn-VU",bik:"bik-Latn-PH",bin:"bin-Latn-NG",bjj:"bjj-Deva-IN",bjn:"bjn-Latn-ID",bkm:"bkm-Latn-CM",bku:"bku-Latn-PH",blt:"blt-Tavt-VN",bm:"bm-Latn-ML",bmq:"bmq-Latn-ML",bn:"bn-Beng-BD",bo:"bo-Tibt-CN",bpy:"bpy-Beng-IN",bqi:"bqi-Arab-IR",bqv:"bqv-Latn-CI",br:"br-Latn-FR",bra:"bra-Deva-IN",brh:"brh-Arab-PK",brx:"brx-Deva-IN",bs:"bs-Latn-BA",bsq:"bsq-Bass-LR",bss:"bss-Latn-CM",bto:"bto-Latn-PH",btv:"btv-Deva-PK",bua:"bua-Cyrl-RU",buc:"buc-Latn-YT",bug:"bug-Latn-ID",bum:"bum-Latn-CM",bvb:"bvb-Latn-GQ",byn:"byn-Ethi-ER",byv:"byv-Latn-CM",bze:"bze-Latn-ML",ca:"ca-Latn-ES",cch:"cch-Latn-NG",ccp:"ccp-Beng-IN","ccp-Cakm":"ccp-Cakm-BD",ce:"ce-Cyrl-RU",ceb:"ceb-Latn-PH",cgg:"cgg-Latn-UG",ch:"ch-Latn-GU",chk:"chk-Latn-FM",chm:"chm-Cyrl-RU",cho:"cho-Latn-US",chp:"chp-Latn-CA",chr:"chr-Cher-US",cja:"cja-Arab-KH",cjm:"cjm-Cham-VN",ckb:"ckb-Arab-IQ",co:"co-Latn-FR",cop:"cop-Copt-EG",cps:"cps-Latn-PH",cr:"cr-Cans-CA",crj:"crj-Cans-CA",crk:"crk-Cans-CA",crl:"crl-Cans-CA",crm:"crm-Cans-CA",crs:"crs-Latn-SC",cs:"cs-Latn-CZ",csb:"csb-Latn-PL",csw:"csw-Cans-CA",ctd:"ctd-Pauc-MM",cu:"cu-Cyrl-RU","cu-Glag":"cu-Glag-BG",cv:"cv-Cyrl-RU",cy:"cy-Latn-GB",da:"da-Latn-DK",dak:"dak-Latn-US",dar:"dar-Cyrl-RU",dav:"dav-Latn-KE",dcc:"dcc-Arab-IN",de:"de-Latn-DE",den:"den-Latn-CA",dgr:"dgr-Latn-CA",dje:"dje-Latn-NE",dnj:"dnj-Latn-CI",doi:"doi-Arab-IN",dsb:"dsb-Latn-DE",dtm:"dtm-Latn-ML",dtp:"dtp-Latn-MY",dty:"dty-Deva-NP",dua:"dua-Latn-CM",dv:"dv-Thaa-MV",dyo:"dyo-Latn-SN",dyu:"dyu-Latn-BF",dz:"dz-Tibt-BT",ebu:"ebu-Latn-KE",ee:"ee-Latn-GH",efi:"efi-Latn-NG",egl:"egl-Latn-IT",egy:"egy-Egyp-EG",eky:"eky-Kali-MM",el:"el-Grek-GR",en:"en-Latn-US","en-Shaw":"en-Shaw-GB",eo:"eo-Latn-001",es:"es-Latn-ES",esu:"esu-Latn-US",et:"et-Latn-EE",ett:"ett-Ital-IT",eu:"eu-Latn-ES",ewo:"ewo-Latn-CM",ext:"ext-Latn-ES",fa:"fa-Arab-IR",fan:"fan-Latn-GQ",ff:"ff-Latn-SN","ff-Adlm":"ff-Adlm-GN",ffm:"ffm-Latn-ML",fi:"fi-Latn-FI",fia:"fia-Arab-SD",fil:"fil-Latn-PH",fit:"fit-Latn-SE",fj:"fj-Latn-FJ",fo:"fo-Latn-FO",fon:"fon-Latn-BJ",fr:"fr-Latn-FR",frc:"frc-Latn-US",frp:"frp-Latn-FR",frr:"frr-Latn-DE",frs:"frs-Latn-DE",fud:"fud-Latn-WF",fuq:"fuq-Latn-NE",fur:"fur-Latn-IT",fuv:"fuv-Latn-NG",fvr:"fvr-Latn-SD",fy:"fy-Latn-NL",ga:"ga-Latn-IE",gaa:"gaa-Latn-GH",gag:"gag-Latn-MD",gan:"gan-Hans-CN",gay:"gay-Latn-ID",gbm:"gbm-Deva-IN",gbz:"gbz-Arab-IR",gcr:"gcr-Latn-GF",gd:"gd-Latn-GB",gez:"gez-Ethi-ET",ggn:"ggn-Deva-NP",gil:"gil-Latn-KI",gjk:"gjk-Arab-PK",gju:"gju-Arab-PK",gl:"gl-Latn-ES",glk:"glk-Arab-IR",gn:"gn-Latn-PY",gom:"gom-Deva-IN",gon:"gon-Telu-IN",gor:"gor-Latn-ID",gos:"gos-Latn-NL",got:"got-Goth-UA",grc:"grc-Cprt-CY","grc-Linb":"grc-Linb-GR",grt:"grt-Beng-IN",gsw:"gsw-Latn-CH",gu:"gu-Gujr-IN",gub:"gub-Latn-BR",guc:"guc-Latn-CO",gur:"gur-Latn-GH",guz:"guz-Latn-KE",gv:"gv-Latn-IM",gvr:"gvr-Deva-NP",gwi:"gwi-Latn-CA",ha:"ha-Latn-NG","ha-CM":"ha-Arab-CM","ha-SD":"ha-Arab-SD",hak:"hak-Hans-CN",haw:"haw-Latn-US",haz:"haz-Arab-AF",he:"he-Hebr-IL",hi:"hi-Deva-IN",hif:"hif-Latn-FJ",hil:"hil-Latn-PH",hlu:"hlu-Hluw-TR",hmd:"hmd-Plrd-CN",hnd:"hnd-Arab-PK",hne:"hne-Deva-IN",hnj:"hnj-Hmng-LA",hnn:"hnn-Latn-PH",hno:"hno-Arab-PK",ho:"ho-Latn-PG",hoc:"hoc-Deva-IN",hoj:"hoj-Deva-IN",hr:"hr-Latn-HR",hsb:"hsb-Latn-DE",hsn:"hsn-Hans-CN",ht:"ht-Latn-HT",hu:"hu-Latn-HU",hy:"hy-Armn-AM",hz:"hz-Latn-NA",ia:"ia-Latn-FR",iba:"iba-Latn-MY",ibb:"ibb-Latn-NG",id:"id-Latn-ID",ig:"ig-Latn-NG",ii:"ii-Yiii-CN",ik:"ik-Latn-US",ikt:"ikt-Latn-CA",ilo:"ilo-Latn-PH",in:"in-Latn-ID",inh:"inh-Cyrl-RU",is:"is-Latn-IS",it:"it-Latn-IT",iu:"iu-Cans-CA",iw:"iw-Hebr-IL",izh:"izh-Latn-RU",ja:"ja-Jpan-JP",jam:"jam-Latn-JM",jgo:"jgo-Latn-CM",ji:"ji-Hebr-UA",jmc:"jmc-Latn-TZ",jml:"jml-Deva-NP",jut:"jut-Latn-DK",jv:"jv-Latn-ID",jw:"jw-Latn-ID",ka:"ka-Geor-GE",kaa:"kaa-Cyrl-UZ",kab:"kab-Latn-DZ",kac:"kac-Latn-MM",kaj:"kaj-Latn-NG",kam:"kam-Latn-KE",kao:"kao-Latn-ML",kbd:"kbd-Cyrl-RU",kcg:"kcg-Latn-NG",kck:"kck-Latn-ZW",kde:"kde-Latn-TZ",kdt:"kdt-Thai-TH",kea:"kea-Latn-CV",ken:"ken-Latn-CM",kfo:"kfo-Latn-CI",kfr:"kfr-Deva-IN",kfy:"kfy-Deva-IN",kg:"kg-Latn-CD",kge:"kge-Latn-ID",kgp:"kgp-Latn-BR",kha:"kha-Latn-IN",khb:"khb-Talu-CN",khn:"khn-Deva-IN",khq:"khq-Latn-ML",kht:"kht-Mymr-IN",khw:"khw-Arab-PK",ki:"ki-Latn-KE",kiu:"kiu-Latn-TR",kj:"kj-Latn-NA",kjg:"kjg-Laoo-LA",kk:"kk-Cyrl-KZ","kk-AF":"kk-Arab-AF","kk-Arab":"kk-Arab-CN","kk-CN":"kk-Arab-CN","kk-IR":"kk-Arab-IR","kk-MN":"kk-Arab-MN",kkj:"kkj-Latn-CM",kl:"kl-Latn-GL",kln:"kln-Latn-KE",km:"km-Khmr-KH",kmb:"kmb-Latn-AO",kn:"kn-Knda-IN",ko:"ko-Kore-KR",koi:"koi-Cyrl-RU",kok:"kok-Deva-IN",kos:"kos-Latn-FM",kpe:"kpe-Latn-LR",krc:"krc-Cyrl-RU",kri:"kri-Latn-SL",krj:"krj-Latn-PH",krl:"krl-Latn-RU",kru:"kru-Deva-IN",ks:"ks-Arab-IN",ksb:"ksb-Latn-TZ",ksf:"ksf-Latn-CM",ksh:"ksh-Latn-DE",ku:"ku-Latn-TR",
"ku-Arab":"ku-Arab-IQ","ku-LB":"ku-Arab-LB",kum:"kum-Cyrl-RU",kv:"kv-Cyrl-RU",kvr:"kvr-Latn-ID",kvx:"kvx-Arab-PK",kw:"kw-Latn-GB",kxm:"kxm-Thai-TH",kxp:"kxp-Arab-PK",ky:"ky-Cyrl-KG","ky-Arab":"ky-Arab-CN","ky-CN":"ky-Arab-CN","ky-Latn":"ky-Latn-TR","ky-TR":"ky-Latn-TR",la:"la-Latn-VA",lab:"lab-Lina-GR",lad:"lad-Hebr-IL",lag:"lag-Latn-TZ",lah:"lah-Arab-PK",laj:"laj-Latn-UG",lb:"lb-Latn-LU",lbe:"lbe-Cyrl-RU",lbw:"lbw-Latn-ID",lcp:"lcp-Thai-CN",lep:"lep-Lepc-IN",lez:"lez-Cyrl-RU",lg:"lg-Latn-UG",li:"li-Latn-NL",lif:"lif-Deva-NP","lif-Limb":"lif-Limb-IN",lij:"lij-Latn-IT",lis:"lis-Lisu-CN",ljp:"ljp-Latn-ID",lki:"lki-Arab-IR",lkt:"lkt-Latn-US",lmn:"lmn-Telu-IN",lmo:"lmo-Latn-IT",ln:"ln-Latn-CD",lo:"lo-Laoo-LA",lol:"lol-Latn-CD",loz:"loz-Latn-ZM",lrc:"lrc-Arab-IR",lt:"lt-Latn-LT",ltg:"ltg-Latn-LV",lu:"lu-Latn-CD",lua:"lua-Latn-CD",luo:"luo-Latn-KE",luy:"luy-Latn-KE",luz:"luz-Arab-IR",lv:"lv-Latn-LV",lwl:"lwl-Thai-TH",lzh:"lzh-Hans-CN",lzz:"lzz-Latn-TR",mad:"mad-Latn-ID",maf:"maf-Latn-CM",mag:"mag-Deva-IN",mai:"mai-Deva-IN",mak:"mak-Latn-ID",man:"man-Latn-GM","man-GN":"man-Nkoo-GN","man-Nkoo":"man-Nkoo-GN",mas:"mas-Latn-KE",maz:"maz-Latn-MX",mdf:"mdf-Cyrl-RU",mdh:"mdh-Latn-PH",mdr:"mdr-Latn-ID",men:"men-Latn-SL",mer:"mer-Latn-KE",mfa:"mfa-Arab-TH",mfe:"mfe-Latn-MU",mg:"mg-Latn-MG",mgh:"mgh-Latn-MZ",mgo:"mgo-Latn-CM",mgp:"mgp-Deva-NP",mgy:"mgy-Latn-TZ",mh:"mh-Latn-MH",mi:"mi-Latn-NZ",min:"min-Latn-ID",mis:"mis-Hatr-IQ",mk:"mk-Cyrl-MK",ml:"ml-Mlym-IN",mls:"mls-Latn-SD",mn:"mn-Cyrl-MN","mn-CN":"mn-Mong-CN","mn-Mong":"mn-Mong-CN",mni:"mni-Beng-IN",mnw:"mnw-Mymr-MM",moe:"moe-Latn-CA",moh:"moh-Latn-CA",mos:"mos-Latn-BF",mr:"mr-Deva-IN",mrd:"mrd-Deva-NP",mrj:"mrj-Cyrl-RU",mro:"mro-Mroo-BD",ms:"ms-Latn-MY","ms-CC":"ms-Arab-CC","ms-ID":"ms-Arab-ID",mt:"mt-Latn-MT",mtr:"mtr-Deva-IN",mua:"mua-Latn-CM",mus:"mus-Latn-US",mvy:"mvy-Arab-PK",mwk:"mwk-Latn-ML",mwr:"mwr-Deva-IN",mwv:"mwv-Latn-ID",mxc:"mxc-Latn-ZW",my:"my-Mymr-MM",myv:"myv-Cyrl-RU",myx:"myx-Latn-UG",myz:"myz-Mand-IR",mzn:"mzn-Arab-IR",na:"na-Latn-NR",nan:"nan-Hans-CN",nap:"nap-Latn-IT",naq:"naq-Latn-NA",nb:"nb-Latn-NO",nch:"nch-Latn-MX",nd:"nd-Latn-ZW",ndc:"ndc-Latn-MZ",nds:"nds-Latn-DE",ne:"ne-Deva-NP",new:"new-Deva-NP",ng:"ng-Latn-NA",ngl:"ngl-Latn-MZ",nhe:"nhe-Latn-MX",nhw:"nhw-Latn-MX",nij:"nij-Latn-ID",niu:"niu-Latn-NU",njo:"njo-Latn-IN",nl:"nl-Latn-NL",nmg:"nmg-Latn-CM",nn:"nn-Latn-NO",nnh:"nnh-Latn-CM",no:"no-Latn-NO",nod:"nod-Lana-TH",noe:"noe-Deva-IN",non:"non-Runr-SE",nqo:"nqo-Nkoo-GN",nr:"nr-Latn-ZA",nsk:"nsk-Cans-CA",nso:"nso-Latn-ZA",nus:"nus-Latn-SS",nv:"nv-Latn-US",nxq:"nxq-Latn-CN",ny:"ny-Latn-MW",nym:"nym-Latn-TZ",nyn:"nyn-Latn-UG",nzi:"nzi-Latn-GH",oc:"oc-Latn-FR",om:"om-Latn-ET",or:"or-Orya-IN",os:"os-Cyrl-GE",osa:"osa-Osge-US",otk:"otk-Orkh-MN",pa:"pa-Guru-IN","pa-Arab":"pa-Arab-PK","pa-PK":"pa-Arab-PK",pag:"pag-Latn-PH",pal:"pal-Phli-IR","pal-Phlp":"pal-Phlp-CN",pam:"pam-Latn-PH",pap:"pap-Latn-AW",pau:"pau-Latn-PW",pcd:"pcd-Latn-FR",pcm:"pcm-Latn-NG",pdc:"pdc-Latn-US",pdt:"pdt-Latn-CA",peo:"peo-Xpeo-IR",pfl:"pfl-Latn-DE",phn:"phn-Phnx-LB",pka:"pka-Brah-IN",pko:"pko-Latn-KE",pl:"pl-Latn-PL",pms:"pms-Latn-IT",pnt:"pnt-Grek-GR",pon:"pon-Latn-FM",pra:"pra-Khar-PK",prd:"prd-Arab-IR",prg:"prg-Latn-001",ps:"ps-Arab-AF",pt:"pt-Latn-BR",puu:"puu-Latn-GA",qu:"qu-Latn-PE",quc:"quc-Latn-GT",qug:"qug-Latn-EC",raj:"raj-Deva-IN",rcf:"rcf-Latn-RE",rej:"rej-Latn-ID",rgn:"rgn-Latn-IT",ria:"ria-Latn-IN",rif:"rif-Tfng-MA","rif-NL":"rif-Latn-NL",rjs:"rjs-Deva-NP",rkt:"rkt-Beng-BD",rm:"rm-Latn-CH",rmf:"rmf-Latn-FI",rmo:"rmo-Latn-CH",rmt:"rmt-Arab-IR",rmu:"rmu-Latn-SE",rn:"rn-Latn-BI",rng:"rng-Latn-MZ",ro:"ro-Latn-RO",rob:"rob-Latn-ID",rof:"rof-Latn-TZ",rtm:"rtm-Latn-FJ",ru:"ru-Cyrl-RU",rue:"rue-Cyrl-UA",rug:"rug-Latn-SB",rw:"rw-Latn-RW",rwk:"rwk-Latn-TZ",ryu:"ryu-Kana-JP",sa:"sa-Deva-IN",saf:"saf-Latn-GH",sah:"sah-Cyrl-RU",saq:"saq-Latn-KE",sas:"sas-Latn-ID",sat:"sat-Latn-IN",saz:"saz-Saur-IN",sbp:"sbp-Latn-TZ",sc:"sc-Latn-IT",sck:"sck-Deva-IN",scn:"scn-Latn-IT",sco:"sco-Latn-GB",scs:"scs-Latn-CA",sd:"sd-Arab-PK","sd-Deva":"sd-Deva-IN","sd-Khoj":"sd-Khoj-IN","sd-Sind":"sd-Sind-IN",sdc:"sdc-Latn-IT",sdh:"sdh-Arab-IR",se:"se-Latn-NO",sef:"sef-Latn-CI",seh:"seh-Latn-MZ",sei:"sei-Latn-MX",ses:"ses-Latn-ML",sg:"sg-Latn-CF",sga:"sga-Ogam-IE",sgs:"sgs-Latn-LT",shi:"shi-Tfng-MA",shn:"shn-Mymr-MM",si:"si-Sinh-LK",sid:"sid-Latn-ET",sk:"sk-Latn-SK",skr:"skr-Arab-PK",sl:"sl-Latn-SI",sli:"sli-Latn-PL",sly:"sly-Latn-ID",sm:"sm-Latn-WS",sma:"sma-Latn-SE",smj:"smj-Latn-SE",smn:"smn-Latn-FI",smp:"smp-Samr-IL",sms:"sms-Latn-FI",sn:"sn-Latn-ZW",snk:"snk-Latn-ML",so:"so-Latn-SO",sou:"sou-Thai-TH",sq:"sq-Latn-AL",sr:"sr-Cyrl-RS","sr-ME":"sr-Latn-ME","sr-RO":"sr-Latn-RO","sr-RU":"sr-Latn-RU","sr-TR":"sr-Latn-TR",srb:"srb-Sora-IN",srn:"srn-Latn-SR",srr:"srr-Latn-SN",srx:"srx-Deva-IN",ss:"ss-Latn-ZA",ssy:"ssy-Latn-ER",st:"st-Latn-ZA",stq:"stq-Latn-DE",su:"su-Latn-ID",suk:"suk-Latn-TZ",sus:"sus-Latn-GN",sv:"sv-Latn-SE",sw:"sw-Latn-TZ",swb:"swb-Arab-YT",swc:"swc-Latn-CD",swg:"swg-Latn-DE",swv:"swv-Deva-IN",sxn:"sxn-Latn-ID",syl:"syl-Beng-BD",syr:"syr-Syrc-IQ",szl:"szl-Latn-PL",ta:"ta-Taml-IN",taj:"taj-Deva-NP",tbw:"tbw-Latn-PH",tcy:"tcy-Knda-IN",tdd:"tdd-Tale-CN",tdg:"tdg-Deva-NP",tdh:"tdh-Deva-NP",te:"te-Telu-IN",tem:"tem-Latn-SL",teo:"teo-Latn-UG",tet:"tet-Latn-TL",tg:"tg-Cyrl-TJ","tg-Arab":"tg-Arab-PK","tg-PK":"tg-Arab-PK",th:"th-Thai-TH",thl:"thl-Deva-NP",thq:"thq-Deva-NP",thr:"thr-Deva-NP",ti:"ti-Ethi-ET",tig:"tig-Ethi-ER",tiv:"tiv-Latn-NG",tk:"tk-Latn-TM",tkl:"tkl-Latn-TK",tkr:"tkr-Latn-AZ",tkt:"tkt-Deva-NP",tl:"tl-Latn-PH",tly:"tly-Latn-AZ",tmh:"tmh-Latn-NE",tn:"tn-Latn-ZA",to:"to-Latn-TO",tog:"tog-Latn-MW",tpi:"tpi-Latn-PG",tr:"tr-Latn-TR",tru:"tru-Latn-TR",trv:"trv-Latn-TW",ts:"ts-Latn-ZA",tsd:"tsd-Grek-GR",tsf:"tsf-Deva-NP",tsg:"tsg-Latn-PH",tsj:"tsj-Tibt-BT",tt:"tt-Cyrl-RU",ttj:"ttj-Latn-UG",tts:"tts-Thai-TH",ttt:"ttt-Latn-AZ",tum:"tum-Latn-MW",tvl:"tvl-Latn-TV",twq:"twq-Latn-NE",txg:"txg-Tang-CN",ty:"ty-Latn-PF",tyv:"tyv-Cyrl-RU",tzm:"tzm-Latn-MA",udm:"udm-Cyrl-RU",ug:"ug-Arab-CN","ug-Cyrl":"ug-Cyrl-KZ","ug-KZ":"ug-Cyrl-KZ","ug-MN":"ug-Cyrl-MN",uga:"uga-Ugar-SY",uk:"uk-Cyrl-UA",uli:"uli-Latn-FM",umb:"umb-Latn-AO",und:"en-Latn-US","und-002":"en-Latn-NG","und-003":"en-Latn-US","und-005":"pt-Latn-BR","und-009":"en-Latn-AU","und-011":"en-Latn-NG","und-013":"es-Latn-MX","und-014":"sw-Latn-TZ","und-015":"ar-Arab-EG","und-017":"sw-Latn-CD","und-018":"en-Latn-ZA","und-019":"en-Latn-US","und-021":"en-Latn-US","und-029":"es-Latn-CU","und-030":"zh-Hans-CN","und-034":"hi-Deva-IN","und-035":"id-Latn-ID","und-039":"it-Latn-IT","und-053":"en-Latn-AU","und-054":"en-Latn-PG","und-057":"en-Latn-GU","und-061":"sm-Latn-WS","und-142":"zh-Hans-CN","und-143":"uz-Latn-UZ","und-145":"ar-Arab-SA","und-150":"ru-Cyrl-RU","und-151":"ru-Cyrl-RU","und-154":"en-Latn-GB","und-155":"de-Latn-DE","und-419":"es-Latn-419","und-AD":"ca-Latn-AD","und-Adlm":"ff-Adlm-GN","und-AE":"ar-Arab-AE","und-AF":"fa-Arab-AF","und-Aghb":"lez-Aghb-RU","und-Ahom":"aho-Ahom-IN","und-AL":"sq-Latn-AL","und-AM":"hy-Armn-AM","und-AO":"pt-Latn-AO","und-AQ":"und-Latn-AQ","und-AR":"es-Latn-AR","und-Arab":"ar-Arab-EG","und-Arab-CC":"ms-Arab-CC","und-Arab-CN":"ug-Arab-CN","und-Arab-GB":"ks-Arab-GB","und-Arab-ID":"ms-Arab-ID","und-Arab-IN":"ur-Arab-IN","und-Arab-KH":"cja-Arab-KH","und-Arab-MN":"kk-Arab-MN","und-Arab-MU":"ur-Arab-MU","und-Arab-NG":"ha-Arab-NG","und-Arab-PK":"ur-Arab-PK","und-Arab-TH":"mfa-Arab-TH","und-Arab-TJ":"fa-Arab-TJ","und-Arab-TR":"az-Arab-TR","und-Arab-YT":"swb-Arab-YT","und-Armi":"arc-Armi-IR","und-Armn":"hy-Armn-AM","und-AS":"sm-Latn-AS","und-AT":"de-Latn-AT","und-Avst":"ae-Avst-IR","und-AW":"nl-Latn-AW","und-AX":"sv-Latn-AX","und-AZ":"az-Latn-AZ","und-BA":"bs-Latn-BA","und-Bali":"ban-Bali-ID","und-Bamu":"bax-Bamu-CM","und-Bass":"bsq-Bass-LR","und-Batk":"bbc-Batk-ID","und-BD":"bn-Beng-BD","und-BE":"nl-Latn-BE","und-Beng":"bn-Beng-BD","und-BF":"fr-Latn-BF","und-BG":"bg-Cyrl-BG","und-BH":"ar-Arab-BH","und-Bhks":"sa-Bhks-IN","und-BI":"rn-Latn-BI","und-BJ":"fr-Latn-BJ","und-BL":"fr-Latn-BL","und-BN":"ms-Latn-BN","und-BO":"es-Latn-BO","und-Bopo":"zh-Bopo-TW","und-BQ":"pap-Latn-BQ","und-BR":"pt-Latn-BR","und-Brah":"pka-Brah-IN","und-Brai":"fr-Brai-FR","und-BT":"dz-Tibt-BT","und-Bugi":"bug-Bugi-ID","und-Buhd":"bku-Buhd-PH","und-BV":"und-Latn-BV","und-BY":"be-Cyrl-BY","und-Cakm":"ccp-Cakm-BD","und-Cans":"cr-Cans-CA","und-Cari":"xcr-Cari-TR","und-CD":"sw-Latn-CD","und-CF":"fr-Latn-CF","und-CG":"fr-Latn-CG","und-CH":"de-Latn-CH","und-Cham":"cjm-Cham-VN","und-Cher":"chr-Cher-US","und-CI":"fr-Latn-CI","und-CL":"es-Latn-CL","und-CM":"fr-Latn-CM","und-CN":"zh-Hans-CN","und-CO":"es-Latn-CO","und-Copt":"cop-Copt-EG","und-CP":"und-Latn-CP","und-Cprt":"grc-Cprt-CY","und-CR":"es-Latn-CR","und-CU":"es-Latn-CU","und-CV":"pt-Latn-CV","und-CW":"pap-Latn-CW","und-CY":"el-Grek-CY","und-Cyrl":"ru-Cyrl-RU","und-Cyrl-AL":"mk-Cyrl-AL","und-Cyrl-BA":"sr-Cyrl-BA","und-Cyrl-GE":"ab-Cyrl-GE","und-Cyrl-GR":"mk-Cyrl-GR","und-Cyrl-MD":"uk-Cyrl-MD","und-Cyrl-PL":"be-Cyrl-PL","und-Cyrl-RO":"bg-Cyrl-RO","und-Cyrl-SK":"uk-Cyrl-SK","und-Cyrl-TR":"kbd-Cyrl-TR","und-Cyrl-XK":"sr-Cyrl-XK","und-CZ":"cs-Latn-CZ","und-DE":"de-Latn-DE","und-Deva":"hi-Deva-IN","und-Deva-BT":"ne-Deva-BT","und-Deva-FJ":"hif-Deva-FJ","und-Deva-MU":"bho-Deva-MU","und-Deva-PK":"btv-Deva-PK","und-DJ":"aa-Latn-DJ","und-DK":"da-Latn-DK","und-DO":"es-Latn-DO","und-Dupl":"fr-Dupl-FR","und-DZ":"ar-Arab-DZ","und-EA":"es-Latn-EA","und-EC":"es-Latn-EC","und-EE":"et-Latn-EE","und-EG":"ar-Arab-EG","und-Egyp":"egy-Egyp-EG","und-EH":"ar-Arab-EH","und-Elba":"sq-Elba-AL","und-ER":"ti-Ethi-ER","und-ES":"es-Latn-ES","und-ET":"am-Ethi-ET","und-Ethi":"am-Ethi-ET","und-EU":"en-Latn-GB","und-FI":"fi-Latn-FI","und-FO":"fo-Latn-FO","und-FR":"fr-Latn-FR","und-GA":"fr-Latn-GA","und-GE":"ka-Geor-GE","und-Geor":"ka-Geor-GE","und-GF":"fr-Latn-GF","und-GH":"ak-Latn-GH","und-GL":"kl-Latn-GL","und-Glag":"cu-Glag-BG","und-GN":"fr-Latn-GN","und-Goth":"got-Goth-UA","und-GP":"fr-Latn-GP","und-GQ":"es-Latn-GQ","und-GR":"el-Grek-GR","und-Gran":"sa-Gran-IN","und-Grek":"el-Grek-GR","und-Grek-TR":"bgx-Grek-TR","und-GS":"und-Latn-GS","und-GT":"es-Latn-GT","und-Gujr":"gu-Gujr-IN","und-Guru":"pa-Guru-IN","und-GW":"pt-Latn-GW","und-Hanb":"zh-Hanb-TW","und-Hang":"ko-Hang-KR","und-Hani":"zh-Hani-CN","und-Hano":"hnn-Hano-PH","und-Hans":"zh-Hans-CN","und-Hant":"zh-Hant-TW","und-Hant-CN":"yue-Hant-CN","und-Hatr":"mis-Hatr-IQ","und-Hebr":"he-Hebr-IL","und-Hebr-CA":"yi-Hebr-CA","und-Hebr-GB":"yi-Hebr-GB","und-Hebr-SE":"yi-Hebr-SE","und-Hebr-UA":"yi-Hebr-UA","und-Hebr-US":"yi-Hebr-US","und-Hira":"ja-Hira-JP","und-HK":"zh-Hant-HK","und-Hluw":"hlu-Hluw-TR","und-HM":"und-Latn-HM","und-Hmng":"hnj-Hmng-LA","und-HN":"es-Latn-HN","und-HR":"hr-Latn-HR","und-HT":"ht-Latn-HT","und-HU":"hu-Latn-HU","und-Hung":"hu-Hung-HU","und-IC":"es-Latn-IC","und-ID":"id-Latn-ID","und-IL":"he-Hebr-IL","und-IN":"hi-Deva-IN","und-IQ":"ar-Arab-IQ","und-IR":"fa-Arab-IR","und-IS":"is-Latn-IS","und-IT":"it-Latn-IT","und-Ital":"ett-Ital-IT","und-Jamo":"ko-Jamo-KR","und-Java":"jv-Java-ID","und-JO":"ar-Arab-JO","und-JP":"ja-Jpan-JP","und-Jpan":"ja-Jpan-JP","und-Kali":"eky-Kali-MM","und-Kana":"ja-Kana-JP","und-KE":"sw-Latn-KE","und-KG":"ky-Cyrl-KG","und-KH":"km-Khmr-KH","und-Khar":"pra-Khar-PK","und-Khmr":"km-Khmr-KH","und-Khoj":"sd-Khoj-IN","und-KM":"ar-Arab-KM","und-Knda":"kn-Knda-IN","und-Kore":"ko-Kore-KR","und-KP":"ko-Kore-KP","und-KR":"ko-Kore-KR","und-Kthi":"bho-Kthi-IN","und-KW":"ar-Arab-KW","und-KZ":"ru-Cyrl-KZ","und-LA":"lo-Laoo-LA","und-Lana":"nod-Lana-TH","und-Laoo":"lo-Laoo-LA","und-Latn-AF":"tk-Latn-AF","und-Latn-AM":"ku-Latn-AM","und-Latn-CN":"za-Latn-CN","und-Latn-CY":"tr-Latn-CY","und-Latn-DZ":"fr-Latn-DZ","und-Latn-ET":"en-Latn-ET","und-Latn-GE":"ku-Latn-GE","und-Latn-IR":"tk-Latn-IR","und-Latn-KM":"fr-Latn-KM","und-Latn-MA":"fr-Latn-MA","und-Latn-MK":"sq-Latn-MK","und-Latn-MM":"kac-Latn-MM","und-Latn-MO":"pt-Latn-MO","und-Latn-MR":"fr-Latn-MR","und-Latn-RU":"krl-Latn-RU","und-Latn-SY":"fr-Latn-SY","und-Latn-TN":"fr-Latn-TN","und-Latn-TW":"trv-Latn-TW","und-Latn-UA":"pl-Latn-UA","und-LB":"ar-Arab-LB","und-Lepc":"lep-Lepc-IN","und-LI":"de-Latn-LI","und-Limb":"lif-Limb-IN","und-Lina":"lab-Lina-GR","und-Linb":"grc-Linb-GR","und-Lisu":"lis-Lisu-CN","und-LK":"si-Sinh-LK","und-LS":"st-Latn-LS","und-LT":"lt-Latn-LT","und-LU":"fr-Latn-LU","und-LV":"lv-Latn-LV","und-LY":"ar-Arab-LY","und-Lyci":"xlc-Lyci-TR","und-Lydi":"xld-Lydi-TR","und-MA":"ar-Arab-MA","und-Mahj":"hi-Mahj-IN","und-Mand":"myz-Mand-IR","und-Mani":"xmn-Mani-CN","und-Marc":"bo-Marc-CN","und-MC":"fr-Latn-MC","und-MD":"ro-Latn-MD","und-ME":"sr-Latn-ME","und-Mend":"men-Mend-SL","und-Merc":"xmr-Merc-SD","und-Mero":"xmr-Mero-SD","und-MF":"fr-Latn-MF","und-MG":"mg-Latn-MG","und-MK":"mk-Cyrl-MK","und-ML":"bm-Latn-ML","und-Mlym":"ml-Mlym-IN","und-MM":"my-Mymr-MM","und-MN":"mn-Cyrl-MN","und-MO":"zh-Hant-MO","und-Modi":"mr-Modi-IN","und-Mong":"mn-Mong-CN","und-MQ":"fr-Latn-MQ","und-MR":"ar-Arab-MR","und-Mroo":"mro-Mroo-BD","und-MT":"mt-Latn-MT","und-Mtei":"mni-Mtei-IN","und-MU":"mfe-Latn-MU","und-Mult":"skr-Mult-PK","und-MV":"dv-Thaa-MV","und-MX":"es-Latn-MX","und-MY":"ms-Latn-MY","und-Mymr":"my-Mymr-MM","und-Mymr-IN":"kht-Mymr-IN","und-Mymr-TH":"mnw-Mymr-TH","und-MZ":"pt-Latn-MZ","und-NA":"af-Latn-NA","und-Narb":"xna-Narb-SA","und-Nbat":"arc-Nbat-JO","und-NC":"fr-Latn-NC","und-NE":"ha-Latn-NE","und-Newa":"new-Newa-NP","und-NI":"es-Latn-NI","und-Nkoo":"man-Nkoo-GN","und-NL":"nl-Latn-NL","und-NO":"nb-Latn-NO","und-NP":"ne-Deva-NP","und-Ogam":"sga-Ogam-IE","und-Olck":"sat-Olck-IN","und-OM":"ar-Arab-OM","und-Orkh":"otk-Orkh-MN","und-Orya":"or-Orya-IN","und-Osge":"osa-Osge-US","und-Osma":"so-Osma-SO","und-PA":"es-Latn-PA","und-Palm":"arc-Palm-SY","und-Pauc":"ctd-Pauc-MM","und-PE":"es-Latn-PE","und-Perm":"kv-Perm-RU","und-PF":"fr-Latn-PF","und-PG":"tpi-Latn-PG","und-PH":"fil-Latn-PH","und-Phag":"lzh-Phag-CN","und-Phli":"pal-Phli-IR","und-Phlp":"pal-Phlp-CN","und-Phnx":"phn-Phnx-LB","und-PK":"ur-Arab-PK","und-PL":"pl-Latn-PL","und-Plrd":"hmd-Plrd-CN","und-PM":"fr-Latn-PM","und-PR":"es-Latn-PR","und-Prti":"xpr-Prti-IR","und-PS":"ar-Arab-PS","und-PT":"pt-Latn-PT","und-PW":"pau-Latn-PW","und-PY":"gn-Latn-PY","und-QA":"ar-Arab-QA","und-QO":"en-Latn-IO","und-RE":"fr-Latn-RE","und-Rjng":"rej-Rjng-ID","und-RO":"ro-Latn-RO","und-RS":"sr-Cyrl-RS","und-RU":"ru-Cyrl-RU","und-Runr":"non-Runr-SE","und-RW":"rw-Latn-RW","und-SA":"ar-Arab-SA","und-Samr":"smp-Samr-IL","und-Sarb":"xsa-Sarb-YE","und-Saur":"saz-Saur-IN","und-SC":"fr-Latn-SC","und-SD":"ar-Arab-SD","und-SE":"sv-Latn-SE","und-Sgnw":"ase-Sgnw-US","und-Shaw":"en-Shaw-GB","und-Shrd":"sa-Shrd-IN","und-SI":"sl-Latn-SI","und-Sidd":"sa-Sidd-IN","und-Sind":"sd-Sind-IN","und-Sinh":"si-Sinh-LK","und-SJ":"nb-Latn-SJ","und-SK":"sk-Latn-SK","und-SM":"it-Latn-SM","und-SN":"fr-Latn-SN","und-SO":"so-Latn-SO","und-Sora":"srb-Sora-IN","und-SR":"nl-Latn-SR","und-ST":"pt-Latn-ST","und-Sund":"su-Sund-ID","und-SV":"es-Latn-SV","und-SY":"ar-Arab-SY","und-Sylo":"syl-Sylo-BD","und-Syrc":"syr-Syrc-IQ","und-Tagb":"tbw-Tagb-PH","und-Takr":"doi-Takr-IN","und-Tale":"tdd-Tale-CN","und-Talu":"khb-Talu-CN","und-Taml":"ta-Taml-IN","und-Tang":"txg-Tang-CN","und-Tavt":"blt-Tavt-VN","und-TD":"fr-Latn-TD","und-Telu":"te-Telu-IN","und-TF":"fr-Latn-TF","und-Tfng":"zgh-Tfng-MA","und-TG":"fr-Latn-TG","und-Tglg":"fil-Tglg-PH","und-TH":"th-Thai-TH","und-Thaa":"dv-Thaa-MV","und-Thai":"th-Thai-TH","und-Thai-CN":"lcp-Thai-CN","und-Thai-KH":"kdt-Thai-KH","und-Thai-LA":"kdt-Thai-LA","und-Tibt":"bo-Tibt-CN","und-Tirh":"mai-Tirh-IN","und-TJ":"tg-Cyrl-TJ","und-TK":"tkl-Latn-TK","und-TL":"pt-Latn-TL","und-TM":"tk-Latn-TM","und-TN":"ar-Arab-TN","und-TO":"to-Latn-TO","und-TR":"tr-Latn-TR","und-TV":"tvl-Latn-TV","und-TW":"zh-Hant-TW","und-TZ":"sw-Latn-TZ","und-UA":"uk-Cyrl-UA","und-UG":"sw-Latn-UG","und-Ugar":"uga-Ugar-SY","und-UY":"es-Latn-UY","und-UZ":"uz-Latn-UZ","und-VA":"it-Latn-VA","und-Vaii":"vai-Vaii-LR","und-VE":"es-Latn-VE","und-VN":"vi-Latn-VN","und-VU":"bi-Latn-VU","und-Wara":"hoc-Wara-IN","und-WF":"fr-Latn-WF","und-WS":"sm-Latn-WS","und-XK":"sq-Latn-XK","und-Xpeo":"peo-Xpeo-IR","und-Xsux":"akk-Xsux-IQ","und-YE":"ar-Arab-YE","und-Yiii":"ii-Yiii-CN","und-YT":"fr-Latn-YT","und-ZW":"sn-Latn-ZW",unr:"unr-Beng-IN","unr-Deva":"unr-Deva-NP","unr-NP":"unr-Deva-NP",unx:"unx-Beng-IN",ur:"ur-Arab-PK",uz:"uz-Latn-UZ","uz-AF":"uz-Arab-AF","uz-Arab":"uz-Arab-AF","uz-CN":"uz-Cyrl-CN",vai:"vai-Vaii-LR",ve:"ve-Latn-ZA",vec:"vec-Latn-IT",vep:"vep-Latn-RU",vi:"vi-Latn-VN",vic:"vic-Latn-SX",vls:"vls-Latn-BE",vmf:"vmf-Latn-DE",vmw:"vmw-Latn-MZ",vo:"vo-Latn-001",vot:"vot-Latn-RU",vro:"vro-Latn-EE",vun:"vun-Latn-TZ",wa:"wa-Latn-BE",wae:"wae-Latn-CH",wal:"wal-Ethi-ET",war:"war-Latn-PH",wbp:"wbp-Latn-AU",wbq:"wbq-Telu-IN",wbr:"wbr-Deva-IN",wls:"wls-Latn-WF",wni:"wni-Arab-KM",wo:"wo-Latn-SN",wtm:"wtm-Deva-IN",wuu:"wuu-Hans-CN",xav:"xav-Latn-BR",xcr:"xcr-Cari-TR",xh:"xh-Latn-ZA",xlc:"xlc-Lyci-TR",xld:"xld-Lydi-TR",xmf:"xmf-Geor-GE",xmn:"xmn-Mani-CN",xmr:"xmr-Merc-SD",xna:"xna-Narb-SA",xnr:"xnr-Deva-IN",xog:"xog-Latn-UG",xpr:"xpr-Prti-IR",xsa:"xsa-Sarb-YE",xsr:"xsr-Deva-NP",yao:"yao-Latn-MZ",yap:"yap-Latn-FM",yav:"yav-Latn-CM",ybb:"ybb-Latn-CM",yi:"yi-Hebr-001",yo:"yo-Latn-NG",yrl:"yrl-Latn-BR",yua:"yua-Latn-MX",yue:"yue-Hant-HK","yue-CN":"yue-Hans-CN","yue-Hans":"yue-Hans-CN",za:"za-Latn-CN",zag:"zag-Latn-SD",zdj:"zdj-Arab-KM",zea:"zea-Latn-NL",zgh:"zgh-Tfng-MA",zh:"zh-Hans-CN","zh-AU":"zh-Hant-AU","zh-BN":"zh-Hant-BN","zh-Bopo":"zh-Bopo-TW","zh-GB":"zh-Hant-GB","zh-GF":"zh-Hant-GF","zh-Hanb":"zh-Hanb-TW","zh-Hant":"zh-Hant-TW","zh-HK":"zh-Hant-HK","zh-ID":"zh-Hant-ID","zh-MO":"zh-Hant-MO","zh-MY":"zh-Hant-MY","zh-PA":"zh-Hant-PA","zh-PF":"zh-Hant-PF","zh-PH":"zh-Hant-PH","zh-SR":"zh-Hant-SR","zh-TH":"zh-Hant-TH","zh-TW":"zh-Hant-TW","zh-US":"zh-Hant-US","zh-VN":"zh-Hant-VN",zmi:"zmi-Latn-MY",zu:"zu-Latn-ZA",zza:"zza-Latn-TR"}}}}),define("json!ev-script/i18n/messages.json",function(){return{root:{"{0} Embed Options":"{0} Embed Options","{0} thumbnail image":"{0} thumbnail image","Add {0}":"Add {0}","Add file":"Add file",Annotations:"Annotations","An unexpected error occurred.  Check the server log for more details.":"An unexpected error occurred.  Check the server log for more details.",Ascending:"Ascending",Attachments:"Attachments","Audio Preview Image":"Audio Preview Image","Auto Play":"Auto Play","Auto Play (PC Only)":"Auto Play (PC Only)",Cancel:"Cancel","Cancel upload":"Cancel upload","Caption Search":"Caption Search",'Captions "On" By Default':'Captions "On" By Default',Category:"Category","Category List":"Category List",CC:"CC","Change {0}":"Change {0}","Choose {0}":"Choose {0}",Choose:"Choose","Choose Layout":"Choose Layout",Close:"Close","Content Details":"Content Details","Could not find requested resource.  This is likely a problem with the configured Ensemble Video base url.":"Could not find requested resource.  This is likely a problem with the configured Ensemble Video base url.",Credits:"Credits","Date Added":"Date Added","Date Produced":"Date Produced",Descending:"Descending",Description:"Description","Download Link":"Download Link","Drag file here.":"Drag file here.",Duration:"Duration","Embed Code":"Embed Code","Ensemble Logo":"Ensemble Logo","Ensemble Video Login":"Ensemble Video Login",Go:"Go","Hide Controls":"Hide Controls",Hide:"Hide","Hide Picker":"Hide Picker",Horizontal:"Horizontal","Identity Provider":"Identity Provider","It appears there is an issue with the Ensemble Video installation.":"It appears there is an issue with the Ensemble Video installation.",Keywords:"Keywords","Layout Options":"Layout Options",Less:"Less","Library:":"Library:",Library:"Library",Links:"Links","Loading...":"Loading...","Logout {0}":"Logout {0}",Logout:"Logout","Media Library":"Media Library",Media:"Media","Media thumbnail":"Media thumbnail","Meta Data":"Meta Data",More:"More",None:"None","No results available.":"No results available.","Number of Results":"Number of Results","Organization:":"Organization:",Original:"Original",Password:"Password",Playlist:"Playlist","Preview: {0}":"Preview: {0}","Preview:":"Preview:",Record:"Record",Reload:"Reload","Remember Me":"Remember Me","Remove {0}":"Remove {0}",Save:"Save","Search Media":"Search Media","Search returned {0} results.":"Search returned {0} results.","Search:":"Search:","Search String":"Search String","Select Library":"Select Library","Select Library Type":"Select Library Type","Select Organization":"Select Organization","Shared Library":"Shared Library","Show Captions":"Show Captions",Showcase:"Showcase","Show Title":"Show Title",Size:"Size","Social Tools":"Social Tools","Sort By":"Sort By",Statistics:"Statistics",Submit:"Submit",Title:"Title","Type:":"Type:","Upload Media to Ensemble":"Upload Media to Ensemble",Upload:"Upload",Username:"Username",Vertical:"Vertical","You are unauthorized to access this content.":"You are unauthorized to access this content."},"en-US":{},"es-MX":{"{0} Embed Options":"MX-{0} Embed Options","{0} thumbnail image":"MX-{0} thumbnail image","Add {0}":"Aadir {0}","Add file":"Aadir archivo",Annotations:"Anotaciones","An unexpected error occurred.  Check the server log for more details.":"MX-An unexpected error occurred.  Check the server log for more details.",Ascending:"Ascendiendo",Attachments:"Adjuntos","Audio Preview Image":"Prevista del Audio","Auto Play":"Auto Play","Auto Play (PC Only)":"Auto Play (Solo PC)",Cancel:"Cancelar","Cancel upload":"Cancelar cargado","Caption Search":"Bsqueda de Subtitulos",'Captions "On" By Default':'Subtitulos "Encendido" por Defecto',"Category List":"Lista de Categora",Category:"Categora",CC:"CC","Change {0}":"Cambiar {0}","Choose {0}":"Seleccione {0}","Choose Layout":"Seleccione Diseo",Choose:"Seleccione",Close:"Cerrar","Content Details":"Detalles del Contenido","Could not find requested resource.  This is likely a problem with the configured Ensemble Video base url.":"MX-Could not find requested resource.  This is likely a problem with the configured Ensemble Video base url.",Credits:"Crditos","Date Added":"Fecha Aadida","Date Produced":"Fecha de Produccin",Descending:"Descendiente",Description:"Descripcin","Download Link":"Enlace de descarga","Drag file here.":"Arrastre aqu el archivo.",Duration:"Duracin","Embed Code":"Incrustar Cdigo","Ensemble Logo":"MX-Ensemble Logo","Ensemble Video Login":"MX-Ensemble Video Login",Go:"MX-Go","Hide Controls":"Ocultar Controles",Hide:"Ocultar","Hide Picker":"Ocultar Picker",Horizontal:"Horizontal","Identity Provider":"Proveedor de Identidad","It appears there is an issue with the Ensemble Video installation.":"MX-It appears there is an issue with the Ensemble Video installation.",Keywords:"Palabras Clave","Layout Options":"MX-Layout Options",Less:"MX-Less","Library:":"Biblioteca:",Library:"Biblioteca",Links:"Enlaces","Loading...":"Cargando...","Logout {0}":"Cerrar sesin {0}",Logout:"Cerrar sesin","Media Library":"Biblioteca de Medios",Media:"Medios","Media thumbnail":"MX-Media thumbnail","Meta Data":"Meta Datos",More:"Ms",None:"Ninguno","No results available.":"MX-No results available.","Number of Results":"Nmero de Resultados","Organization:":"Organizacin:",Original:"Original",Password:"Contrasea",Playlist:"Playlist","Preview: {0}":"Prevista: {0}","Preview:":"Prevista:",Record:"Grabar",Reload:"MX-Reload","Remember Me":"Recuerdame","Remove {0}":"Eliminar {0}",Save:"Guardar","Search Media":"Buscar Medios","Search:":"Buscar:","Search returned {0} results.":"MX-Search returned {0} results.","Search String":"Buscar Cadena de Texto","Select Library":"Seleccionar Biblioteca","Select Library Type":"Seleccionar Tipo de Biblioteca","Select Organization":"Seleccionar Organizacin","Shared Library":"Biblioteca Compartida","Show Captions":"MX-Show Captions",Showcase:"Escaparate","Show Title":"Mostrar Ttulo",Size:"Tamao","Social Tools":"Herramientas Sociales","Sort By":"Ordenar Por",Statistics:"Estadsticas",Submit:"Enviar",Title:"Ttulo","Type:":"Tipo:","Upload Media to Ensemble":"MX-Upload Media to Ensemble",Upload:"Cargar",Username:"Nombre de Usuario",Vertical:"Vertical","You are unauthorized to access this content.":"MX-You are unauthorized to access this content."}}}),define("ev-script/models/video-settings",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{type:"video",width:"640",height:"360",showtitle:!0,autoplay:!1,showcaptions:!1,hidecontrols:!1,socialsharing:!1,annotations:!0,captionsearch:!0,attachments:!0,audiopreviewimage:!1,links:!0,metadata:!0,dateproduced:!0,embedcode:!1,download:!1,search:"",sourceId:"content",isaudio:!1}})}),define("ev-script/models/playlist-settings",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{type:"playlist",width:"800",height:"1000",layout:"playlist",playlistLayout:{playlistSortBy:"videoDate",playlistSortDirection:"desc",playlistSearchString:"",playlistCategory:"",playlistNumberOfResults:""},showcaseLayout:{categoryList:!0,categoryOrientation:"horizontal"},embedcode:!1,statistics:!0,duration:!0,attachments:!0,annotations:!0,links:!0,credits:!0,socialsharing:!1,autoplay:!1,showcaptions:!1,dateproduced:!0,audiopreviewimage:!1,captionsearch:!0,search:""}})}),define("ev-script/util/events",["require","underscore","backbone"],function(e){"use strict";var t=[],i=e("underscore"),n=e("backbone");return t.global=i.extend({},n.Events),{initEvents:function(e){return t[e]=i.extend({},n.Events)},getEvents:function(e){var i;return i=e?t[e]:t.global}}}),define("ev-script/util/cache",["require","jquery","underscore","backbone"],function(e){"use strict";var t=(e("jquery"),e("underscore"),e("backbone"),function(){return this.cache=[],this.get=function(e){return e?this.cache[e]:null},this.set=function(e,t){return e?this.cache[e]=t:null},this}),i=new t,n=function(e){var n=i.get(e);return n||(n=i.set(e,new t)),n},r=function(e,t){return n(e).set("config",t)},a=function(e){return n(e).get("config")},s=function(e,t){return n(e).set("auth",t)},o=function(e){return n(e).get("auth")},l=function(e,t){return n(e).set("info",t)},c=function(e){return n(e).get("info")},u=function(e,n){var r=i.get(e);r||(r=i.set(e,new t));var a=r.get(n);return a||(a=r.set(n,new t)),a};return{Cache:t,caches:i,setAppConfig:r,getAppConfig:a,setAppAuth:s,getAppAuth:o,setAppInfo:l,getAppInfo:c,getUserCache:u}}),define("ev-script/views/base",["require","jquery","underscore","backbone","globalize","ev-script/util/events","ev-script/util/cache"],function(e){"use strict";var t=e("jquery"),i=(e("underscore"),e("backbone")),n=e("globalize"),r=e("ev-script/util/events"),a=e("ev-script/util/cache");return i.View.extend({initialize:function(e){this.appId=e.appId,this.config=a.getAppConfig(this.appId),this.auth=a.getAppAuth(this.appId),this.info=a.getAppInfo(this.appId),this.appEvents=r.getEvents(this.appId),this.globalEvents=r.getEvents("global")},ajaxError:function(e,t){401===e.status?this.auth.handleUnauthorized(this.el,t):500===e.status?window.alert(n.formatMessage("It appears there is an issue with the Ensemble Video installation.")):404===e.status?window.alert(n.formatMessage("Could not find requested resource.  This is likely a problem with the configured Ensemble Video base url.")):0!==e.status&&window.alert(n.formatMessage("An unexpected error occurred.  Check the server log for more details."))},unencode:function(e){return t("<span/>").html(e).text()}})}),function(){"use strict";function e(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function t(e,t,i){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&i&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&i&&(e=e.replace(RegExp(t,"i"),i)),e=n(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function i(e,t){var i=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=v)for(;++i<n;)t(e[i],i,e);else r(e,t)}function n(t){return t=c(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:e(t)}function r(e,t){for(var i in e)L.call(e,i)&&t(e[i],i,e)}function a(t){return null==t?e(t):k.call(t).slice(8,-1)}function s(e,t){var i=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(i)||"object"==i&&!e[t])}function o(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function l(e,t){var n=null;return i(e,function(i,r){n=t(n,i,r,e)}),n}function c(e){return String(e).replace(/^ +| +$/g,"")}function u(e){function i(t){return l(t,function(t,i){return t||RegExp("\\b"+(i.pattern||o(i))+"\\b","i").exec(e)&&(i.label||i)})}function d(t){return l(t,function(t,i,n){return t||(i[Z]||i[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Z)]||RegExp("\\b"+o(n)+"(?:\\b|\\w*\\d)","i").exec(e))&&n})}function f(t){return l(t,function(t,i){return t||RegExp("\\b"+(i.pattern||o(i))+"\\b","i").exec(e)&&(i.label||i)})}function m(i){return l(i,function(i,n){var r=n.pattern||o(n);return!i&&(i=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(i=t(i,r,n.label||n)),i})}function g(t){return l(t,function(t,i){var r=i.pattern||o(i);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(i.label&&!RegExp(r,"i").test(i.label)?i.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),i=i.label||i,t=n(t[0].replace(RegExp(r,"i"),i).replace(RegExp("; *(?:"+i+"[_-])?","i")," ").replace(RegExp("("+i+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function v(t){return l(t,function(t,i){return t||(RegExp(i+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function w(){return this.description||""}var L=h,x=e&&"object"==typeof e&&"String"!=a(e);x&&(L=e,e=null);var C=L.navigator||{},S=C.userAgent||"";e||(e=S);var M,I,A=x||y==p,z=x?!!C.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(k.toString()),E="Object",P=x?E:"ScriptBridgingProxyObject",T=x?E:"Environment",N=x&&L.java?"JavaPackage":a(L.java),j=x?E:"RuntimeObject",D=/\bJava/.test(N)&&L.java,R=D&&a(L.environment)==T,_=D?"a":"",O=D?"b":"",G=L.document||{},H=L.operamini||L.opera,U=b.test(U=x&&H?H["[[Class]]"]:a(H))?U:H=null,$=e,q=[],B=null,F=e==S,V=F&&H&&"function"==typeof H.version&&H.version(),W=i([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),K=f(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Z=g([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"
},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),X=d({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),J=m(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(W&&(W=[W]),X&&!Z&&(Z=g([X])),(M=/\bGoogle TV\b/.exec(Z))&&(Z=M[0]),/\bSimulator\b/i.test(e)&&(Z=(Z?Z+" ":"")+"Simulator"),"Opera Mini"==K&&/\bOPiOS\b/.test(e)&&q.push("running in Turbo/Uncompressed mode"),"IE"==K&&/\blike iPhone OS\b/.test(e)?(M=u(e.replace(/like iPhone OS/,"")),X=M.manufacturer,Z=M.product):/^iP/.test(Z)?(K||(K="Safari"),J="iOS"+((M=/ OS ([\d_]+)/i.exec(e))?" "+M[1].replace(/_/g,"."):"")):"Konqueror"!=K||/buntu/i.test(J)?X&&"Google"!=X&&(/Chrome/.test(K)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(Z))||/\bAndroid\b/.test(J)&&/^Chrome/.test(K)&&/\bVersion\//i.test(e)?(K="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):"Silk"==K?(/\bMobi/i.test(e)||(J="Android",q.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&q.unshift("accelerated")):"PaleMoon"==K&&(M=/\bFirefox\/([\d.]+)\b/.exec(e))?q.push("identifying as Firefox "+M[1]):"Firefox"==K&&(M=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(J||(J="Firefox OS"),Z||(Z=M[1])):!K||(M=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(K))?(K&&!Z&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(M+"/")+8))&&(K=null),(M=Z||X||J)&&(Z||X||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(K=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:M)+" Browser")):"Electron"==K&&(M=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&q.push("Chromium "+M):J="Kubuntu",V||(V=v(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",o(K),"(?:Firefox|Minefield|NetFront)"])),(M="iCab"==W&&parseFloat(V)>3&&"WebKit"||/\bOpera\b/.test(K)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(W)&&"WebKit"||!W&&/\bMSIE\b/i.test(e)&&("Mac OS"==J?"Tasman":"Trident")||"WebKit"==W&&/\bPlayStation\b(?! Vita\b)/i.test(K)&&"NetFront")&&(W=[M]),"IE"==K&&(M=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(K+=" Mobile",J="Windows Phone "+(/\+$/.test(M)?M:M+".x"),q.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(K="IE Mobile",J="Windows Phone 8.x",q.unshift("desktop mode"),V||(V=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=K&&"Trident"==W&&(M=/\brv:([\d.]+)/.exec(e))&&(K&&q.push("identifying as "+K+(V?" "+V:"")),K="IE",V=M[1]),F){if(s(L,"global"))if(D&&(M=D.lang.System,$=M.getProperty("os.arch"),J=J||M.getProperty("os.name")+" "+M.getProperty("os.version")),A&&s(L,"system")&&(M=[L.system])[0]){J||(J=M[0].os||null);try{M[1]=L.require("ringo/engine").version,V=M[1].join("."),K="RingoJS"}catch(e){M[0].global.system==L.system&&(K="Narwhal")}}else"object"==typeof L.process&&!L.process.browser&&(M=L.process)?"object"==typeof M.versions?"string"==typeof M.versions.electron?(q.push("Node "+M.versions.node),K="Electron",V=M.versions.electron):"string"==typeof M.versions.nw&&(q.push("Chromium "+V,"Node "+M.versions.node),K="NW.js",V=M.versions.nw):(K="Node.js",$=M.arch,J=M.platform,V=/[\d.]+/.exec(M.version),V=V?V[0]:"unknown"):R&&(K="Rhino");else a(M=L.runtime)==P?(K="Adobe AIR",J=M.flash.system.Capabilities.os):a(M=L.phantom)==j?(K="PhantomJS",V=(M=M.version||null)&&M.major+"."+M.minor+"."+M.patch):"number"==typeof G.documentMode&&(M=/\bTrident\/(\d+)/i.exec(e))?(V=[V,G.documentMode],(M=+M[1]+4)!=V[1]&&(q.push("IE "+V[1]+" mode"),W&&(W[1]=""),V[1]=M),V="IE"==K?String(V[1].toFixed(1)):V[0]):"number"==typeof G.documentMode&&/^(?:Chrome|Firefox)\b/.test(K)&&(q.push("masking as "+K+" "+V),K="IE",V="11.0",W=["Trident"],J="Windows");J=J&&n(J)}if(V&&(M=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(V)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(F&&C.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(B=/b/i.test(M)?"beta":"alpha",V=V.replace(RegExp(M+"\\+?$"),"")+("beta"==B?O:_)+(/\d+\+?/.exec(M)||"")),"Fennec"==K||"Firefox"==K&&/\b(?:Android|Firefox OS)\b/.test(J))K="Firefox Mobile";else if("Maxthon"==K&&V)V=V.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Z))"Xbox 360"==Z&&(J=null),"Xbox 360"==Z&&/\bIEMobile\b/.test(e)&&q.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(K)&&(!K||Z||/Browser|Mobi/.test(K))||"Windows CE"!=J&&!/Mobi/i.test(e))if("IE"==K&&F)try{null===L.external&&q.unshift("platform preview")}catch(e){q.unshift("embedded")}else(/\bBlackBerry\b/.test(Z)||/\bBB10\b/.test(e))&&(M=(RegExp(Z.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||V)?(M=[M,/BB10/.test(e)],J=(M[1]?(Z=null,X="BlackBerry"):"Device Software")+" "+M[0],V=null):this!=r&&"Wii"!=Z&&(F&&H||/Opera/.test(K)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==K&&/\bOS X (?:\d+\.){2,}/.test(J)||"IE"==K&&(J&&!/^Win/.test(J)&&V>5.5||/\bWindows XP\b/.test(J)&&V>8||8==V&&!/\bTrident\b/.test(e)))&&!b.test(M=u.call(r,e.replace(b,"")+";"))&&M.name&&(M="ing as "+M.name+((M=M.version)?" "+M:""),b.test(K)?(/\bIE\b/.test(M)&&"Mac OS"==J&&(J=null),M="identify"+M):(M="mask"+M,K=U?n(U.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(M)&&(J=null),F||(V=null)),W=["Presto"],q.push(M));else K+=" Mobile";(M=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(M=[parseFloat(M.replace(/\.(\d)$/,".0$1")),M],"Safari"==K&&"+"==M[1].slice(-1)?(K="WebKit Nightly",B="alpha",V=M[1].slice(0,-1)):V!=M[1]&&V!=(M[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(V=null),M[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==M[0]&&537.36==M[2]&&parseFloat(M[1])>=28&&"WebKit"==W&&(W=["Blink"]),F&&(z||M[1])?(W&&(W[1]="like Chrome"),M=M[1]||(M=M[0],M<530?1:M<532?2:M<532.05?3:M<533?4:M<534.03?5:M<534.07?6:M<534.1?7:M<534.13?8:M<534.16?9:M<534.24?10:M<534.3?11:M<535.01?12:M<535.02?"13+":M<535.07?15:M<535.11?16:M<535.19?17:M<536.05?18:M<536.1?19:M<537.01?20:M<537.11?"21+":M<537.13?23:M<537.18?24:M<537.24?25:M<537.36?26:"Blink"!=W?"27":"28")):(W&&(W[1]="like Safari"),M=M[0],M=M<400?1:M<500?2:M<526?3:M<533?4:M<534?"4+":M<535?5:M<537?6:M<538?7:M<601?8:"8"),W&&(W[1]+=" "+(M+="number"==typeof M?".x":/[.+]/.test(M)?"":"+")),"Safari"==K&&(!V||parseInt(V)>45)&&(V=M)),"Opera"==K&&(M=/\bzbov|zvav$/.exec(J))?(K+=" ",q.unshift("desktop mode"),"zvav"==M?(K+="Mini",V=null):K+="Mobile",J=J.replace(RegExp(" *"+M+"$"),"")):"Safari"==K&&/\bChrome\b/.exec(W&&W[1])&&(q.unshift("desktop mode"),K="Chrome Mobile",V=null,/\bOS X\b/.test(J)?(X="Apple",J="iOS 4.3+"):J=null),V&&0==V.indexOf(M=/[\d.]+$/.exec(J))&&e.indexOf("/"+M+"-")>-1&&(J=c(J.replace(M,""))),W&&!/\b(?:Avant|Nook)\b/.test(K)&&(/Browser|Lunascape|Maxthon/.test(K)||"Safari"!=K&&/^iOS/.test(J)&&/\bSafari\b/.test(W[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(K)&&W[1])&&(M=W[W.length-1])&&q.push(M),q.length&&(q=["("+q.join("; ")+")"]),X&&Z&&Z.indexOf(X)<0&&q.push("on "+X),Z&&q.push((/^on /.test(q[q.length-1])?"":"on ")+Z),J&&(M=/ ([\d.+]+)$/.exec(J),I=M&&"/"==J.charAt(J.length-M[0].length-1),J={architecture:32,family:M&&!I?J.replace(M[0],""):J,version:M?M[1]:null,toString:function(){var e=this.version;return this.family+(e&&!I?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(M=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec($))&&!/\bi686\b/i.test($)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+M),"")),K&&(/\bWOW64\b/i.test(e)||F&&/\w(?:86|32)$/.test(C.cpuClass||C.platform)&&!/\bWin64; x64\b/i.test(e))&&q.unshift("32-bit")):J&&/^OS X/.test(J.family)&&"Chrome"==K&&parseFloat(V)>=39&&(J.architecture=64),e||(e=null);var Y={};return Y.description=e,Y.layout=W&&W[0],Y.manufacturer=X,Y.name=K,Y.prerelease=B,Y.product=Z,Y.ua=e,Y.version=K&&V,Y.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},Y.parse=u,Y.toString=w,Y.version&&q.unshift(V),Y.name&&q.unshift(K),J&&K&&(J!=String(J).split(" ")[0]||J!=K.split(" ")[0]&&!Z)&&q.push(Z?"("+J+")":"on "+J),q.length&&(Y.description=q.join(" ")),Y}var d={function:!0,object:!0},h=d[typeof window]&&window||this,p=h,f=d[typeof exports]&&exports,m=d[typeof module]&&module&&!module.nodeType&&module,g=f&&m&&"object"==typeof global&&global;!g||g.global!==g&&g.window!==g&&g.self!==g||(h=g);var v=Math.pow(2,53)-1,b=/\bOpera/,y=this,w=Object.prototype,L=w.hasOwnProperty,k=w.toString,x=u();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(h.platform=x,define("platform",[],function(){return x})):f&&m?r(x,function(e,t){f[t]=e}):h.platform=x}.call(this),define("text!ev-script/templates/hider.html",[],function(){return'<a class="action-hide" href="#" title="<%= Globalize.formatMessage(\'Hide Picker\') %>"><%= Globalize.formatMessage(\'Hide\') %></a>\n<% if (showLogout) { %>\n    <a class="action-logout" href="#" title="<%= Globalize.formatMessage(\'Logout {0}\', username) %>"><%= Globalize.formatMessage(\'Logout\') %></a>\n<% } %>\n'}),define("ev-script/views/hider",["require","underscore","globalize","ev-script/views/base","text!ev-script/templates/hider.html"],function(e){"use strict";var t=e("underscore"),i=e("globalize"),n=e("ev-script/views/base");return n.extend({template:t.template(e("text!ev-script/templates/hider.html")),initialize:function(e){n.prototype.initialize.call(this,e),t.bindAll(this,"hideHandler","logoutHandler","authHandler","render"),this.globalEvents.on("loggedIn",this.authHandler),this.globalEvents.on("loggedOut",this.authHandler),this.field=e.field},events:{"click a.action-hide":"hideHandler","click a.action-logout":"logoutHandler"},authHandler:function(e){e===this.config.ensembleUrl&&this.render()},render:function(){var e="";this.info.get("ApplicationVersion")&&this.auth.isAuthenticated()&&(e=this.auth.getUser().get("UserName")),this.$el.html(this.template({Globalize:i,showLogout:this.auth.isAuthenticated()&&"none"!==this.config.authType,username:e}))},hideHandler:function(e){this.appEvents.trigger("hidePicker",this.field.id),e.preventDefault()},logoutHandler:function(e){this.auth.logout().always(this.appEvents.trigger("hidePickers")),e.preventDefault()}})}),define("text!ev-script/templates/picker.html",[],function(){return'<div id="<%= id %>-hider" class="ev-hider"></div>\n<div id="<%= id %>-filter-block" class="ev-filter-block">\n    <div class="loader"></div>\n</div>\n<div id="<%= id %>-results" class="ev-results clearfix"></div>\n<div id="anthemContainer"></div>\n'}),define("ev-script/views/picker",["require","jquery","underscore","ev-script/views/base","ev-script/views/hider","text!ev-script/templates/picker.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("ev-script/views/base"),r=e("ev-script/views/hider");return n.extend({template:i.template(e("text!ev-script/templates/picker.html")),initialize:function(e){n.prototype.initialize.call(this,e),i.bindAll(this,"chooseItem","hidePicker","showPicker","setHeight","resizeResults"),this.$el.hide(),this.$el.html(this.template({id:this.id})),this.field=e.field,this.hider=new r({el:this.$("div.ev-hider"),field:this.field,appId:this.appId});var a=this.$("div.loader");t(window.document).on("ajaxSend",i.bind(function(e,t,i){this===i.picker&&a.addClass("loading")},this)).on("ajaxComplete",i.bind(function(e,t,i){this===i.picker&&a.removeClass("loading")},this)),this.appEvents.on("hidePickers",function(e){e&&this.field.id===e||this.hidePicker()},this),this.appEvents.on("showPicker",function(e){this.field.id===e&&this.$el.is(":hidden")&&this.showPicker()},this),this.appEvents.on("hidePicker",function(e){this.field.id===e&&this.hidePicker()},this),this.hider.render()},chooseItem:function(e){var i=t(e.currentTarget).attr("rel"),n=this.resultsView.collection.get(i);this.model.set({id:i,content:n.toJSON()}),this.field.model.set(this.model.attributes),this.appEvents.trigger("hidePicker",this.field.id),e.preventDefault()},hidePicker:function(){this.$el.hide()},showPicker:function(){this.hider.render(),this.$el.show()},setHeight:function(e){this.$el.height(e),this.resizeResults()},resizeResults:function(){}})}),define("text!ev-script/templates/search.html",[],function(){return'<label for="<%= id %>"><%= Globalize.formatMessage(\'Search:\') %></label>\n<input id="<%= id %>" type="search" class="form-text search" value="<%- searchVal %>" title="<%= Globalize.formatMessage(\'Search Media\') %>" />\n<input type="submit" value="<%= Globalize.formatMessage(\'Go\') %>" class="form-submit" />\n'}),define("ev-script/views/search",["require","underscore","globalize","ev-script/views/base","text!ev-script/templates/search.html"],function(e){"use strict";var t=e("underscore"),i=e("globalize"),n=e("ev-script/views/base");return n.extend({template:t.template(e("text!ev-script/templates/search.html")),initialize:function(e){n.prototype.initialize.call(this,e),t.bindAll(this,"searchHandler","doSearch","autoSearch"),this.picker=e.picker,this.callback=e.callback||function(){}},events:{"keydown .search":"searchHandler","keyup .search":"autoSearch"},render:function(){this.$el.html(this.template({Globalize:i,id:this.id+"-input",searchVal:this.picker.model.get("search")}))},doSearch:function(){this.picker.model.set({search:this.$(".search").val()}),this.callback()},searchHandler:function(e){var t=e.keyCode?e.keyCode:e.which;13===t&&(this.submitTimeout&&clearTimeout(this.submitTimeout),this.doSearch(),e.preventDefault())},autoSearch:function(e){var i=e.target.value;i!==this.lastValue&&(this.lastValue=i,this.submitTimeout&&clearTimeout(this.submitTimeout),this.submitTimeout=setTimeout(t.bind(function(){this.doSearch()},this),1e3))}})}),define("text!ev-script/templates/library-type-select.html",[],function(){return'<div>\n  <label for="<%= id %>"><%= Globalize.formatMessage(\'Type:\') %></label>\n  <select id="<%= id %>" class="form-select source" title="<%= Globalize.formatMessage(\'Select Library Type\') %>">\n    <option value="content" <% if (sourceId === \'content\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Media Library\') %></option>\n    <option value="shared" <% if (sourceId === \'shared\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Shared Library\') %></option>\n  </select>\n  <input type="submit" value="<%= Globalize.formatMessage(\'Go\') %>" class="form-submit" />\n</div>\n'}),define("ev-script/views/library-type-select",["require","underscore","globalize","ev-script/views/base","text!ev-script/templates/library-type-select.html"],function(e){"use strict";var t=e("underscore"),i=e("globalize"),n=e("ev-script/views/base");return n.extend({template:t.template(e("text!ev-script/templates/library-type-select.html")),initialize:function(e){n.prototype.initialize.call(this,e),t.bindAll(this,"changeHandler"),this.picker=e.picker,this.callback=e.callback||function(){}},events:{"change .source":"changeHandler"},render:function(){this.$el.html(this.template({Globalize:i,id:this.id+"-select",sourceId:this.picker.model.get("sourceId")}))},changeHandler:function(e){this.picker.model.set({sourceId:this.$(".source").val()}),this.callback(),e.preventDefault()}})}),define("text!ev-script/templates/options.html",[],function(){return"<% collection.each(function(item) { %>\n    <option value=\"<%= item.id %>\" <% if (selectedId === item.id) { print('selected=\"selected\"'); } %>><%- item.get('Name') %></option>\n<% }); %>\n"}),define("ev-script/views/organization-select",["require","underscore","ev-script/views/base","text!ev-script/templates/options.html"],function(e){"use strict";var t=e("underscore"),i=e("ev-script/views/base");return i.extend({template:t.template(e("text!ev-script/templates/options.html")),initialize:function(e){i.prototype.initialize.call(this,e),t.bindAll(this,"render"),this.picker=e.picker,this.$el.html('<option value="-1">Loading...</option>'),this.collection.on("reset",this.render)},render:function(){var e=this.picker.model.get("organizationId")||this.auth.getUser().get("OrganizationID");this.$el.html(this.template({selectedId:e,collection:this.collection})),this.$el.trigger("change")}})}),define("ev-script/collections/base",["require","jquery","underscore","backbone","ev-script/util/cache"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),r=e("ev-script/util/cache");return n.Collection.extend({initialize:function(e,t){this.requiresAuth=!0,this.appId=t.appId,this.config=r.getAppConfig(this.appId),this.auth=r.getAppAuth(this.appId),this.info=r.getAppInfo(this.appId)},model:n.Model.extend({idAttribute:"ID"}),getCached:function(e){},setCached:function(e,t){},clearCache:function(e){},parse:function(e){return e.Data},fetch:function(e){return e&&e.success&&(e.success=i.wrap(e.success,i.bind(function(e){var t=Array.prototype.slice.call(arguments,1);this.requiresAuth&&!this.auth.isAuthenticated()?this.auth.fetchUser().always(function(){e.apply(this,t)}):e.apply(this,t)},this))),n.Collection.prototype.fetch.call(this,e)},sync:function(e,r,a){if(i.defaults(a||(a={}),{xhrFields:{withCredentials:!0}}),"read"===e){var s=this.getCached(a.cacheKey);if(s){var o=t.Deferred();return a.success&&o.done(a.success),o.resolve(s).promise()}return a.success=a.success||function(e,t,i){},a.success=i.wrap(a.success,i.bind(function(e){this.setCached(a.cacheKey,arguments[1]),e.apply(this,Array.prototype.slice.call(arguments,1))},this)),n.Collection.prototype.sync.call(this,e,r,a)}return n.Collection.prototype.sync.call(this,e,r,a)}})}),define("ev-script/collections/organizations",["require","ev-script/collections/base","ev-script/util/cache"],function(e){"use strict";var t=e("ev-script/collections/base"),i=e("ev-script/util/cache");return t.extend({initialize:function(e,i){t.prototype.initialize.call(this,e,i)},_cache:function(e,t){var n=this.auth.getUser(),r=n?i.getUserCache(this.config.ensembleUrl,n.id):null;return r?r[t?"set":"get"](e,t):null},getCached:function(e){return this._cache("orgs")},setCached:function(e,t){return this._cache("orgs",t)},url:function(){var e=this.config.ensembleUrl+"/api/Organizations",t="PageSize=9999",i="PageIndex=1",n=e+"?"+t+"&"+i;return this.config.urlCallback?this.config.urlCallback(n):n}})}),define("ev-script/views/library-select",["require","underscore","globalize","ev-script/views/base","text!ev-script/templates/options.html"],function(e){"use strict";var t=e("underscore"),i=e("globalize"),n=e("ev-script/views/base");return n.extend({template:t.template(e("text!ev-script/templates/options.html")),initialize:function(e){n.prototype.initialize.call(this,e),t.bindAll(this,"render"),this.picker=e.picker,this.$el.html('<option value="-1">'+i.formatMessage("Loading...")+"</option>"),this.collection.on("reset",this.render)},render:function(){var e=this.picker.model.get("libraryId")||this.auth.getUser().get("LibraryID");this.$el.html(this.template({selectedId:e,collection:this.collection})),this.$el.trigger("change")}})}),define("ev-script/collections/libraries",["require","ev-script/collections/base","ev-script/util/cache"],function(e){"use strict";var t=e("ev-script/collections/base"),i=e("ev-script/util/cache");return t.extend({initialize:function(e,i){t.prototype.initialize.call(this,e,i),this.filterValue=i.organizationId||""},_cache:function(e,t){var n=null,r=this.auth.getUser(),a=r?i.getUserCache(this.config.ensembleUrl,r.id):null;if(a){var s=a.get("libs");s||a.set("libs",s=new i.Cache),n=s[t?"set":"get"](e,t)}return n},getCached:function(e){return this._cache(e)},setCached:function(e,t){return this._cache(e,t)},url:function(){var e=this.config.ensembleUrl+"/api/Libraries",t="PageSize=9999",i="PageIndex=1",n="FilterOn=OrganizationId",r="FilterValue="+encodeURIComponent(this.filterValue),a=e+"?"+t+"&"+i+"&"+n+"&"+r;return this.config.urlCallback?this.config.urlCallback(a):a}})}),define("text!ev-script/templates/unit-selects.html",[],function(){return'<div id="<%= formId %>" class="unit-selects">\n    <label for="<%= orgSelectId %>"><%= Globalize.formatMessage(\'Organization:\') %></label><select id="<%= orgSelectId %>" class="form-select organizations" title="<%= Globalize.formatMessage(\'Select Organization\') %>"></select><label for="<%= libSelectId %>"><%= Globalize.formatMessage(\'Library:\') %></label><select id="<%= libSelectId %>" class="form-select libraries" title="<%= Globalize.formatMessage(\'Select Library\') %>"></select><input type="submit" value="<%= Globalize.formatMessage(\'Go\') %>" class="form-submit" />\n</div>\n'}),define("ev-script/views/unit-selects",["require","jquery","underscore","globalize","ev-script/views/base","ev-script/views/organization-select","ev-script/collections/organizations","ev-script/views/library-select","ev-script/collections/libraries","text!ev-script/templates/unit-selects.html"],function(e){"use strict";var t=(e("jquery"),e("underscore")),i=e("globalize"),n=e("ev-script/views/base"),r=e("ev-script/views/organization-select"),a=e("ev-script/collections/organizations"),s=e("ev-script/views/library-select"),o=e("ev-script/collections/libraries");return n.extend({template:t.template(e("text!ev-script/templates/unit-selects.html")),initialize:function(e){n.prototype.initialize.call(this,e),t.bindAll(this,"loadOrgs","loadLibraries","changeOrganization","changeLibrary"),this.picker=e.picker,this.id=e.id,this.$el.html(this.template({Globalize:i,formId:this.id+"-unit-selects",orgSelectId:this.id+"-org-select",libSelectId:this.id+"-lib-select"})),this.orgSelect=new r({el:this.$(".organizations"),picker:this.picker,appId:this.appId,collection:new a({},{appId:this.appId})}),this.libSelect=new s({el:this.$(".libraries"),picker:this.picker,appId:this.appId,collection:new o({},{appId:this.appId})})},events:{"change select.organizations":"changeOrganization","change select.libraries":"changeLibrary"},changeOrganization:function(e){this.picker.model.set({organizationId:e.target.value}),this.loadLibraries()},changeLibrary:function(e){this.picker.model.set({libraryId:e.target.value})},loadOrgs:function(){var e=new a({},{appId:this.appId});e.fetch({picker:this.picker,success:t.bind(function(e,t,i){this.orgSelect.collection.reset(e.models)},this),error:t.bind(function(e,i,n){this.ajaxError(i,t.bind(function(){this.loadOrgs()},this))},this)})},loadLibraries:function(){var e=this.picker.model.get("organizationId"),i=new o({},{organizationId:e,appId:this.appId});i.fetch({picker:this.picker,cacheKey:e,success:t.bind(function(e,t,i){this.libSelect.collection.reset(e.models)},this),error:t.bind(function(e,i,n){this.ajaxError(i,t.bind(function(){this.loadLibraries()},this))},this)})}})}),function(e){"use strict";"function"==typeof define&&define.amd?define("ev-scroll-loader",["jquery"],e):e("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery)}(function(e){"use strict";var t={onScrolled:function(){}},i={init:function(i){var n=e.extend({},t,i);return this.each(function(){var t=e(this),i=t.wrap('<div class="scrollWrap"/>').closest(".scrollWrap");t.addClass("scroll-content"),i.append('<div class="loader"></div>'),i.css({position:"relative",height:n.height?"number"==typeof n.height?n.height+"px":n.height:"100%","max-height":t[0].scrollHeight+"px","overflow-y":"scroll"}),i.scroll(function(){i.scrollTop()>=i[0].scrollHeight-i.height()-1&&n.onScrolled.call(t)})})},showLoader:function(){var t=e(this).closest(".scrollWrap");return e(".loader",t).show(),this},hideLoader:function(){var t=e(this).closest(".scrollWrap");return e(".loader",t).hide(),this}};e.fn.evScrollLoader=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void 0:i.init.apply(this,arguments)}}),define("text!ev-script/templates/results.html",[],function(){return'<div class="total">\n    <%= Globalize.formatMessage(\'Search returned {0} results.\', totalResults) %>\n    <a href="#" class="action-refresh" title="<%= Globalize.formatMessage(\'Reload\') %>"><i class="fa fa-fw fa-lg fa-refresh"></i></a>\n</div>\n<div class="results">\n    <table class="content-list"></table>\n</div>\n'}),define("text!ev-script/templates/no-results.html",[],function(){return'<tr class="odd"><td colspan="2"><%= Globalize.formatMessage(\'No results available.\') %></td></tr>\n'}),define("ev-script/views/results",["require","jquery","underscore","globalize","ev-script/views/base","ev-scroll-loader","text!ev-script/templates/results.html","text!ev-script/templates/no-results.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("ev-script/views/base");return e("ev-scroll-loader"),r.extend({resultsTemplate:i.template(e("text!ev-script/templates/results.html")),emptyTemplate:i.template(e("text!ev-script/templates/no-results.html")),initialize:function(e){r.prototype.initialize.call(this,e),i.bindAll(this,"render","loadMore","addHandler","previewItem","setHeight","resizeResults","refreshHandler"),this.picker=e.picker,this.appId=e.appId,this.loadLock=!1},events:{"click .action-preview":"previewItem","click .action-refresh":"refreshHandler"},getItemHtml:function(e,t){if(this.resultTemplate)return this.resultTemplate({Globalize:n,item:e,index:t})},previewItem:function(e){var i=e.currentTarget,n=t(i).attr("rel"),r=this.collection.get(n),a={id:n,content:r.toJSON(),appId:this.appId};new this.previewClass({el:i,model:new this.modelClass(a),appId:this.appId,picker:this.picker});e.stopPropagation(),e.preventDefault()},loadMore:function(){this.collection.hasMore&&!this.loadLock&&(this.loadLock=!0,this.collection.fetch({remove:!1,picker:this.picker,success:i.bind(function(e,t,n){i.size(t.Data)<this.config.pageSize?(e.hasMore=!1,this.$scrollLoader.evScrollLoader("hideLoader")):(e.hasMore=!0,e.pageIndex+=1),this.loadLock=!1},this),error:i.bind(function(e,t,n){this.ajaxError(t,i.bind(function(){this.loadMore()},this)),this.loadLock=!1},this)}))},addHandler:function(e,i,n){var r=t(this.getItemHtml(e,i.indexOf(e)));this.decorate(r),this.$(".content-list").append(r)},decorate:function(e){},render:function(){this.$el.html(this.resultsTemplate({Globalize:n,totalResults:this.collection.totalResults})),this.$total=this.$(".total"),this.$results=this.$(".results"),this.resizeResults();var e=this.$(".content-list");this.collection.isEmpty()?e.append(this.emptyTemplate({Globalize:n})):this.collection.each(function(i,n){var r=t(this.getItemHtml(i,n));this.decorate(r),e.append(r)},this);var i=this.config.scrollHeight;this.$scrollLoader=e.evScrollLoader({height:i,onScrolled:this.loadMore}),this.collection.hasMore||this.$scrollLoader.evScrollLoader("hideLoader"),this.collection.off("add",this.addHandler).on("add",this.addHandler)},setHeight:function(e){this.$el.height(e),this.resizeResults()},resizeResults:function(){this.config.fitToParent&&this.$results&&(this.$results.height(this.$el.height()-this.$total.outerHeight(!0)),this.$(".resultItem").each(i.bind(function(e,i){this.decorate(t(i))},this)))},refreshHandler:function(e){}})}),define("ev-script/views/preview",["require","jquery","underscore","globalize","ev-script/views/base","ev-script/models/video-settings","jquery-ui"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("ev-script/views/base");e("ev-script/models/video-settings");return e("jquery-ui"),r.extend({initialize:function(e){r.prototype.initialize.call(this,e);var a,s=t('<div class="dialogWrap ev-preview"></div>'),o=new this.embedClass({model:new this.model.constructor(this.model.toJSON()),appId:this.appId}),l=50,c=this.info.useLegacyEmbeds()?140:50,u=Math.min(o.getFrameWidth()+l,t(window).width()-this.config.dialogMargin),d=Math.min(o.getFrameHeight()+c,t(window).height()-this.config.dialogMargin);this.$el.after(s),o.scale(u-l,d-c),a=s.dialog({title:this.getTitle(),modal:!0,width:u,height:d,draggable:!1,resizable:!1,dialogClass:"ev-dialog",create:i.bind(function(e,t){o.render(),s.html(o.$el)},this),closeText:n.formatMessage("Close"),close:function(e,t){s.dialog("destroy").remove()}})},getTitle:function(){var e=this.model.get("content")||{Title:this.model.get("id")};return this.unencode(e.Title||e.Name)}})}),define("ev-script/views/embed",["require","underscore","ev-script/views/base"],function(e){"use strict";var t=(e("underscore"),e("ev-script/views/base"));return t.extend({initialize:function(e){t.prototype.initialize.call(this,e)},render:function(){},getFrameWidth:function(){return this.model.get("width")},getFrameHeight:function(){return this.model.get("height")},scale:function(e,t){}})}),define("text!ev-script/templates/video-embed.html",[],function(){return'<iframe src="<%- ensembleUrl %>/app/plugin/embed.aspx?ID=<%- id %>&autoPlay=<%- autoPlay %>&displayTitle=<%- displayTitle %>&displaySharing=<%- displaySharing %>&displayAnnotations=<%- displayAnnotations %>&displayCaptionSearch=<%- displayCaptionSearch %>&displayAttachments=<%- displayAttachments %>&audioPreviewImage=<%- audioPreviewImage %>&displayLinks=<%- displayLinks %>&displayMetaData=<%- displayMetaData %>&displayDateProduced=<%- displayDateProduced %>&displayEmbedCode=<%- displayEmbedCode %>&displayDownloadIcon=<%- displayDownloadIcon %>&hideControls=true&showCaptions=<%- showCaptions %>&width=<%- width %>&height=<%- height %>&isNewPluginEmbed=true"\n        frameborder="0"\n        width="<%- width %>"\n        height="<%- frameHeight %>"\n        allowfullscreen>\n</iframe>\n'}),define("text!ev-script/templates/video-embed-legacy.html",[],function(){return'<iframe src="<%- ensembleUrl %>/app/plugin/embed.aspx?ID=<%- id %>&autoPlay=<%- autoPlay %>&displayTitle=<%- displayTitle %>&hideControls=<%- hideControls %>&showCaptions=<%- showCaptions %>&width=<%- width %>&height=<%- height %>"\n        frameborder="0"\n        style="width: <%- width %>px;height:<%- (parseInt(height, 10) + 56) %>px;"\n        allowfullscreen>\n</iframe>\n'}),define("ev-script/views/video-embed",["require","underscore","ev-script/views/embed","text!ev-script/templates/video-embed.html","text!ev-script/templates/video-embed-legacy.html"],function(e){"use strict";var t=e("underscore"),i=e("ev-script/views/embed");return i.extend({template:t.template(e("text!ev-script/templates/video-embed.html")),legacyTemplate:t.template(e("text!ev-script/templates/video-embed-legacy.html")),initialize:function(e){i.prototype.initialize.call(this,e)},render:function(){var e=this.getMediaWidth(),t=this.getMediaHeight(),i=this.model.get("showtitle"),n="";n=this.info.useLegacyEmbeds()?this.legacyTemplate({ensembleUrl:this.config.ensembleUrl,id:this.model.get("id"),autoPlay:this.model.get("autoplay"),displayTitle:i,hideControls:this.model.get("hidecontrols"),showCaptions:this.model.get("showcaptions"),width:e,height:i?t+25:t}):this.template({ensembleUrl:this.config.ensembleUrl,id:this.model.get("id"),autoPlay:this.model.get("autoplay"),displayTitle:i,displaySharing:this.model.get("socialsharing"),displayAnnotations:this.model.get("annotations"),displayCaptionSearch:this.model.get("captionsearch"),displayAttachments:this.model.get("attachments"),audioPreviewImage:this.model.get("audiopreviewimage"),displayLinks:this.model.get("links"),displayMetaData:this.model.get("metadata"),displayDateProduced:this.model.get("dateproduced"),displayEmbedCode:this.model.get("embedcode"),displayDownloadIcon:this.model.get("download"),showCaptions:this.model.get("showcaptions"),width:e,height:t,frameHeight:this.getFrameHeight()}),this.$el.html(n)},getMediaWidth:function(){return parseInt(this.model.get("width"),10)||640;
},getMediaHeight:function(){return parseInt(this.model.get("height"),10)||360},getFrameWidth:function(){return this.getMediaWidth()},getFrameHeight:function(){var e=this.getMediaHeight(),t=this.model.get("isaudio"),i=this.model.get("audiopreviewimage");return t?e=this.isMenuVisible()?i?e+40:155:i?e:40:e+=40,e},isMenuVisible:function(){return this.model.get("showtitle")||this.model.get("socialsharing")||this.model.get("annotations")||this.model.get("captionsearch")||this.model.get("attachments")||this.model.get("links")||this.model.get("metadata")||this.model.get("dateproduced")||this.model.get("embedcode")||this.model.get("download")},scale:function(e,t){var i,n=this.getFrameWidth(),r=this.getFrameHeight(),a=this.getMediaWidth(),s=this.getMediaHeight();if(!this.model.get("isaudio"))for(;n>e||r>t;)i=n>e?e/n:t/r,this.model.set("width",Math.floor(a*i)),this.model.set("height",Math.floor(s*i)),n=this.getFrameWidth(),r=this.getFrameHeight(),a=this.getMediaWidth(),s=this.getMediaHeight()}})}),define("ev-script/models/base",["require","jquery","underscore","backbone","ev-script/util/cache","ev-script/collections/base"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),r=e("ev-script/util/cache");e("ev-script/collections/base");return n.Model.extend({initialize:function(e,t){this.appId=t.appId,this.config=r.getAppConfig(this.appId)},getCached:function(){},setCached:function(){},fetch:function(e){return e&&e.success&&(e.success=i.wrap(e.success,i.bind(function(e){var t=Array.prototype.slice.call(arguments,1);this.requiresAuth&&!this.auth.isAuthenticated()?this.auth.fetchUser().always(function(){e.apply(this,t)}):e.apply(this,t)},this))),n.Model.prototype.fetch.call(this,e)},sync:function(e,r,a){if(i.defaults(a||(a={}),{xhrFields:{withCredentials:!0}}),"read"===e){var s=this.getCached(a.cacheKey);if(s){var o=t.Deferred();return a.success&&o.done(a.success),o.resolve(s).promise()}return a.success=a.success||function(e,t,i){},a.success=i.wrap(a.success,i.bind(function(e){this.setCached(a.cacheKey,arguments[1]),e.apply(this,Array.prototype.slice.call(arguments,1))},this)),n.Model.prototype.sync.call(this,e,r,a)}return n.Model.prototype.sync.call(this,e,r,a)}})}),define("ev-script/models/video-encoding",["require","backbone","ev-script/models/base","underscore","ev-script/util/cache"],function(e){"use strict";var t=e("backbone"),i=e("ev-script/models/base"),n=e("underscore");e("ev-script/util/cache");return i.extend({idAttribute:"videoID",initialize:function(e,t){i.prototype.initialize.call(this,e,t),this.requiresAuth=!1},getCached:function(e){},setCached:function(e,t){},url:function(){var e=this.config.ensembleUrl+"/app/api/content/show.json/"+this.get("fetchId");return this.config.urlCallback?this.config.urlCallback(e):e},getDims:function(){var e=this.get("dimensions")||"640x360",t=e.split("x"),i=[],n=parseInt(t[0],10)||640,r=parseInt(t[1],10)||360;return this.isAudio()?(i[0]=400,i[1]=26):this.config.defaultVideoWidth?(i[0]=parseInt(this.config.defaultVideoWidth,10)||640,i[1]=Math.ceil(i[0]/(n/r))):(i[0]=n,i[1]=r),i},getRatio:function(){var e=this.getDims();return e[0]/e[1]},getWidth:function(){return this.getDims()[0]},getHeight:function(){return this.getDims()[1]},isAudio:function(){return/^audio/i.test(this.get("contentType")||"")},parse:function(e){return n.isArray(e.dataSet.encodings)?n.max(e.dataSet.encodings,function(e,t,i){return parseInt(e.bitRate,10)}):e.dataSet.encodings},sync:function(e,i,r){return n.extend(r,{dataFilter:function(e){var t=e.match(/\{[\s\S]*\}/);return t?t[0]:e}}),t.sync.call(this,e,i,r)},updateSettingsModel:function(e){var t={width:this.getWidth(),height:this.getHeight(),isaudio:this.isAudio()};e.set(t)}})}),define("ev-script/views/video-preview",["require","underscore","ev-script/views/preview","ev-script/views/video-embed","ev-script/models/video-encoding"],function(e){"use strict";var t=e("underscore"),i=e("ev-script/views/preview"),n=e("ev-script/views/video-embed"),r=e("ev-script/models/video-encoding");return i.extend({embedClass:n,initialize:function(e){this.appId=e.appId,this.encoding=e.encoding||new r({fetchId:this.model.id},{appId:this.appId}),this.picker=e.picker;var n=t.bind(function(){this.encoding.updateSettingsModel(this.model),this.encoding.updateSettingsModel(this.picker.model),i.prototype.initialize.call(this,e)},this);this.encoding.isNew()?this.encoding.fetch({success:n,picker:this.picker}):n()}})}),function(e){var t=/(\s*\S+|\s)$/;e.truncate=function(t,i){return e("<div></div>").append(t).truncate(i).html()},e.fn.truncate=function(i){e.isNumeric(i)&&(i={length:i});var n=e.extend({},e.truncate.defaults,i);return this.each(function(){var i=e(this);n.noBreaks&&i.find("br").replaceWith(" ");var r=i.text(),a=r.length-n.length;n.stripTags&&i.text(r),n.words&&a>0&&(a=r.length-r.slice(0,n.length).replace(t,"").length-1),a<0||!a&&!n.truncated||e.each(i.contents().get().reverse(),function(t,i){var r=e(i),s=r.text(),o=s.length;return o<=a?(n.truncated=!0,a-=o,void r.remove()):3===i.nodeType?(e(i.splitText(o-a-1)).replaceWith(n.ellipsis),!1):(r.truncate(e.extend(n,{length:o-a})),!1)})})},e.truncate.defaults={stripTags:!1,words:!1,noBreaks:!1,length:1/0,ellipsis:""}}(jQuery),define("jquery-truncate-html",function(){}),define("text!ev-script/templates/video-result.html",[],function(){return'<tr class="<%= (index % 2 ? \'odd\' : \'even\') %> resultItem">\n    <td class="content-actions">\n        <div class="thumbnail-wrap">\n            <img class="thumbnail" src="<%= item.get(\'ThumbnailUrl\').replace(/width=100/i, \'width=200\') %>" alt="<%= Globalize.formatMessage(\'{0} thumbnail image\', item.get(\'Title\')) %>"/>\n            <% if (item.get(\'IsCaptioned\')) { %>\n            <i class="ccbadge fa fa-cc fa-lg text-dark5" title="<%= Globalize.formatMessage(\'CC\') %>" alt="CC"></i>\n            <% } %>\n        </div>\n        <div class="action-links">\n            <a class="action-add" href="#" title="<%= Globalize.formatMessage(\'Choose {0}\', item.get(\'Title\')) %>" rel="<%= item.get(\'ID\') %>"><i class="fa fa-plus-circle fa-lg"></i><span><%= Globalize.formatMessage(\'Choose\') %></span></a>\n            <a class="action-preview" href="#" title="<%= Globalize.formatMessage(\'Preview: {0}\', item.get(\'Title\')) %>" rel="<%= item.get(\'ID\') %>"><i class="fa fa-play-circle fa-lg"></i><span><%= Globalize.formatMessage(\'Preview: {0}\', item.get(\'Title\')) %></span></a>\n        </div>\n    </td>\n    <td class="content-meta">\n        <table class="content-item">\n            <tbody>\n                <tr class="title">\n                    <td colspan="2">\n                        <a class="action-preview" title="<%= Globalize.formatMessage(\'Preview: {0}\', item.get(\'Title\')) %>" href="#" rel="<%= item.get(\'ID\') %>"><%= item.get(\'Title\') %></a>\n                    </td>\n                </tr>\n                <tr class="trunc"><td class="label"><%= Globalize.formatMessage(\'Description\') %></td><td class="value"><%= item.get(\'Description\') %></td></tr>\n                <tr><td class="label"><%= Globalize.formatMessage(\'Date Added\') %></td><td class="value"><%- new Date(item.get(\'AddedOn\')).toLocaleString() %></td></tr>\n                <tr class="trunc"><td class="label"><%= Globalize.formatMessage(\'Keywords\') %></td><td class="value"><%= item.get(\'Keywords\') %></td></tr>\n                <tr><td class="label"><%= Globalize.formatMessage(\'Library\') %></td><td class="value"><%- item.get(\'LibraryName\') %></td></tr>\n            </tbody>\n        </table>\n    </td>\n</tr>\n'}),define("ev-script/views/video-results",["require","jquery","underscore","globalize","ev-script/views/results","ev-script/models/video-settings","ev-script/views/video-preview","jquery-truncate-html","text!ev-script/templates/video-result.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("ev-script/views/results"),a=e("ev-script/models/video-settings"),s=e("ev-script/views/video-preview");return e("jquery-truncate-html"),r.extend({modelClass:a,previewClass:s,resultTemplate:i.template(e("text!ev-script/templates/video-result.html")),initialize:function(e){r.prototype.initialize.call(this,e)},decorate:function(e){t(".trunc .value",e).each(function(e){var i,r,a=t(this),s=100,o=a.data("fullText")||a.html(),l=t.truncate(o,{length:s,stripTags:!0,noBreaks:!0});if(a.empty(),t(window).width()<1100&&o.length>s){a.data("fullText",o),i=t("<span>"+o+"</span>"),r=t("<span>"+l+"</span>");var c=t('<a href="#">'+n.formatMessage("Less")+"</a>").click(function(e){i.hide(),r.show(),e.preventDefault()}),u=t('<a href="#">'+n.formatMessage("More")+"</a>").click(function(e){r.hide(),i.show(),e.preventDefault()});i.hide().append(c),r.append(u),a.append(r).append(i)}else a.append(o)})},refreshHandler:function(e){e.preventDefault(),this.appEvents.trigger("reloadVideos")}})}),define("ev-script/collections/videos",["require","ev-script/collections/base","ev-script/util/cache","underscore"],function(e){"use strict";var t=e("ev-script/collections/base"),i=e("ev-script/util/cache"),n=e("underscore");return t.extend({initialize:function(e,i){t.prototype.initialize.call(this,e,i),this.libraryId=i.libraryId||"",this.filterOn=i.filterOn||"",this.filterValue=i.filterValue||"",this.info.checkVersion(">=4.1.0")?this.sourceUrl="shared"===i.sourceId?"/api/SharedLibrary":"/api/MediaLibrary":this.sourceUrl="shared"===i.sourceId?"/api/SharedContent":"/api/Content",this.pageIndex=1},_cache:function(e,t){var n=null,r=this.auth.getUser(),a=r?i.getUserCache(this.config.ensembleUrl,r.id):null;if(a){var s=a.get("videos");s||a.set("videos",s=new i.Cache),n=s[t?"set":"get"](e,t)}return n},getCached:function(e){return this._cache(e)},setCached:function(e,t){return this._cache(e,t)},clearCache:function(){var e=this.auth.getUser(),t=e?i.getUserCache(this.config.ensembleUrl,e.id):null;t&&t.set("videos",null)},url:function(){var e=this.config.ensembleUrl+this.sourceUrl,t="PageSize="+this.config.pageSize,i="PageIndex="+this.pageIndex,n="FilterOn="+encodeURIComponent(this.filterOn),r="FilterValue="+encodeURIComponent(this.filterValue),a=e+"/"+this.libraryId+"?"+t+"&"+i+"&"+n+"&"+r;return this.config.urlCallback?this.config.urlCallback(a):a},parse:function(e){var t=e.Data;return n.each(t,function(e){e.Description=n.unescape(e.Description),e.Keywords=n.unescape(e.Keywords)}),t}})}),define("ev-script/collections/media-workflows",["require","ev-script/collections/base","ev-script/util/cache"],function(e){"use strict";var t=e("ev-script/collections/base"),i=e("ev-script/util/cache");return t.extend({initialize:function(e,i){t.prototype.initialize.call(this,e,i),this.filterValue=i.libraryId||""},_cache:function(e,t){var n=null,r=this.auth.getUser(),a=r?i.getUserCache(this.config.ensembleUrl,r.id):null;if(a){var s=a.get("workflows");s||a.set("workflows",s=new i.Cache),n=s[t?"set":"get"](e,t)}return n},getCached:function(e){return this._cache(e)},setCached:function(e,t){return this._cache(e,t)},url:function(){var e=this.config.ensembleUrl+"/api/MediaWorkflows",t="PageSize=9999",i="PageIndex=1",n="FilterOn=LibraryId",r="FilterValue="+encodeURIComponent(this.filterValue),a=e+"?"+t+"&"+i+"&"+n+"&"+r;return this.config.urlCallback?this.config.urlCallback(a):a},parse:function(e){return this.settings=e.Settings,e.Data}})}),define("ev-script/views/workflow-select",["require","underscore","globalize","ev-script/views/base","text!ev-script/templates/options.html"],function(e){"use strict";var t=e("underscore"),i=e("globalize"),n=e("ev-script/views/base");return n.extend({template:t.template(e("text!ev-script/templates/options.html")),initialize:function(e){n.prototype.initialize.call(this,e),t.bindAll(this,"render"),this.$el.html('<option value="-1">'+i.formatMessage("Loading...")+"</option>"),this.render()},render:function(){var e=this.collection.findWhere({IsDefault:!0})||this.collection.at(0);this.$el.html(this.template({selectedId:e.id,collection:this.collection}))},getSelected:function(){return this.collection.get(this.$("option:selected").val())}})}),define("text!ev-script/templates/upload.html",[],function(){return'<form class="upload-form" method="POST" action="">\n    <select class="form-select" name="MediaWorkflowID"></select>\n    <div class="fieldWrap">\n        <label for="Title"><%= Globalize.formatMessage(\'Title\') %> *</label>\n        <input class="form-text" type="text" name="Title" id="Title" />\n    </div>\n    <div class="fieldWrap">\n        <label for="Description"><%= Globalize.formatMessage(\'Description\') %></label>\n        <textarea class="form-text" name="Description" id="Description" />\n    </div>\n    <div class="upload"></div>\n</form>\n'}),define("ev-script/views/upload",["require","jquery","underscore","globalize","plupload","ev-script/views/base","backbone","ev-script/views/workflow-select","ev-script/models/video-settings","jquery.plupload.queue","text!ev-script/templates/upload.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("plupload"),a=e("ev-script/views/base"),s=(e("backbone"),e("ev-script/views/workflow-select"));e("ev-script/models/video-settings");return e("jquery.plupload.queue"),a.extend({template:i.template(e("text!ev-script/templates/upload.html")),events:{"change select":"handleSelect"},initialize:function(e){a.prototype.initialize.call(this,e),i.bindAll(this,"render","decorateUploader","closeDialog","handleSelect"),this.field=e.field,this.$anchor=this.$el,this.setElement(this.template({Globalize:n})),this.$upload=this.$(".upload"),this.workflows=e.workflows,this.workflowSelect=new s({appId:this.appId,el:this.$("select")[0],collection:this.workflows}),this.render(),this.decorateUploader(),this.appEvents.on("hidePickers",this.closeDialog)},getWidth:function(){return Math.min(600,t(window).width()-this.config.dialogMargin)},getHeight:function(){return Math.min(400,t(window).height()-this.config.dialogMargin)},decorateUploader:function(){var e="",a=this.workflowSelect.getSelected(),s=parseInt(a.get("MaxUploadSize"),10);this.workflows.settings.SupportedVideo&&(e+=this.workflows.settings.SupportedVideo.replace(/\*\./g,"").replace(/;/g,",").replace(/\s/g,"")),this.workflows.settings.SupportedAudio&&(e+=this.workflows.settings.SupportedAudio.replace(/\*\./g,"").replace(/;/g,",").replace(/\s/g,"")),this.$upload.pluploadQueue()&&this.$upload.pluploadQueue().destroy(),this.$upload.pluploadQueue({url:this.workflows.settings.SubmitUrl,runtimes:"html5,html4,flash",max_file_size:s>0?s+"gb":"12gb",max_file_count:1,max_retries:5,chunk_size:"2mb",unique_names:!1,multiple_queues:!1,multi_selection:!1,drag_drop:!0,multipart:!0,flash_swf_url:this.config.pluploadFlashPath,preinit:{Init:i.bind(function(e,i){t(".plupload_container",this.$upload).removeAttr("title"),t(".plupload_add",this.$upload).text(n.formatMessage("Add file"))},this),PostInit:i.bind(function(e,i){t(".plupload_droptext",this.$upload).text(n.formatMessage("Drag file here."))},this),UploadFile:i.bind(function(e,t){e.settings.multipart_params={Title:this.$("#Title").val(),Description:this.$("#Description").val(),MediaWorkflowID:this.$("select").val()}},this)},init:{StateChanged:i.bind(function(e){switch(e.state){case r.STARTED:e.state===r.STARTED&&(0===t(".plupload_cancel",this.$upload).length&&(this.$cancel=t('<a class="plupload_button plupload_cancel" href="#">'+n.formatMessage("Cancel upload")+"</a>").insertBefore(t(".plupload_filelist_footer .plupload_clearer",this.$upload)).click(i.bind(function(){e.stop(),this.decorateUploader()},this))),this.$cancel&&this.$cancel.show());break;case r.STOPPED:this.$cancel&&this.$cancel.hide()}},this),BeforeUpload:i.bind(function(e,i){var n=this.$("#Title"),r=n.val();r&&""!==r.trim()||(n.focus(),e.stop(),t(".plupload_upload_status",this.$upload).hide(),t(".plupload_buttons",this.$upload).show())},this),FilesAdded:i.bind(function(t,n){var a=e.split(",");i.each(n,function(e){var n=e.name.split("."),s=n[n.length-1];i.contains(a,s.toLowerCase())||(t.removeFile(e),t.trigger("Error",{code:r.FILE_EXTENSION_ERROR,message:r.translate("File extension error."),file:e}))}),t.files.length>1&&t.splice(0,t.files.length-1)},this),UploadComplete:i.bind(function(){this.closeDialog()},this),FileUploaded:i.bind(function(e,t,i){this.appEvents.trigger("fileUploaded")},this)}}),this.$upload.pluploadQueue().bind("refresh",function(){t("div.upload > div.plupload").css({"z-index":"0"}),t(".plupload_button").css({"z-index":"1"})}),this.$upload.pluploadQueue().refresh()},closeDialog:function(){this.$dialog&&this.$dialog.dialog("close")},handleSelect:function(e){this.decorateUploader()},render:function(){var e=t('<div class="dialogWrap"></div>');this.$anchor.after(e),this.$dialog=e.dialog({title:n.formatMessage("Upload Media to Ensemble"),modal:!0,width:this.getWidth(),height:this.getHeight(),draggable:!1,resizable:!1,dialogClass:"ev-dialog",create:i.bind(function(t,i){e.html(this.$el)},this),closeText:n.formatMessage("Close"),close:i.bind(function(t,i){this.$upload.pluploadQueue().destroy(),e.dialog("destroy").remove(),this.appEvents.off("hidePickers",this.closeDialog),this.$dialog=null},this)})}})}),function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:this,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var n,r,a=String(t),s=0,o=i,l="";a.charAt(0|s)||(o="=",s%1);l+=o.charAt(63&n>>8-s%1*8)){if(r=a.charCodeAt(s+=.75),r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|r}return l}),t.atob||(t.atob=function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,s=0,o=0,l="";a=n.charAt(o++);~a&&(r=s%4?64*r+a:a,s++%4)?l+=String.fromCharCode(255&r>>(-2*s&6)):0)a=i.indexOf(a);return l})}(),define("base64",function(){}),define("text!ev-script/templates/anthem.html",[],function(){return'<iframe src="ensemble://<%= tokenDetailsApiUrl %>" style="display:none;"></iframe>\n'}),define("ev-script/views/video-picker",["require","jquery","underscore","globalize","platform","ev-script/views/picker","ev-script/views/search","ev-script/views/library-type-select","ev-script/views/unit-selects","ev-script/views/video-results","ev-script/collections/videos","ev-script/collections/media-workflows","ev-script/views/upload","base64","text!ev-script/templates/anthem.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("platform"),a=e("ev-script/views/picker"),s=e("ev-script/views/search"),o=e("ev-script/views/library-type-select"),l=e("ev-script/views/unit-selects"),c=e("ev-script/views/video-results"),u=e("ev-script/collections/videos"),d=e("ev-script/collections/media-workflows"),h=e("ev-script/views/upload");return e("base64"),a.extend({anthemTemplate:i.template(e("text!ev-script/templates/anthem.html")),initialize:function(e){a.prototype.initialize.call(this,e),i.bindAll(this,"loadVideos","loadWorkflows","changeLibrary","handleSubmit","uploadHandler","recordHandler");var r=i.bind(function(){this.loadVideos()},this);this.$filterBlock=this.$("div.ev-filter-block"),this.info.get("ApplicationVersion")&&(this.$actions=t('<div class="ev-actions"></div>'),this.$upload=t('<button type="button" class="action-upload" title="'+n.formatMessage("Upload")+'"><i class="fa fa-upload fa-fw"></i><span>'+n.formatMessage("Upload")+"<span></button>").css("display","none"),this.$actions.append(this.$upload),this.$record=t('<button type="button" class="action-record" title="'+n.formatMessage("Record")+'"><i class="record-inactive fa fa-circle fa-fw"></i><i class="record-active fa fa-refresh fa-spin fa-fw" style="display:none;"></i><span>'+n.formatMessage("Record")+"<span></button>").css("display","none"),this.$actions.append(this.$record),this.$filterBlock.prepend(this.$actions)),this.searchView=new s({id:this.id+"-search",tagName:"div",className:"ev-search",picker:this,appId:this.appId,callback:r}),this.$filterBlock.prepend(this.searchView.$el),this.searchView.render(),this.typeSelectView=new o({id:this.id+"-type-select",tagName:"div",className:"ev-type-select",picker:this,appId:this.appId,callback:r}),this.$filterBlock.prepend(this.typeSelectView.$el),this.typeSelectView.render(),this.info.get("ApplicationVersion")&&(this.unitSelects=new l({id:this.id+"-unit-selects",tagName:"div",className:"ev-unit-selects",picker:this,appId:this.appId}),this.$filterBlock.prepend(this.unitSelects.$el)),this.resultsView=new c({el:this.$("div.ev-results"),picker:this,appId:this.appId}),this.$el.append(this.resultsView.$el)},events:{"click .action-add":"chooseItem","click .action-upload":"uploadHandler","click .action-record":"recordHandler","change .unit-selects select.libraries":"changeLibrary","submit .unit-selects":"handleSubmit"},changeLibrary:function(e){this.loadVideos(),this.loadWorkflows()},handleSubmit:function(e){this.loadVideos(),e.preventDefault()},uploadHandler:function(e){new h({appId:this.appId,field:this.field,workflows:this.workflows});e.preventDefault()},recordHandler:function(e){var n,a,s=t(".record-active",this.$record),o=t(".record-inactive",this.$record),l=i.bind(function(){this.anthemLaunching=!0,o.hide(),s.show()},this),c=i.bind(function(){this.anthemLaunching=!1,o.show(),s.hide(),n&&clearInterval(n),a&&clearTimeout(a)},this);return this.anthemLaunching?(e.preventDefault(),!1):(l(),t.ajax({url:this.config.ensembleUrl+"/api/record/token/CreateToken",data:{libraryId:this.model.get("libraryId")},xhrFields:{withCredentials:!0}}).done(i.bind(function(e){e&&"00000000-0000-0000-0000-000000000000"!==e?(this.$("#anthemContainer").html(this.anthemTemplate({tokenDetailsApiUrl:window.btoa(this.config.ensembleUrl+"/api/record/token/GetDetails?token="+e)})),n=setInterval(i.bind(function(){t.ajax({url:this.config.ensembleUrl+"/api/record/token/IsActive",xhrFields:{withCredentials:!0},data:{token:e}}).done(function(e){e||c()}).fail(function(){c()})},this),5e3),a=setTimeout(i.bind(function(){c(),/windows/i.test(r.os.family)?window.location=this.config.ensembleUrl+"/app/unprotected/EnsembleAnthem/EnsembleAnthem.msi":window.location=this.config.ensembleUrl+"/app/unprotected/EnsembleAnthem/EnsembleAnthem.dmg"},this),3e4)):c()},this)).fail(c),void e.preventDefault())},showPicker:function(){a.prototype.showPicker.call(this),this.info.get("ApplicationVersion")?(this.unitSelects.loadOrgs(),this.unitSelects.$("select").filter(":visible").first().focus()):(this.searchView.$('input[type="text"]').focus(),this.loadVideos())},loadVideos:function(){var e=t.trim(this.model.get("search").toLowerCase()),n=this.model.get("sourceId"),r=this.model.get("libraryId"),a=n+r+e,s=new u({},{sourceId:n,libraryId:r,filterOn:"",filterValue:e,appId:this.appId}),o=i.bind(function(){s.clearCache(),this.loadVideos()},this);s.fetch({picker:this,cacheKey:a,success:i.bind(function(e,t,n){var r=e.totalResults=parseInt(t.Pager.TotalRecords,10),a=i.size(t.Data);a===r?e.hasMore=!1:(e.hasMore=!0,e.pageIndex+=1),this.resultsView.collection=e,this.resultsView.render()},this),error:i.bind(function(e,t,n){this.ajaxError(t,i.bind(function(){this.loadVideos()},this))},this)}),this.appEvents.off("fileUploaded").on("fileUploaded",o),this.appEvents.off("reloadVideos").on("reloadVideos",o)},loadWorkflows:function(){this.workflows=new d({},{appId:this.appId}),this.workflows.filterValue=this.model.get("libraryId"),this.workflows.fetch({cacheKey:this.workflows.filterValue,success:i.bind(function(e,t,i){e.isEmpty()?(this.$upload.css("display","none"),this.$record.css("display","none")):(this.$upload.css("display","inline-block"),this.canRecord()&&this.$record.css("display","inline-block")),this.resizeResults()},this),error:i.bind(function(e,t,n){this.ajaxError(t,i.bind(function(){this.loadWorkflows()},this))},this),reset:!0})},resizeResults:function(){this.config.fitToParent&&this.resultsView.setHeight(this.$el.height()-this.hider.$el.outerHeight(!0)-this.$filterBlock.outerHeight(!0))},canRecord:function(){var e=this.auth.getUser();return this.info.anthemEnabled()&&e&&e.get("CanUseAnthem")&&!this.isMobile()&&"Linux"!==r.os.family},isMobile:function(){var e=r.os.family;return"Android"===e||"iOS"===e||"Windows Phone"===e}})}),define("ev-script/views/settings",["require","underscore","ev-script/views/base","jquery-ui"],function(e){"use strict";var t=e("underscore"),i=e("ev-script/views/base");return e("jquery-ui"),i.extend({initialize:function(e){i.prototype.initialize.call(this,e),t.bindAll(this,"show","cancelHandler","submitHandler"),this.field=e.field},events:{submit:"submitHandler","click .action-cancel":"cancelHandler"},show:function(){this.render(),this.$el.dialog("open")},cancelHandler:function(e){this.$el.dialog("close"),e.preventDefault()},submitHandler:function(e){this.updateModel(),this.$el.dialog("close"),e.preventDefault()},updateModel:function(){}})}),define("ev-script/util/size",["require","underscore"],function(e){"use strict";var t=e("underscore");return{optionsSixteenByNine:["1280x720","1024x576","848x480","720x405","640x360","610x344","560x315","480x270","400x225","320x180","240x135","160x90"],optionsFourByThree:["1280x960","1024x770","848x636","720x540","640x480","610x460","560x420","480x360","400x300","320x240","240x180","160x120"],ratiosAreRoughlyEqual:function(e,t){return Math.ceil(10*e)/10===Math.ceil(10*t)/10},getAvailableDimensions:function(e){e=e||16/9;var t=this.optionsSixteenByNine;return this.ratiosAreRoughlyEqual(e,4/3)&&(t=this.optionsFourByThree),t},findClosestDimension:function(e,i){var n,r=Number.MAX_VALUE,a=t.isNumber(e)?this.getAvailableDimensions(e):e,s=t.find(a,t.bind(function(e){var t=parseInt(e.split("x")[0],10),a=Math.abs(t-i);return a<r&&(r=a,n=e),0===a},this));return s||n}}}),define("text!ev-script/templates/video-settings.html",[],function(){return'<form>\n    <fieldset>\n        <div class="fieldWrap">\n            <label for="size"><%= Globalize.formatMessage(\'Size\') %></label>\n            <select class="form-select size" id="size" name="size">\n                <option value="original"><%= Globalize.formatMessage(\'Original\') %></option>\n            </select>\n        </div>\n        <div>\n            <div class="fieldWrap inline-option">\n                <input id="showtitle" class="form-checkbox" <% if (model.get(\'showtitle\')) { print(\'checked="checked"\'); } %> name="showtitle" type="checkbox"/>\n                <label for="showtitle"><%= Globalize.formatMessage(\'Title\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="socialsharing" class="form-checkbox" <% if (model.get(\'socialsharing\')) { print(\'checked="checked"\'); } %> name="socialsharing" type="checkbox"/>\n                <label for="socialsharing"><%= Globalize.formatMessage(\'Social Tools\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="annotations" class="form-checkbox" <% if (model.get(\'annotations\')) { print(\'checked="checked"\'); } %> name="annotations" type="checkbox"/>\n                <label for="annotations"><%= Globalize.formatMessage(\'Annotations\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="captionsearch" class="form-checkbox" <% if (model.get(\'captionsearch\')) { print(\'checked="checked"\'); } %> name="captionsearch" type="checkbox"/>\n                <label for="captionsearch"><%= Globalize.formatMessage(\'Caption Search\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="autoplay" class="form-checkbox" <% if (model.get(\'autoplay\')) { print(\'checked="checked"\'); } %>  name="autoplay" type="checkbox"/>\n                <label for="autoplay"><%= Globalize.formatMessage(\'Auto Play (PC Only)\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="attachments" class="form-checkbox" <% if (model.get(\'attachments\')) { print(\'checked="checked"\'); } %> name="attachments" type="checkbox"/>\n                <label for="attachments"><%= Globalize.formatMessage(\'Attachments\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="links" class="form-checkbox" <% if (model.get(\'links\')) { print(\'checked="checked"\'); } %> name="links" type="checkbox"/>\n                <label for="links"><%= Globalize.formatMessage(\'Links\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="metadata" class="form-checkbox" <% if (model.get(\'metadata\')) { print(\'checked="checked"\'); } %> name="metadata" type="checkbox"/>\n                <label for="metadata"><%= Globalize.formatMessage(\'Meta Data\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="dateproduced" class="form-checkbox" <% if (model.get(\'dateproduced\')) { print(\'checked="checked"\'); } %> name="dateproduced" type="checkbox"/>\n                <label for="dateproduced"><%= Globalize.formatMessage(\'Date Produced\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="embedcode" class="form-checkbox" <% if (model.get(\'embedcode\')) { print(\'checked="checked"\'); } %> name="embedcode" type="checkbox"/>\n                <label for="embedcode"><%= Globalize.formatMessage(\'Embed Code\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="download" class="form-checkbox" <% if (model.get(\'download\')) { print(\'checked="checked"\'); } %> name="download" type="checkbox"/>\n                <label for="download"><%= Globalize.formatMessage(\'Download Link\') %></label>\n            </div>\n            <div class="fieldWrap inline-option">\n                <input id="showcaptions" class="form-checkbox" <% if (model.get(\'showcaptions\')) { print(\'checked="checked"\'); } %>  name="showcaptions" type="checkbox"/>\n                <label for="showcaptions"><%= Globalize.formatMessage(\'Captions "On" By Default\') %></label>\n            </div>\n            <% if (isAudio) { %>\n                <div class="fieldWrap inline-option">\n                    <input id="audiopreviewimage" class="form-checkbox" <% if (model.get(\'audiopreviewimage\')) { print(\'checked="checked"\'); } %>  name="audiopreviewimage" type="checkbox"/>\n                    <label for="audiopreviewimage"><%= Globalize.formatMessage(\'Audio Preview Image\') %></label>\n                </div>\n            <% } %>\n         </div>\n        <div class="form-actions">\n            <button type="submit" class="form-submit action-submit" value="Submit"><i class="fa fa-save"></i><span><%= Globalize.formatMessage(\'Save\') %></span></button>\n            <button type="button" class="form-submit action-cancel" value="Cancel"><i class="fa fa-times"></i><span><%= Globalize.formatMessage(\'Cancel\') %></span></button>\n        </div>\n    </fieldset>\n</form>\n'}),define("text!ev-script/templates/video-settings-legacy.html",[],function(){return'<form>\n    <fieldset>\n        <div class="fieldWrap">\n            <label for="size"><%= Globalize.formatMessage(\'Size\') %></label>\n            <select class="form-select size" id="size" name="size" <% if (isAudio) { print(\'disabled\'); } %> >\n                <option value="original"><%= Globalize.formatMessage(\'Original\') %></option>\n            </select>\n        </div>\n        <div class="fieldWrap">\n            <label for="showtitle"><%= Globalize.formatMessage(\'Show Title\') %></label>\n            <input id="showtitle" class="form-checkbox" <% if (model.get(\'showtitle\')) { print(\'checked="checked"\'); } %> name="showtitle" type="checkbox"/>\n        </div>\n        <div class="fieldWrap">\n            <label for="autoplay"><%= Globalize.formatMessage(\'Auto Play\') %></label>\n            <input id="autoplay" class="form-checkbox" <% if (model.get(\'autoplay\')) { print(\'checked="checked"\'); } %>  name="autoplay" type="checkbox"/>\n        </div>\n        <div class="fieldWrap">\n            <label for="showcaptions"><%= Globalize.formatMessage(\'Show Captions\') %></label>\n            <input id="showcaptions" class="form-checkbox" <% if (model.get(\'showcaptions\')) { print(\'checked="checked"\'); } %>  name="showcaptions" type="checkbox" <% if (isAudio) { print(\'disabled\'); } %> />\n        </div>\n        <div class="fieldWrap">\n            <label for="hidecontrols"><%= Globalize.formatMessage(\'Hide Controls\') %></label>\n            <input id="hidecontrols" class="form-checkbox" <% if (model.get(\'hidecontrols\')) { print(\'checked="checked"\'); } %>  name="hidecontrols" type="checkbox" <% if (isAudio) { print(\'disabled\'); } %> />\n        </div>\n        <div class="form-actions">\n            <input type="button" class="form-submit action-cancel" value="<%= Globalize.formatMessage(\'Cancel\') %>"/>\n            <input type="submit" class="form-submit action-submit" value="<%= Globalize.formatMessage(\'Submit\') %>"/>\n        </div>\n    </fieldset>\n</form>\n';
}),define("text!ev-script/templates/sizes.html",[],function(){return'<% _.each(sizes, function(size) { %>\n    <option value="<%= size %>" <% if (size === target) { print(\'selected="selected"\'); } %>><%= size %></option>\n<% }); %>\n'}),define("ev-script/views/video-settings",["require","jquery","underscore","globalize","ev-script/views/settings","ev-script/util/size","jquery-ui","text!ev-script/templates/video-settings.html","text!ev-script/templates/video-settings-legacy.html","text!ev-script/templates/sizes.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("ev-script/views/settings"),a=e("ev-script/util/size");return e("jquery-ui"),r.extend({template:i.template(e("text!ev-script/templates/video-settings.html")),legacyTemplate:i.template(e("text!ev-script/templates/video-settings-legacy.html")),sizesTemplate:i.template(e("text!ev-script/templates/sizes.html")),initialize:function(e){r.prototype.initialize.call(this,e),this.encoding=e.encoding,this.encoding.on("change:id",i.bind(function(){this.render()},this))},updateModel:function(){var e={showtitle:this.$("#showtitle").is(":checked"),autoplay:this.$("#autoplay").is(":checked"),showcaptions:this.$("#showcaptions").is(":checked"),hidecontrols:this.$("#hidecontrols").is(":checked")};this.info.useLegacyEmbeds()||(e=i.extend(e,{socialsharing:this.$("#socialsharing").is(":checked"),annotations:this.$("#annotations").is(":checked"),captionsearch:this.$("#captionsearch").is(":checked"),attachments:this.$("#attachments").is(":checked"),audiopreviewimage:this.$("#audiopreviewimage").is(":checked"),links:this.$("#links").is(":checked"),metadata:this.$("#metadata").is(":checked"),dateproduced:this.$("#dateproduced").is(":checked"),embedcode:this.$("#embedcode").is(":checked"),download:this.$("#download").is(":checked")}));var t=this.$("#size").val();if(t&&"original"!==t){var n=t.split("x");i.extend(e,{width:parseInt(n[0],10),height:parseInt(n[1],10)})}else this.encoding&&!this.encoding.isNew()&&i.extend(e,{width:this.encoding.getWidth(),height:this.encoding.getHeight()});this.field.model.set(e)},renderSize:function(){var e=this.field.model.get("width"),t=this.field.model.get("height"),i=16/9,n=[];e&&t?i=e/t:this.encoding.id&&(e=this.encoding.getWidth(),t=this.encoding.getHeight(),i=this.encoding.getRatio()),n=a.getAvailableDimensions(i),this.$(".size").append(this.sizesTemplate({sizes:n,target:a.findClosestDimension(n,this.config.defaultVideoWidth||e)}))},render:function(){var e="";e=this.info.useLegacyEmbeds()?this.legacyTemplate({Globalize:n,model:this.field.model,isAudio:this.encoding&&this.encoding.isAudio()}):this.template({Globalize:n,model:this.field.model,isAudio:this.encoding&&this.encoding.isAudio()}),this.$el.html(e),this.encoding&&this.renderSize();var i=this.field.model.get("content");this.$el.dialog({title:this.unencode(i?i.Title:this.field.model.get("id")),modal:!0,autoOpen:!1,draggable:!1,resizable:!1,dialogClass:"ev-dialog",width:Math.min(680,t(window).width()-this.config.dialogMargin),height:Math.min(260,t(window).height()-this.config.dialogMargin),closeText:n.formatMessage("Close")})}})}),define("text!ev-script/templates/playlist-embed.html",[],function(){return'<iframe src="<%- ensembleUrl %>/app/plugin/embed.aspx?DestinationID=<%- modelId %>&playlistEmbed=true&isNewPluginEmbed=true&hideControls=true&displayTitle=true&displayEmbedCode=<%- displayEmbedCode %>&displayStatistics=<%- displayStatistics %>&displayVideoDuration=<%- displayDuration %>&displayAttachments=<%- displayAttachments %>&displayAnnotations=<%- displayAnnotations %>&displayLinks=<%- displayLinks %>&displayCredits=<%- displayCredits %>&displaySharing=<%- displaySharing %>&autoPlay=<%- autoPlay %>&showCaptions=<%- showCaptions %>&displayDateProduced=<%- displayDateProduced %>&audioPreviewImage=<%- audioPreviewImage %>&displayCaptionSearch=<%- displayCaptionSearch %>&<% if (isShowcase) { print(showcaseParams); } else { print(playlistParams); } %>"\n        frameborder="0"\n        style="width:<%- width %>px;height:<%- height %>px;"\n        width="<%- width %>"\n        height="<%- height %>"\n        allowfullscreen>\n</iframe>\n'}),define("text!ev-script/templates/playlist-embed-legacy.html",[],function(){return'<iframe src="<%- ensembleUrl %>/app/plugin/embed.aspx?DestinationID=<%- modelId %>"\n        frameborder="0"\n        style="width:<%- width %>px;height:<%- height %>px;"\n        width="<%- width %>"\n        height="<%- height %>"\n        allowfullscreen>\n</iframe>\n'}),define("text!ev-script/templates/playlist-embed-playlist-params.html",[],function(){return"orderBy=<%- playlistSortBy %>&orderByDirection=<%- playlistSortDirection %><% if (playlistSearchString) { print('&searchString=' + playlistSearchString); } %><% if (playlistCategory) { print('&categoryID=' + playlistCategory); } %><% if (playlistNumberOfResults) { print('&resultsCount=' + playlistNumberOfResults); } %>"}),define("text!ev-script/templates/playlist-embed-showcase-params.html",[],function(){return"displayShowcase=true<% if (categoryList) { %>&displayCategoryList=true&categoryOrientation=<%- categoryOrientation %><% } %>"}),define("ev-script/views/playlist-embed",["require","underscore","ev-script/views/embed","text!ev-script/templates/playlist-embed.html","text!ev-script/templates/playlist-embed-legacy.html","text!ev-script/templates/playlist-embed-playlist-params.html","text!ev-script/templates/playlist-embed-showcase-params.html"],function(e){"use strict";var t=e("underscore"),i=e("ev-script/views/embed");return i.extend({template:t.template(e("text!ev-script/templates/playlist-embed.html")),legacyTemplate:t.template(e("text!ev-script/templates/playlist-embed-legacy.html")),playlistParamsTemplate:t.template(e("text!ev-script/templates/playlist-embed-playlist-params.html")),showcaseParamsTemplate:t.template(e("text!ev-script/templates/playlist-embed-showcase-params.html")),initialize:function(e){i.prototype.initialize.call(this,e)},render:function(){var e="";if(this.info.useLegacyEmbeds())e=this.legacyTemplate({modelId:this.model.get("id"),width:this.getFrameWidth(),height:this.getFrameHeight(),ensembleUrl:this.config.ensembleUrl});else{var i={modelId:this.model.get("id"),width:this.getFrameWidth(),height:this.getFrameHeight(),ensembleUrl:this.config.ensembleUrl,displayEmbedCode:this.model.get("embedcode"),displayStatistics:this.model.get("statistics"),displayDuration:this.model.get("duration"),displayAttachments:this.model.get("attachments"),displayAnnotations:this.model.get("annotations"),displayLinks:this.model.get("links"),displayCredits:this.model.get("credits"),displaySharing:this.model.get("socialsharing"),autoPlay:this.model.get("autoplay"),showCaptions:this.model.get("showcaptions"),displayDateProduced:this.model.get("dateproduced"),audioPreviewImage:this.model.get("audiopreviewimage"),displayCaptionSearch:this.model.get("captionsearch")};if("showcase"===this.model.get("layout")){var n=this.model.get("showcaseLayout");i=t.extend(i,{isShowcase:!0,showcaseParams:this.showcaseParamsTemplate({categoryList:n.categoryList,categoryOrientation:n.categoryOrientation})})}else{var r=this.model.get("playlistLayout");i=t.extend(i,{isShowcase:!1,playlistParams:this.playlistParamsTemplate({playlistSortBy:r.playlistSortBy,playlistSortDirection:r.playlistSortDirection,playlistSearchString:r.playlistSearchString,playlistCategory:r.playlistCategory,playlistNumberOfResults:r.playlistNumberOfResults})})}e=this.template(i)}this.$el.html(e)}})}),define("ev-script/views/playlist-preview",["require","ev-script/views/preview","ev-script/views/playlist-embed"],function(e){"use strict";var t=e("ev-script/views/preview"),i=e("ev-script/views/playlist-embed");return t.extend({initialize:function(e){t.prototype.initialize.call(this,e)},embedClass:i})}),define("text!ev-script/templates/playlist-result.html",[],function(){return'<tr class="<%= (index % 2 ? \'odd\' : \'even\') %>">\n    <td class="content-actions">\n        <div class="action-links">\n            <a class="action-add" href="#" title="<%= Globalize.formatMessage(\'Choose {0}\', item.get(\'Name\')) %>" rel="<%= item.get(\'ID\') %>">\n                <i class="fa fa-plus-circle fa-lg"></i><span><%= Globalize.formatMessage(\'Choose\') %></span>\n            </a>\n            <a class="action-preview" href="#" title="<%= Globalize.formatMessage(\'Preview: {0}\', item.get(\'Name\')) %>" rel="<%= item.get(\'ID\') %>">\n                <i class="fa fa-play-circle fa-lg"></i><span><%= Globalize.formatMessage(\'Preview: {0}\', item.get(\'Name\')) %></span>\n            </a>\n        </div>\n    </td>\n    <td class="content-meta">\n        <% if (item.get(\'IsSecure\')) { print(\'<span class="item-security"><i class="fa fa-lock fa-lg"></i></span>\'); } %>\n        <span><%- item.get(\'Name\') %></span>\n    </td>\n</tr>\n'}),define("ev-script/views/playlist-results",["require","underscore","jquery","ev-script/views/results","ev-script/models/playlist-settings","ev-script/views/playlist-preview","text!ev-script/templates/playlist-result.html"],function(e){"use strict";var t=e("underscore"),i=(e("jquery"),e("ev-script/views/results")),n=e("ev-script/models/playlist-settings"),r=e("ev-script/views/playlist-preview");return i.extend({modelClass:n,previewClass:r,resultTemplate:t.template(e("text!ev-script/templates/playlist-result.html")),initialize:function(e){i.prototype.initialize.call(this,e)},refreshHandler:function(e){e.preventDefault(),this.appEvents.trigger("reloadPlaylists")}})}),define("ev-script/collections/playlists",["require","ev-script/collections/base","ev-script/util/cache"],function(e){"use strict";var t=e("ev-script/collections/base"),i=e("ev-script/util/cache");return t.extend({initialize:function(e,i){t.prototype.initialize.call(this,e,i),this.libraryId=i.libraryId||"",this.filterValue=i.filterValue||"",this.pageIndex=1},_cache:function(e,t){var n=null,r=this.auth.getUser(),a=r?i.getUserCache(this.config.ensembleUrl,r.id):null;if(a){var s=a.get("playlists");s||a.set("playlists",s=new i.Cache),n=s[t?"set":"get"](e,t)}return n},getCached:function(e){return this._cache(e)},setCached:function(e,t){return this._cache(e,t)},clearCache:function(){var e=this.auth.getUser(),t=e?i.getUserCache(this.config.ensembleUrl,e.id):null;t&&t.set("playlists",null)},url:function(){var e,t,i,n=this.config.ensembleUrl+"/api/Playlists",r="PageSize="+this.config.pageSize,a="PageIndex="+this.pageIndex;return this.info.get("ApplicationVersion")?(t="FilterOn=Name",i="FilterValue="+encodeURIComponent(this.filterValue),e=n+"/"+encodeURIComponent(this.libraryId)+"?"+r+"&"+a+(this.filterValue?"&"+t+"&"+i:"")):(t="FilterOn=LibraryId",i="FilterValue="+encodeURIComponent(this.libraryId),e=n+"?"+r+"&"+a+"&"+t+"&"+i),this.config.urlCallback?this.config.urlCallback(e):e}})}),define("ev-script/views/playlist-picker",["require","jquery","underscore","ev-script/views/picker","ev-script/views/unit-selects","ev-script/views/search","ev-script/views/playlist-results","ev-script/collections/playlists"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("ev-script/views/picker"),r=e("ev-script/views/unit-selects"),a=e("ev-script/views/search"),s=e("ev-script/views/playlist-results"),o=e("ev-script/collections/playlists");return n.extend({initialize:function(e){n.prototype.initialize.call(this,e),i.bindAll(this,"loadPlaylists","changeLibrary","handleSubmit"),this.$filterBlock=this.$("div.ev-filter-block"),this.info.get("ApplicationVersion")&&(this.searchView=new a({id:this.id+"-search",tagName:"div",className:"ev-search",picker:this,appId:this.appId,callback:i.bind(function(){this.loadPlaylists()},this)}),this.$filterBlock.prepend(this.searchView.$el),this.searchView.render()),this.unitSelects=new r({id:this.id+"-unit-selects",tagName:"div",className:"ev-unit-selects",picker:this,appId:this.appId}),this.$filterBlock.prepend(this.unitSelects.$el),this.resultsView=new s({el:this.$("div.ev-results"),picker:this,appId:this.appId}),this.$el.append(this.resultsView.$el)},events:{"click a.action-add":"chooseItem","change .unit-selects select.libraries":"changeLibrary","submit .unit-selects":"handleSubmit"},changeLibrary:function(e){this.loadPlaylists()},handleSubmit:function(e){this.loadPlaylists(),e.preventDefault()},showPicker:function(){n.prototype.showPicker.call(this),this.unitSelects.loadOrgs(),this.unitSelects.$("select").filter(":visible").first().focus()},loadPlaylists:function(){var e=t.trim(this.model.get("search").toLowerCase()),n=this.model.get("libraryId"),r=new o({},{libraryId:n,filterValue:e,appId:this.appId}),a=i.bind(function(){r.clearCache(),this.loadPlaylists()},this);r.fetch({picker:this,cacheKey:n+e,success:i.bind(function(e,t,n){var r=e.totalResults=parseInt(t.Pager.TotalRecords,10),a=i.size(t.Data);a===r?e.hasMore=!1:(e.hasMore=!0,e.pageIndex+=1),this.resultsView.collection=e,this.resultsView.render(),this.resizeResults()},this),error:i.bind(function(e,t,n){this.ajaxError(t,i.bind(function(){this.loadPlaylists()},this))},this)}),this.appEvents.off("reloadPlaylists").on("reloadPlaylists",a)},resizeResults:function(){this.config.fitToParent&&this.resultsView.setHeight(this.$el.height()-this.hider.$el.outerHeight(!0)-this.$filterBlock.outerHeight(!0))}})}),define("ev-script/collections/categories",["require","backbone","ev-script/collections/base","underscore"],function(e){"use strict";var t=e("backbone"),i=e("ev-script/collections/base"),n=e("underscore");return i.extend({initialize:function(e,t){i.prototype.initialize.call(this,e,t),this.requiresAuth=!1,this.playlistId=t.playlistId||""},url:function(){var e=this.config.ensembleUrl+"/app/api/category/list.json/"+this.playlistId;return this.config.urlCallback?this.config.urlCallback(e):e},parse:function(e){return e.dataSet?e.dataSet.category||[]:[]},sync:function(e,i,r){return n.extend(r,{dataFilter:function(e){var t=e.match(/\{[\s\S]*\}/);return t?t[0]:e}}),t.sync.call(this,e,i,r)}})}),define("text!ev-script/templates/playlist-settings.html",[],function(){return'<form>\n    <fieldset>\n        <div class="accordion">\n            <h4><%= Globalize.formatMessage(\'Choose Layout\') %></h4>\n            <div>\n                <div class="fieldWrap inline-option">\n                    <input id="playlist" class="form-radio" <% if (model.get(\'layout\') === \'playlist\') { print(\'checked="checked"\'); } %> name="layout" value="playlist" type="radio"/>\n                    <label for="playlist"><%= Globalize.formatMessage(\'Playlist\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="showcase" class="form-radio" <% if (model.get(\'layout\') === \'showcase\') { print(\'checked="checked"\'); } %> name="layout" value="showcase" type="radio"/>\n                    <label for="showcase"><%= Globalize.formatMessage(\'Showcase\') %></label>\n                </div>\n            </div>\n            <h4><%= Globalize.formatMessage(\'Layout Options\') %></h4>\n            <div>\n                <div class="playlistOptions" <% if (model.get(\'layout\') === \'showcase\') { print(\'style="display:none;"\'); } %>>\n                    <div class="fieldWrap">\n                        <label for="playlistSortBy"><%= Globalize.formatMessage(\'Sort By\') %></label>\n                        <select id="playlistSortBy" class="form-select">\n                            <option value="videoDate" <% if (model.get(\'playlistLayout\').playlistSortBy === \'videoDate\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Date Added\') %></option>\n                            <option value="videoDateProduced" <% if (model.get(\'playlistLayout\').playlistSortBy === \'videoDateProduced\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Date Produced\') %></option>\n                            <option value="videoDescription" <% if (model.get(\'playlistLayout\').playlistSortBy === \'videoDescription\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Description\') %></option>\n                            <option value="videoTitle" <% if (model.get(\'playlistLayout\').playlistSortBy === \'videoTitle\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Title\') %></option>\n                            <option value="videoDuration" <% if (model.get(\'playlistLayout\').playlistSortBy === \'videoDuration\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Duration\') %></option>\n                            <option value="videoKeywords" <% if (model.get(\'playlistLayout\').playlistSortBy === \'videoKeywords\') { print(\'selected="selected"\'); } %>><%= Globalize.formatMessage(\'Keywords\') %></option>\n                            <!-- <option value="videoCustomPosition">Custom Order</option> -->\n                        </select>\n                    </div>\n                    <div>\n                        <div class="fieldWrap inline-option">\n                            <input id="playlistSortDirectionAsc" class="form-radio" <% if (model.get(\'playlistLayout\').playlistSortDirection === \'asc\') { print(\'checked="checked"\'); } %> name="playlistSortDirection" value="asc" type="radio"/>\n                            <label for="playlist"><%= Globalize.formatMessage(\'Ascending\') %></label>\n                        </div>\n                        <div class="fieldWrap inline-option">\n                            <input id="playlistSortDirectionDesc" class="form-radio" <% if (model.get(\'playlistLayout\').playlistSortDirection === \'desc\') { print(\'checked="checked"\'); } %> name="playlistSortDirection" value="desc" type="radio"/>\n                            <label for="playlist"><%= Globalize.formatMessage(\'Descending\') %></label>\n                        </div>\n                    </div>\n                    <div>\n                        <div class="fieldWrap">\n                            <label for="playlistSearchString"><%= Globalize.formatMessage(\'Search String\') %></label>\n                            <input id="playlistSearchString" class="form-text" name="playlistSearchString" value="<%- model.get(\'playlistLayout\').playlistSearchString %>" type="text"/>\n                        </div>\n                        <div class="fieldWrap">\n                            <label for="playlistCategory"><%= Globalize.formatMessage(\'Category\') %></label>\n                            <select id="playlistCategory" class="form-select" name="playlistCategory">\n                                <option value="" <% if (!model.get(\'playlistLayout\').playlistCategory) { print(\'selected="selected"\'); } %>>-- <%= Globalize.formatMessage(\'None\') %> --</option>\n                                <% categories.each(function(category) { %>\n                                    <option value="<%= category.id %>" <% if (model.get(\'playlistLayout\').playlistCategory === category.id) { print(\'selected="selected"\'); } %>><%- category.get(\'categoryName\') %></option>\n                                <% }); %>\n                            </select>\n                        </div>\n                        <div class="fieldWrap">\n                            <label for="playlistNumberOfResults"><%= Globalize.formatMessage(\'Number of Results\') %></label>\n                            <input id="playlistNumberOfResults" class="form-text" name="playlistNumberOfResults" value="<%- model.get(\'playlistLayout\').playlistNumberOfResults %>" type="text"/>\n                        </div>\n                    </div>\n                </div>\n                <div class="showcaseOptions" <% if (model.get(\'layout\') === \'playlist\') { print(\'style="display:none;"\'); } %>>\n<!--\n                    <div class="fieldWrap">\n                        <input id="featuredContent" class="form-checkbox" type="checkbox" name="featuredContent" <% if (model.get(\'showcaseLayout\').featuredContent) { print(\'checked="checked"\'); } %>/>\n                        <label for="featuredContent">Featured Content</label>\n                    </div>\n -->\n                    <div class="fieldWrap">\n                        <input id="categoryList" class="form-checkbox" type="checkbox" name="categoryList" <% if (model.get(\'showcaseLayout\').categoryList) { print(\'checked="checked"\'); } %>/>\n                        <label for="categoryList"><%= Globalize.formatMessage(\'Category List\') %></label>\n                    </div>\n                    <div>\n                        <div class="fieldWrap">\n                            <input id="categoryOrientationHorizontal" class="form-radio" <% if (model.get(\'showcaseLayout\').categoryOrientation === \'horizontal\') { print(\'checked="checked"\'); } %> <% if (!model.get(\'showcaseLayout\').categoryList) { print(\'disabled\'); } %> name="categoryOrientation" value="horizontal" type="radio"/>\n                            <label for="playlist"><%= Globalize.formatMessage(\'Horizontal\') %></label>\n                        </div>\n                        <div class="fieldWrap">\n                            <input id="categoryOrientationVertical" class="form-radio" <% if (model.get(\'showcaseLayout\').categoryOrientation === \'vertical\') { print(\'checked="checked"\'); } %> <% if (!model.get(\'showcaseLayout\').categoryList) { print(\'disabled\'); } %> name="categoryOrientation" value="vertical" type="radio"/>\n                            <label for="playlist"><%= Globalize.formatMessage(\'Vertical\') %></label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <h4><%= Globalize.formatMessage(\'Content Details\') %></h4>\n            <div>\n                <div class="fieldWrap inline-option">\n                    <input id="embedcode" class="form-checkbox" <% if (!isSecure && model.get(\'embedcode\')) { print(\'checked="checked"\'); } %> name="embedcode" type="checkbox" <% if (isSecure) { print(\'disabled\') } %> />\n                    <label for="embedcode"><%= Globalize.formatMessage(\'Embed Code\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="statistics" class="form-checkbox" <% if (model.get(\'statistics\')) { print(\'checked="checked"\'); } %> name="statistics" type="checkbox"/>\n                    <label for="statistics"><%= Globalize.formatMessage(\'Statistics\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="duration" class="form-checkbox" <% if (model.get(\'duration\')) { print(\'checked="checked"\'); } %> name="duration" type="checkbox"/>\n                    <label for="duration"><%= Globalize.formatMessage(\'Duration\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="attachments" class="form-checkbox" <% if (model.get(\'attachments\')) { print(\'checked="checked"\'); } %> name="attachments" type="checkbox"/>\n                    <label for="attachments"><%= Globalize.formatMessage(\'Attachments\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="annotations" class="form-checkbox" <% if (model.get(\'annotations\')) { print(\'checked="checked"\'); } %> name="annotations" type="checkbox"/>\n                    <label for="annotations"><%= Globalize.formatMessage(\'Annotations\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="links" class="form-checkbox" <% if (model.get(\'links\')) { print(\'checked="checked"\'); } %> name="links" type="checkbox"/>\n                    <label for="links"><%= Globalize.formatMessage(\'Links\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="credits" class="form-checkbox" <% if (model.get(\'credits\')) { print(\'checked="checked"\'); } %> name="credits" type="checkbox"/>\n                    <label for="credits"><%= Globalize.formatMessage(\'Credits\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="socialsharing" class="form-checkbox" <% if (!isSecure && model.get(\'socialsharing\')) { print(\'checked="checked"\'); } %> name="socialsharing" type="checkbox" <% if (isSecure) { print(\'disabled\') } %> />\n                    <label for="socialsharing"><%= Globalize.formatMessage(\'Social Tools\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="autoplay" class="form-checkbox" <% if (model.get(\'autoplay\')) { print(\'checked="checked"\'); } %>  name="autoplay" type="checkbox"/>\n                    <label for="autoplay"><%= Globalize.formatMessage(\'Auto Play (PC Only)\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="showcaptions" class="form-checkbox" <% if (model.get(\'showcaptions\')) { print(\'checked="checked"\'); } %>  name="showcaptions" type="checkbox"/>\n                    <label for="showcaptions"><%= Globalize.formatMessage(\'Captions "On" By Default\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="dateproduced" class="form-checkbox" <% if (model.get(\'dateproduced\')) { print(\'checked="checked"\'); } %> name="dateproduced" type="checkbox"/>\n                    <label for="dateproduced"><%= Globalize.formatMessage(\'Date Produced\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="audiopreviewimage" class="form-checkbox" <% if (model.get(\'audiopreviewimage\')) { print(\'checked="checked"\'); } %> name="audiopreviewimage" type="checkbox"/>\n                    <label for="audiopreviewimage"><%= Globalize.formatMessage(\'Audio Preview Image\') %></label>\n                </div>\n                <div class="fieldWrap inline-option">\n                    <input id="captionsearch" class="form-checkbox" <% if (model.get(\'captionsearch\')) { print(\'checked="checked"\'); } %> name="captionsearch" type="checkbox"/>\n                    <label for="captionsearch"><%= Globalize.formatMessage(\'Caption Search\') %></label>\n                </div>\n            </div>\n        </div>\n        <div class="form-actions">\n            <button type="submit" class="form-submit action-submit" value="Submit"><i class="fa fa-save"></i><span><%= Globalize.formatMessage(\'Save\') %></span></button>\n            <button type="button" class="form-submit action-cancel" value="Cancel"><i class="fa fa-times"></i><span><%= Globalize.formatMessage(\'Cancel\') %></span></button>\n        </div>\n    </fieldset>\n</form>\n'}),define("ev-script/views/playlist-settings",["require","jquery","underscore","globalize","ev-script/views/settings","ev-script/collections/categories","jquery-ui","text!ev-script/templates/playlist-settings.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("ev-script/views/settings"),a=e("ev-script/collections/categories");return e("jquery-ui"),r.extend({template:i.template(e("text!ev-script/templates/playlist-settings.html")),initialize:function(e){r.prototype.initialize.call(this,e),i.bindAll(this,"changeLayout","changeCategoryList"),this.categories=e.categories,this.categories.on("reset",i.bind(function(){this.render()},this))},events:{submit:"submitHandler","click .action-cancel":"cancelHandler",'change input[name="layout"]':"changeLayout",'change input[name="categoryList"]':"changeCategoryList"},updateModel:function(){var e=this.field.model.get("content"),t={layout:this.$('input[name="layout"]:checked').val(),embedcode:(!e||!e.IsSecure)&&this.$("#embedcode").is(":checked"),statistics:this.$("#statistics").is(":checked"),duration:this.$("#duration").is(":checked"),attachments:this.$("#attachments").is(":checked"),annotations:this.$("#annotations").is(":checked"),links:this.$("#links").is(":checked"),credits:this.$("#credits").is(":checked"),socialsharing:(!e||!e.IsSecure)&&this.$("#socialsharing").is(":checked"),autoplay:this.$("#autoplay").is(":checked"),showcaptions:this.$("#showcaptions").is(":checked"),dateproduced:this.$("#dateproduced").is(":checked"),audiopreviewimage:this.$("#audiopreviewimage").is(":checked"),captionsearch:this.$("#captionsearch").is(":checked")};"playlist"===t.layout?t.playlistLayout={playlistSortBy:this.$("#playlistSortBy option:selected").val(),playlistSortDirection:this.$('input[name="playlistSortDirection"]:checked').val(),playlistSearchString:this.$("#playlistSearchString").val(),playlistCategory:this.$("#playlistCategory option:selected").val(),playlistNumberOfResults:this.$("#playlistNumberOfResults").val()}:t.showcaseLayout={categoryList:this.$("#categoryList").is(":checked"),categoryOrientation:this.$('input[name="categoryOrientation"]:checked').val()},this.field.model.set(t)},render:function(){var e=this.field.model.get("content"),i=this.template({Globalize:n,model:this.field.model,isAudio:this.encoding&&this.encoding.isAudio(),isSecure:e&&e.IsSecure,categories:this.categories||new a([],{})});this.$el.html(i),this.$(".accordion").accordion({active:2,heightStyle:"content",collapsible:!0}),this.$el.dialog({title:this.unencode(e?e.Name:this.field.model.get("id")),modal:!0,autoOpen:!1,draggable:!1,resizable:!1,dialogClass:"ev-dialog",width:Math.min(680,t(window).width()-this.config.dialogMargin),height:Math.min(420,t(window).height()-this.config.dialogMargin),closeText:n.formatMessage("Close")})},changeLayout:function(e){"playlist"===e.currentTarget.value?(this.$(".playlistOptions").show(),this.$(".showcaseOptions").hide()):(this.$(".playlistOptions").hide(),this.$(".showcaseOptions").show())},changeCategoryList:function(e){t(e.currentTarget).is(":checked")?(this.$("#categoryOrientationHorizontal").attr("disabled",!1),this.$("#categoryOrientationVertical").attr("disabled",!1)):(this.$("#categoryOrientationHorizontal").attr("disabled",!0),this.$("#categoryOrientationVertical").attr("disabled",!0))}})}),define("text!ev-script/templates/field.html",[],function(){return'<div class="logo">\n    <a target="_blank" href="<%= ensembleUrl %>"><span><%= Globalize.formatMessage(\'Ensemble Logo\') %></span></a>\n</div>\n<% if (modelId) { %>\n    <% if (thumbnailUrl) { %>\n        <div class="thumbnail">\n            <img alt="<%= Globalize.formatMessage(\'Media thumbnail\') %>" src="<%= thumbnailUrl %>"/>\n        </div>\n    <% } %>\n    <div class="title"><%= name %></div>\n    <div class="ev-actions">\n        <a href="#" class="action-choose" title="<%= Globalize.formatMessage(\'Change {0}\', label) %>"><i class="fa fa-folder-open fa-lg"></i><span><%= Globalize.formatMessage(\'Change {0}\', label) %><span></a>\n        <a href="#" class="action-preview" title="<%= Globalize.formatMessage(\'Preview:\') %> <%= name %>"><i class="fa fa-play-circle fa-lg"></i><span><%= Globalize.formatMessage(\'Preview:\') %> <%= name %><span></a>\n        <% if (type === \'video\' || showPlaylistOptions) { %>\n            <a href="#" class="action-options" title="<%= Globalize.formatMessage(\'{0} Embed Options\', label) %>"><i class="fa fa-cog fa-lg"></i><span><%= Globalize.formatMessage(\'{0} Embed Options\', label) %><span></a>\n        <% } %>\n        <a href="#" class="action-remove" title="<%= Globalize.formatMessage(\'Remove {0}\', label) %>"><i class="fa fa-minus-circle fa-lg"></i><span><%= Globalize.formatMessage(\'Remove {0}\', label) %><span></a>\n    </div>\n<% } else { %>\n    <div class="title"><em><%= Globalize.formatMessage(\'Add {0}\', label) %></em></div>\n    <div class="ev-actions">\n        <a href="#" class="action-choose" title="<%= Globalize.formatMessage(\'Choose {0}\', label) %>"><i class="fa fa-folder-open fa-lg"></i><span><%= Globalize.formatMessage(\'Choose {0}\', label) %><span></a>\n    </div>\n<% } %>\n';
}),define("ev-script/views/field",["require","jquery","underscore","globalize","ev-script/views/base","ev-script/models/video-settings","ev-script/models/playlist-settings","ev-script/views/video-picker","ev-script/views/video-settings","ev-script/views/video-preview","ev-script/models/video-encoding","ev-script/views/playlist-picker","ev-script/views/playlist-settings","ev-script/views/playlist-preview","ev-script/collections/categories","text!ev-script/templates/field.html"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("globalize"),r=e("ev-script/views/base"),a=e("ev-script/models/video-settings"),s=e("ev-script/models/playlist-settings"),o=e("ev-script/views/video-picker"),l=e("ev-script/views/video-settings"),c=e("ev-script/views/video-preview"),u=e("ev-script/models/video-encoding"),d=e("ev-script/views/playlist-picker"),h=e("ev-script/views/playlist-settings"),p=e("ev-script/views/playlist-preview"),f=e("ev-script/collections/categories");return r.extend({template:i.template(e("text!ev-script/templates/field.html")),initialize:function(e){r.prototype.initialize.call(this,e),i.bindAll(this,"chooseHandler","optionsHandler","removeHandler","previewHandler","resizePicker"),this.$field=e.$field,this.showChoose=!0;var t={id:this.id+"-picker",tagName:"div",className:"ev-"+this.model.get("type")+"-picker",field:this,appId:this.appId},n={id:this.id+"-settings",tagName:"div",className:"ev-settings",field:this,appId:this.appId};this.model instanceof a?(this.modelClass=a,this.pickerClass=o,this.settingsClass=l,this.previewClass=c,this.encoding=new u({},{appId:this.appId}),this.model.isNew()||(this.encoding.set({fetchId:this.model.id}),this.encoding.fetch()),this.model.on("change:id",i.bind(function(){this.model.id?(this.encoding.set({fetchId:this.model.id}),this.encoding.fetch({success:i.bind(function(e){this.encoding.updateSettingsModel(this.model),this.encoding.updateSettingsModel(this.picker.model)},this)})):this.encoding.clear()},this)),i.extend(n,{encoding:this.encoding})):this.model instanceof s&&(this.modelClass=s,this.pickerClass=d,this.settingsClass=h,this.previewClass=p,this.categories=new f([],{appId:this.appId}),this.model.isNew()||(this.categories.playlistId=this.model.id,this.categories.fetch({reset:!0})),this.model.on("change:id",i.bind(function(){this.model.id?(this.categories.playlistId=this.model.id,this.categories.fetch({reset:!0})):(this.categories.reset([],{silent:!0}),this.categories.playlistId="")},this)),i.extend(n,{categories:this.categories})),this.picker=new this.pickerClass(i.extend({},t,{model:new this.modelClass(this.model.toJSON())})),this.settings=new this.settingsClass(n),this.$field.after(this.picker.$el),this.renderActions(),this.model.on("change",i.bind(function(){if(!this.model.isNew()){var e=this.model.toJSON();this.$field.val(JSON.stringify(e)),this.appEvents.trigger("fieldUpdated",this.$field,e),this.renderActions()}},this)),this.appEvents.on("showPicker",function(e){this.id===e&&(this.$(".action-choose").hide(),this.showChoose=!1,this.config.hidePickers&&this.appEvents.trigger("hidePickers",this.id),this.resizePicker())},this),this.appEvents.on("hidePicker",function(e){this.id===e&&(this.$(".action-choose").show(),this.showChoose=!0)},this),this.appEvents.on("hidePickers",function(e){e&&this.id===e||(this.$(".action-choose").show(),this.showChoose=!0)},this),this.appEvents.on("resize",i.bind(function(){this.resizePicker()},this))},events:{"click .action-choose":"chooseHandler","click .action-preview":"previewHandler","click .action-options":"optionsHandler","click .action-remove":"removeHandler"},chooseHandler:function(e){this.appEvents.trigger("showPicker",this.id),e.preventDefault()},optionsHandler:function(e){this.settings.show(),e.preventDefault()},removeHandler:function(e){this.model.clear(),this.$field.val(""),this.model.set(this.model.defaults,{silent:!0}),this.appEvents.trigger("fieldUpdated",this.$field),this.renderActions(),e.preventDefault()},previewHandler:function(e){var t=e.currentTarget;new this.previewClass({el:t,encoding:this.encoding,model:this.model,picker:this.picker,appId:this.appId});e.preventDefault()},renderActions:function(){var e,i,r,s,o=this.config.ensembleUrl;if(this.model instanceof a?(i=n.formatMessage("Media"),r="video"):(i=n.formatMessage("Playlist"),r="playlist"),this.model.id){e=this.model.id;var l=this.model.get("content");if(l){e=l.Name||l.Title;var c=this.info.checkVersion(">=4.5.0")?"/api/data/image/":"/app/assets/",u=new RegExp("^"+o.toLocaleLowerCase()+c);l.ThumbnailUrl&&u.test(l.ThumbnailUrl.toLocaleLowerCase())&&(s=l.ThumbnailUrl)}}this.$actions||(this.$actions=t('<div class="ev-field"/>'),this.$field.after(this.$actions)),this.$actions.html(this.template({Globalize:n,ensembleUrl:o,modelId:this.model.id,label:i,type:r,name:e,thumbnailUrl:s,showPlaylistOptions:!this.info.useLegacyEmbeds()})),this.showChoose||this.$(".action-choose").hide()},resizePicker:function(){this.config.fitToParent&&this.picker.setHeight(this.$el.height()-this.$actions.outerHeight(!0))}})}),function(e){function t(e,t){if(e instanceof r)return e;if("string"!=typeof e)return null;if(e.length>B)return null;var i=t?V[ce]:V[se];if(!i.test(e))return null;try{return new r(e,t)}catch(e){return null}}function i(e,i){var n=t(e,i);return n?n.version:null}function n(e,i){var n=t(e.trim().replace(/^[=v]+/,""),i);return n?n.version:null}function r(e,t){if(e instanceof r){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>B)throw new TypeError("version is longer than "+B+" characters");if(!(this instanceof r))return new r(e,t);this.loose=t;var i=e.trim().match(t?V[ce]:V[se]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>F||this.major<0)throw new TypeError("Invalid major version");if(this.minor>F||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>F||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<F)return t}return e}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}function a(e,t,i,n){"string"==typeof i&&(n=i,i=void 0);try{return new r(e,i).inc(t,n).version}catch(e){return null}}function s(e,i){if(y(e,i))return null;var n=t(e),r=t(i);if(n.prerelease.length||r.prerelease.length){for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return"pre"+a;return"prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return a}function o(e,t){var i=De.test(e),n=De.test(t);return i&&n&&(e=+e,t=+t),i&&!n?-1:n&&!i?1:e<t?-1:e>t?1:0}function l(e,t){return o(t,e)}function c(e,t){return new r(e,t).major}function u(e,t){return new r(e,t).minor}function d(e,t){return new r(e,t).patch}function h(e,t,i){return new r(e,i).compare(t)}function p(e,t){return h(e,t,!0)}function f(e,t,i){return h(t,e,i)}function m(t,i){return t.sort(function(t,n){return e.compare(t,n,i)})}function g(t,i){return t.sort(function(t,n){return e.rcompare(t,n,i)})}function v(e,t,i){return h(e,t,i)>0}function b(e,t,i){return h(e,t,i)<0}function y(e,t,i){return 0===h(e,t,i)}function w(e,t,i){return 0!==h(e,t,i)}function L(e,t,i){return h(e,t,i)>=0}function k(e,t,i){return h(e,t,i)<=0}function x(e,t,i,n){var r;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),r=e===i;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),r=e!==i;break;case"":case"=":case"==":r=y(e,i,n);break;case"!=":r=w(e,i,n);break;case">":r=v(e,i,n);break;case">=":r=L(e,i,n);break;case"<":r=b(e,i,n);break;case"<=":r=k(e,i,n);break;default:throw new TypeError("Invalid operator: "+t)}return r}function C(e,t){if(e instanceof C){if(e.loose===t)return e;e=e.value}return this instanceof C?(this.loose=t,this.parse(e),void(this.semver===Re?this.value="":this.value=this.operator+this.semver.version)):new C(e,t)}function S(e,t){if(e instanceof S&&e.loose===t)return e;if(!(this instanceof S))return new S(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function M(e,t){return new S(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function I(e,t){return e=P(e,t),e=z(e,t),e=N(e,t),e=D(e,t)}function A(e){return!e||"x"===e.toLowerCase()||"*"===e}function z(e,t){return e.trim().split(/\s+/).map(function(e){return E(e,t)}).join(" ")}function E(e,t){var i=t?V[Le]:V[we];return e.replace(i,function(e,t,i,n,r){var a;return A(t)?a="":A(i)?a=">="+t+".0.0 <"+(+t+1)+".0.0":A(n)?a=">="+t+"."+i+".0 <"+t+"."+(+i+1)+".0":r?("-"!==r.charAt(0)&&(r="-"+r),a=">="+t+"."+i+"."+n+r+" <"+t+"."+(+i+1)+".0"):a=">="+t+"."+i+"."+n+" <"+t+"."+(+i+1)+".0",a})}function P(e,t){return e.trim().split(/\s+/).map(function(e){return T(e,t)}).join(" ")}function T(e,t){var i=t?V[Me]:V[Se];return e.replace(i,function(e,t,i,n,r){var a;return A(t)?a="":A(i)?a=">="+t+".0.0 <"+(+t+1)+".0.0":A(n)?a="0"===t?">="+t+"."+i+".0 <"+t+"."+(+i+1)+".0":">="+t+"."+i+".0 <"+(+t+1)+".0.0":r?("-"!==r.charAt(0)&&(r="-"+r),a="0"===t?"0"===i?">="+t+"."+i+"."+n+r+" <"+t+"."+i+"."+(+n+1):">="+t+"."+i+"."+n+r+" <"+t+"."+(+i+1)+".0":">="+t+"."+i+"."+n+r+" <"+(+t+1)+".0.0"):a="0"===t?"0"===i?">="+t+"."+i+"."+n+" <"+t+"."+i+"."+(+n+1):">="+t+"."+i+"."+n+" <"+t+"."+(+i+1)+".0":">="+t+"."+i+"."+n+" <"+(+t+1)+".0.0",a})}function N(e,t){return e.split(/\s+/).map(function(e){return j(e,t)}).join(" ")}function j(e,t){e=e.trim();var i=t?V[ge]:V[me];return e.replace(i,function(e,t,i,n,r,a){var s=A(i),o=s||A(n),l=o||A(r),c=l;return"="===t&&c&&(t=""),s?e=">"===t||"<"===t?"<0.0.0":"*":t&&c?(o&&(n=0),l&&(r=0),">"===t?(t=">=",o?(i=+i+1,n=0,r=0):l&&(n=+n+1,r=0)):"<="===t&&(t="<",o?i=+i+1:n=+n+1),e=t+i+"."+n+"."+r):o?e=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(e=">="+i+"."+n+".0 <"+i+"."+(+n+1)+".0"),e})}function D(e,t){return e.trim().replace(V[Ne],"")}function R(e,t,i,n,r,a,s,o,l,c,u,d,h){return t=A(i)?"":A(n)?">="+i+".0.0":A(r)?">="+i+"."+n+".0":">="+t,o=A(l)?"":A(c)?"<"+(+l+1)+".0.0":A(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+o,(t+" "+o).trim()}function _(e,t){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length){for(var i=0;i<e.length;i++){if(e[i].semver===Re)return!0;if(e[i].semver.prerelease.length>0){var n=e[i].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}}return!1}return!0}function O(e,t,i){try{t=new S(t,i)}catch(e){return!1}return t.test(e)}function G(e,t,i){return e.filter(function(e){return O(e,t,i)}).sort(function(e,t){return f(e,t,i)})[0]||null}function H(e,t){try{return new S(e,t).range||"*"}catch(e){return null}}function U(e,t,i){return q(e,t,"<",i)}function $(e,t,i){return q(e,t,">",i)}function q(e,t,i,n){e=new r(e,n),t=new S(t,n);var a,s,o,l,c;switch(i){case">":a=v,s=k,o=b,l=">",c=">=";break;case"<":a=b,s=L,o=v,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(O(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var d=t.set[u],h=null,p=null;if(d.forEach(function(e){h=h||e,p=p||e,a(e.semver,h.semver,n)?h=e:o(e.semver,p.semver,n)&&(p=e)}),h.operator===l||h.operator===c)return!1;if((!p.operator||p.operator===l)&&s(e,p.semver))return!1;if(p.operator===c&&o(e,p.semver))return!1}return!0}"object"==typeof module&&module.exports===e&&(e=module.exports=r),e.SEMVER_SPEC_VERSION="2.0.0";var B=256,F=Number.MAX_SAFE_INTEGER||9007199254740991,V=e.re=[],W=e.src=[],K=0,Z=K++;W[Z]="0|[1-9]\\d*";var X=K++;W[X]="[0-9]+";var J=K++;W[J]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Y=K++;W[Y]="("+W[Z]+")\\.("+W[Z]+")\\.("+W[Z]+")";var Q=K++;W[Q]="("+W[X]+")\\.("+W[X]+")\\.("+W[X]+")";var ee=K++;W[ee]="(?:"+W[Z]+"|"+W[J]+")";var te=K++;W[te]="(?:"+W[X]+"|"+W[J]+")";var ie=K++;W[ie]="(?:-("+W[ee]+"(?:\\."+W[ee]+")*))";var ne=K++;W[ne]="(?:-?("+W[te]+"(?:\\."+W[te]+")*))";var re=K++;W[re]="[0-9A-Za-z-]+";var ae=K++;W[ae]="(?:\\+("+W[re]+"(?:\\."+W[re]+")*))";var se=K++,oe="v?"+W[Y]+W[ie]+"?"+W[ae]+"?";W[se]="^"+oe+"$";var le="[v=\\s]*"+W[Q]+W[ne]+"?"+W[ae]+"?",ce=K++;W[ce]="^"+le+"$";var ue=K++;W[ue]="((?:<|>)?=?)";var de=K++;W[de]=W[X]+"|x|X|\\*";var he=K++;W[he]=W[Z]+"|x|X|\\*";var pe=K++;W[pe]="[v=\\s]*("+W[he]+")(?:\\.("+W[he]+")(?:\\.("+W[he]+")(?:"+W[ie]+")?"+W[ae]+"?)?)?";var fe=K++;W[fe]="[v=\\s]*("+W[de]+")(?:\\.("+W[de]+")(?:\\.("+W[de]+")(?:"+W[ne]+")?"+W[ae]+"?)?)?";var me=K++;W[me]="^"+W[ue]+"\\s*"+W[pe]+"$";var ge=K++;W[ge]="^"+W[ue]+"\\s*"+W[fe]+"$";var ve=K++;W[ve]="(?:~>?)";var be=K++;W[be]="(\\s*)"+W[ve]+"\\s+",V[be]=new RegExp(W[be],"g");var ye="$1~",we=K++;W[we]="^"+W[ve]+W[pe]+"$";var Le=K++;W[Le]="^"+W[ve]+W[fe]+"$";var ke=K++;W[ke]="(?:\\^)";var xe=K++;W[xe]="(\\s*)"+W[ke]+"\\s+",V[xe]=new RegExp(W[xe],"g");var Ce="$1^",Se=K++;W[Se]="^"+W[ke]+W[pe]+"$";var Me=K++;W[Me]="^"+W[ke]+W[fe]+"$";var Ie=K++;W[Ie]="^"+W[ue]+"\\s*("+le+")$|^$";var Ae=K++;W[Ae]="^"+W[ue]+"\\s*("+oe+")$|^$";var ze=K++;W[ze]="(\\s*)"+W[ue]+"\\s*("+le+"|"+W[pe]+")",V[ze]=new RegExp(W[ze],"g");var Ee="$1$2$3",Pe=K++;W[Pe]="^\\s*("+W[pe]+")\\s+-\\s+("+W[pe]+")\\s*$";var Te=K++;W[Te]="^\\s*("+W[fe]+")\\s+-\\s+("+W[fe]+")\\s*$";var Ne=K++;W[Ne]="(<|>)?=?\\s*\\*";for(var je=0;je<K;je++)V[je]||(V[je]=new RegExp(W[je]));e.parse=t,e.valid=i,e.clean=n,e.SemVer=r,r.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},r.prototype.inspect=function(){return'<SemVer "'+this+'">'},r.prototype.toString=function(){return this.version},r.prototype.compare=function(e){return e instanceof r||(e=new r(e,this.loose)),this.compareMain(e)||this.comparePre(e)},r.prototype.compareMain=function(e){return e instanceof r||(e=new r(e,this.loose)),o(this.major,e.major)||o(this.minor,e.minor)||o(this.patch,e.patch)},r.prototype.comparePre=function(e){if(e instanceof r||(e=new r(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var i=this.prerelease[t],n=e.prerelease[t];if(void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return o(i,n)}while(++t)},r.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this},e.inc=a,e.diff=s,e.compareIdentifiers=o;var De=/^[0-9]+$/;e.rcompareIdentifiers=l,e.major=c,e.minor=u,e.patch=d,e.compare=h,e.compareLoose=p,e.rcompare=f,e.sort=m,e.rsort=g,e.gt=v,e.lt=b,e.eq=y,e.neq=w,e.gte=L,e.lte=k,e.cmp=x,e.Comparator=C;var Re={};C.prototype.parse=function(e){var t=this.loose?V[Ie]:V[Ae],i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new r(i[2],this.loose):this.semver=Re},C.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},C.prototype.toString=function(){return this.value},C.prototype.test=function(e){return this.semver===Re||("string"==typeof e&&(e=new r(e,this.loose)),x(e,this.operator,this.semver,this.loose))},e.Range=S,S.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},S.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},S.prototype.toString=function(){return this.range},S.prototype.parseRange=function(e){var t=this.loose;e=e.trim();var i=t?V[Te]:V[Pe];e=e.replace(i,R),e=e.replace(V[ze],Ee),e=e.replace(V[be],ye),e=e.replace(V[xe],Ce),e=e.split(/\s+/).join(" ");var n=t?V[Ie]:V[Ae],r=e.split(" ").map(function(e){return I(e,t)}).join(" ").split(/\s+/);return this.loose&&(r=r.filter(function(e){return!!e.match(n)})),r=r.map(function(e){return new C(e,t)})},e.toComparators=M,S.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new r(e,this.loose));for(var t=0;t<this.set.length;t++)if(_(this.set[t],e))return!0;return!1},e.satisfies=O,e.maxSatisfying=G,e.validRange=H,e.ltr=U,e.gtr=$,e.outside=q,"function"==typeof define&&define.amd&&define("semver",e)}("object"==typeof exports?exports:"function"==typeof define&&define.amd?{}:semver={}),define("ev-script/models/app-info",["require","underscore","semver","ev-script/models/base"],function(e){"use strict";var t=(e("underscore"),e("semver")),i=e("ev-script/models/base");return i.extend({initialize:function(e,t){i.prototype.initialize.call(this,e,t),this.requiresAuth=!1},url:function(){var e=this.config.ensembleUrl+"/api/Info";return this.config.urlCallback?this.config.urlCallback(e):e},parse:function(e){return e},checkVersion:function(e){var i=this.get("ApplicationVersion");return i&&t.satisfies(i,e)},useLegacyEmbeds:function(){return this.checkVersion("<3.12.0")},anthemEnabled:function(){return this.checkVersion(">=4.2.0")}})}),define("ev-script/models/current-user",["require","underscore","ev-script/models/base"],function(e){"use strict";var t=(e("underscore"),e("ev-script/models/base"));return t.extend({idAttribute:"ID",initialize:function(e,i){t.prototype.initialize.call(this,e,i),this.requiresAuth=!1},url:function(){var e=this.config.ensembleUrl+"/api/CurrentUser";return this.config.urlCallback?this.config.urlCallback(e):e},parse:function(e){return e.Data[0]}})}),define("ev-script/auth/base/auth",["require","jquery","underscore","backbone","ev-script/util/events","ev-script/util/cache","ev-script/models/current-user"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),r=e("ev-script/util/events"),a=e("ev-script/util/cache"),s=e("ev-script/models/current-user"),o=function(e){i.bindAll(this,"getUser","login","logout","isAuthenticated","handleUnauthorized"),this.appId=e,this.config=a.getAppConfig(e),this.info=a.getAppInfo(e),this.globalEvents=r.getEvents("global"),this.appEvents=r.getEvents(e),this.user=null,this.appEvents.on("appLoaded",function(){this.fetchUser()},this)};return o.extend=n.Model.extend,i.extend(o.prototype,{fetchUser:function(){var e=new s({},{appId:this.appId});return e.fetch({success:i.bind(function(e,t,i){this.user=e,this.globalEvents.trigger("loggedIn",this.config.ensembleUrl)},this),error:i.bind(function(e,t,i){this.user=null,this.globalEvents.trigger("loggedOut",this.config.ensembleUrl)},this)}).promise()},getUser:function(){return this.user},login:function(e){return t.Deferred().reject().promise()},logout:function(){return t.Deferred().reject().promise()},isAuthenticated:function(){return null!=this.user},handleUnauthorized:function(e,t){}}),o}),function(e){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return o.raw?e:encodeURIComponent(e)}function i(e){return o.raw?e:decodeURIComponent(e)}function n(e){return t(o.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(s," ")),o.json?JSON.parse(e):e}catch(e){}}function a(t,i){var n=o.raw?t:r(t);return e.isFunction(i)?i(n):n}var s=/\+/g,o=e.cookie=function(r,s,l){if(void 0!==s&&!e.isFunction(s)){if(l=e.extend({},o.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[t(r),"=",n(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=r?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,f=h.length;p<f;p++){var m=h[p].split("="),g=i(m.shift()),v=m.join("=");if(r&&r===g){d=a(v,s);break}r||void 0===(v=a(v))||(d[g]=v)}return d};o.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}}),define("text!ev-script/auth/basic/template.html",[],function(){return'<div class="logo"></div>\n<form>\n    <fieldset>\n        <div class="fieldWrap">\n            <label for="username"><%= Globalize.formatMessage(\'Username\') %></label>\n            <input id="username" name="username" class="form-text" type="text"/>\n        </div>\n        <div class="fieldWrap">\n            <label for="password"><%= Globalize.formatMessage(\'Password\') %></label>\n            <input id="password" name="password" class="form-text" type="password"/>\n        </div>\n        <div class="form-actions">\n            <label></label>\n            <input type="submit" class="form-submit action-submit" value="<%= Globalize.formatMessage(\'Submit\') %>"/>\n        </div>\n    </fieldset>\n</form>\n'}),define("ev-script/auth/basic/view",["require","exports","module","jquery","underscore","backbone","globalize","ev-script/util/cache","ev-script/util/events","jquery.cookie","jquery-ui","text!ev-script/auth/basic/template.html"],function(e,t){"use strict";var i=e("jquery"),n=e("underscore"),r=e("backbone"),a=e("globalize"),s=e("ev-script/util/cache"),o=e("ev-script/util/events");return e("jquery.cookie"),e("jquery-ui"),r.View.extend({template:n.template(e("text!ev-script/auth/basic/template.html")),initialize:function(e){this.appId=e.appId,this.config=s.getAppConfig(this.appId),this.appEvents=o.getEvents(this.appId),this.submitCallback=e.submitCallback||function(){},this.auth=e.auth},render:function(){var e=this.template({Globalize:a});this.$dialog=i('<div class="ev-auth"></div>'),this.$el.after(this.$dialog),this.$dialog.dialog({title:a.formatMessage("Ensemble Video Login")+" - "+this.config.ensembleUrl,modal:!0,draggable:!1,resizable:!1,width:Math.min(540,i(window).width()-this.config.dialogMargin),height:Math.min(250,i(window).height()-this.config.dialogMargin),dialogClass:"ev-dialog",create:n.bind(function(t,i){this.$dialog.html(e)},this),closeText:a.formatMessage("Close"),close:n.bind(function(e,t){this.$dialog.dialog("destroy").remove(),this.appEvents.trigger("hidePickers")},this)}),i("form",this.$dialog).submit(n.bind(function(e){var t=i(e.target),n=i("#username",t).val(),r=i("#password",t).val();n&&r&&(this.auth.login({username:n,password:r}).always(this.submitCallback),this.$dialog.dialog("destroy").remove()),e.preventDefault()},this))}})}),define("ev-script/auth/basic/auth",["require","jquery","underscore","backbone","ev-script/auth/base/auth","ev-script/auth/basic/view","ev-script/collections/organizations"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),r=e("ev-script/auth/base/auth"),a=e("ev-script/auth/basic/view"),s=e("ev-script/collections/organizations"),o=r.extend({constructor:function(e){o.__super__.constructor.call(this,e)},fetchUser:function(){if(this.info.get("ApplicationVersion"))return o.__super__.fetchUser.call(this);var e=new s({},{appId:this.appId});return e.requiresAuth=!1,e.fetch({success:i.bind(function(e,t,i){this.user=new n.Model({id:Math.floor(1e16*Math.random()).toString(16)}),this.globalEvents.trigger("loggedIn",this.config.ensembleUrl)},this),error:i.bind(function(e,t,i){this.user=null,this.globalEvents.trigger("loggedOut",this.config.ensembleUrl)},this)}).promise()},login:function(e){var n={path:this.config.authPath};return t.cookie(this.config.ensembleUrl+"-user",e.username,i.extend({},n)),t.cookie(this.config.ensembleUrl+"-pass",e.password,i.extend({},n)),this.fetchUser()},logout:function(){var e=t.Deferred(),n={path:this.config.authPath};return t.removeCookie(this.config.ensembleUrl+"-user",i.extend({},n)),t.removeCookie(this.config.ensembleUrl+"-pass",i.extend({},n)),this.user=null,this.globalEvents.trigger("loggedOut",this.config.ensembleUrl),e.resolve(),e.promise()},handleUnauthorized:function(e,t){this.logout();var i=new a({el:e,submitCallback:t,appId:this.appId,auth:this});i.render()}});return o}),define("text!ev-script/auth/forms/template.html",[],function(){return'<div class="logo"></div>\n<form>\n    <fieldset>\n        <div class="fieldWrap">\n            <label for="username"><%= Globalize.formatMessage(\'Username\') %></label>\n            <input id="username" name="username" class="form-text" type="text"/>\n        </div>\n        <div class="fieldWrap">\n            <label for="password"><%= Globalize.formatMessage(\'Password\') %></label>\n            <input id="password" name="password" class="form-text" type="password"/>\n        </div>\n        <div class="fieldWrap">\n            <label for="provider"><%= Globalize.formatMessage(\'Identity Provider\') %></label>\n            <select id="provider" name="provider" class="form-select"></select>\n        </div>\n        <div class="fieldWrap">\n            <label for="remember"><%= Globalize.formatMessage(\'Remember Me\') %></label>\n            <input id="remember" name="remember" type="checkbox"></input>\n        </div>\n        <div class="form-actions">\n            <label></label>\n            <input type="submit" class="form-submit action-submit" value="<%= Globalize.formatMessage(\'Submit\') %>"/>\n            <div class="loader"></div>\n        </div>\n    </fieldset>\n</form>\n'}),define("ev-script/auth/forms/view",["require","exports","module","jquery","underscore","backbone","globalize","ev-script/util/cache","ev-script/util/events","jquery.cookie","jquery-ui","text!ev-script/auth/forms/template.html","text!ev-script/templates/options.html"],function(e,t){"use strict";var i=e("jquery"),n=e("underscore"),r=e("backbone"),a=e("globalize"),s=e("ev-script/util/cache"),o=e("ev-script/util/events");return e("jquery.cookie"),e("jquery-ui"),r.View.extend({template:n.template(e("text!ev-script/auth/forms/template.html")),optionsTemplate:n.template(e("text!ev-script/templates/options.html")),initialize:function(e){this.appId=e.appId,this.config=s.getAppConfig(this.appId),this.appEvents=o.getEvents(this.appId),this.submitCallback=e.submitCallback||function(){},this.auth=e.auth},render:function(){var e=i(this.template({Globalize:a}));i("#provider",e).append(this.optionsTemplate({collection:this.collection,selectedId:this.config.defaultProvider}));this.$dialog=i('<div class="ev-auth"></div>'),this.$el.after(this.$dialog);var t=i("div.loader",e),r=n.bind(function(e,i,n){t.addClass("loading")},this),s=n.bind(function(e,i,n){t.removeClass("loading")},this);i(window.document).on("ajaxSend",r).on("ajaxComplete",s),this.$dialog.dialog({title:a.formatMessage("Ensemble Video Login")+" - "+this.config.ensembleUrl,modal:!0,draggable:!1,resizable:!1,width:Math.min(540,i(window).width()-this.config.dialogMargin),height:Math.min(250,i(window).height()-this.config.dialogMargin),dialogClass:"ev-dialog",create:n.bind(function(t,i){this.$dialog.html(e)},this),closeText:a.formatMessage("Close"),close:n.bind(function(e,t){i(window.document).off("ajaxSend",r).off("ajaxComplete",s),this.$dialog.dialog("destroy").remove(),this.appEvents.trigger("hidePickers")},this)}),i("form",this.$dialog).submit(n.bind(function(e){var t=i(e.target),r=i("#username",t).val(),a=i("#password",t).val();r&&a&&this.auth.login({username:r,password:a,authSourceId:i("#provider :selected",t).val(),persist:i("#remember",t).is(":checked")}).then(n.bind(function(){this.$dialog.dialog("destroy").remove(),this.submitCallback()},this)),e.preventDefault()},this))}})}),define("ev-script/collections/identity-providers",["require","ev-script/collections/base","ev-script/util/cache"],function(e){"use strict";var t=e("ev-script/collections/base"),i=e("ev-script/util/cache"),n=new i.Cache;return t.extend({initialize:function(e,i){t.prototype.initialize.call(this,e,i),this.requiresAuth=!1},getCached:function(e){return n.get(this.config.ensembleUrl)},setCached:function(e,t){return n.set(this.config.ensembleUrl,t)},url:function(){var e=this.config.ensembleUrl+"/api/IdentityProviders";return this.config.urlCallback?this.config.urlCallback(e):e}})}),define("ev-script/auth/forms/auth",["require","jquery","underscore","ev-script/auth/base/auth","ev-script/models/current-user","ev-script/auth/forms/view","ev-script/collections/identity-providers"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("ev-script/auth/base/auth"),r=e("ev-script/models/current-user"),a=e("ev-script/auth/forms/view"),s=e("ev-script/collections/identity-providers"),o=n.extend({constructor:function(e){n.prototype.constructor.call(this,e),this.identityProviders=new s({},{appId:e}),this.asPromise=this.identityProviders.fetch()},login:function(e){var n=this.config.ensembleUrl+"/api/Login";return t.ajax({url:this.config.urlCallback?this.config.urlCallback(n):n,type:"POST",dataType:"json",data:{user:e.username,password:e.password,identityProviderId:e.authSourceId,persist:e.persist},xhrFields:{withCredentials:!0},success:i.bind(function(e,t,i){this.user=new r(e.Data[0],{appId:this.appId}),this.globalEvents.trigger("loggedIn",this.config.ensembleUrl)},this)}).promise()},logout:function(){var e=this.config.ensembleUrl+"/api/Logout";return t.ajax({url:this.config.urlCallback?this.config.urlCallback(e):e,type:"POST",xhrFields:{withCredentials:!0},success:i.bind(function(e,t,i){this.user=null,this.globalEvents.trigger("loggedOut",this.config.ensembleUrl)},this)}).promise()},handleUnauthorized:function(e,t){this.user=null,this.globalEvents.trigger("loggedOut",this.config.ensembleUrl),this.asPromise.done(i.bind(function(){var i=new a({el:e,submitCallback:t,appId:this.appId,auth:this,collection:this.identityProviders});i.render()},this))}});return o}),define("text!ev-script/auth/none/template.html",[],function(){return"<div class=\"logo\"></div>\n<form>\n    <h3><%= Globalize.formatMessage('You are unauthorized to access this content.') %></h3>\n</form>\n"}),define("ev-script/auth/none/view",["require","exports","module","jquery","underscore","backbone","globalize","ev-script/util/cache","ev-script/util/events","jquery-ui","text!ev-script/auth/none/template.html"],function(e,t){"use strict";var i=e("jquery"),n=e("underscore"),r=e("backbone"),a=e("globalize"),s=e("ev-script/util/cache"),o=e("ev-script/util/events");return e("jquery-ui"),r.View.extend({template:n.template(e("text!ev-script/auth/none/template.html")),initialize:function(e){this.appId=e.appId,this.config=s.getAppConfig(this.appId),this.appEvents=o.getEvents(this.appId)},render:function(){var e=i(this.template({Globalize:a}));this.$dialog=i('<div class="ev-auth"></div>'),this.$el.after(this.$dialog),this.$dialog.dialog({title:a.formatMessage("Ensemble Video Login")+" - "+this.config.ensembleUrl,modal:!0,draggable:!1,resizable:!1,width:Math.min(540,i(window).width()-this.config.dialogMargin),height:Math.min(250,i(window).height()-this.config.dialogMargin),dialogClass:"ev-dialog",create:n.bind(function(t,i){this.$dialog.html(e)},this),closeText:a.formatMessage("Close"),close:n.bind(function(e,t){this.$dialog.dialog("destroy").remove(),this.appEvents.trigger("hidePickers")},this)})}})}),define("ev-script/auth/none/auth",["require","jquery","underscore","ev-script/auth/base/auth","ev-script/auth/none/view"],function(e){
"use strict";var t=(e("jquery"),e("underscore"),e("ev-script/auth/base/auth")),i=e("ev-script/auth/none/view"),n=t.extend({constructor:function(e){t.prototype.constructor.call(this,e)},handleUnauthorized:function(e,t){this.user=null,this.globalEvents.trigger("loggedOut",this.config.ensembleUrl);var n=new i({el:e,submitCallback:t,appId:this.appId,auth:this,collection:this.identityProviders});n.render()}});return n}),function(e){"function"==typeof define&&define.amd?define("cldr/supplemental",["../cldr"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("../cldr")):e(Cldr)}(function(e){var t=e._alwaysArray,i=function(e){var i,n;return i=function(i){return function(n){return n=t(n),e.get([i].concat(n))}},n=i("supplemental"),n.weekData=i("supplemental/weekData"),n.weekData.firstDay=function(){return e.get("supplemental/weekData/firstDay/{territory}")||e.get("supplemental/weekData/firstDay/001")},n.weekData.minDays=function(){var t=e.get("supplemental/weekData/minDays/{territory}")||e.get("supplemental/weekData/minDays/001");return parseInt(t,10)},n.timeData=i("supplemental/timeData"),n.timeData.allowed=function(){return e.get("supplemental/timeData/{territory}/_allowed")||e.get("supplemental/timeData/001/_allowed")},n.timeData.preferred=function(){return e.get("supplemental/timeData/{territory}/_preferred")||e.get("supplemental/timeData/001/_preferred")},n},n=e.prototype.init;return e.prototype.init=function(){n.apply(this,arguments),this.supplemental=i(this)},e}),function(e){"function"==typeof define&&define.amd?define("cldr/unresolved",["../cldr"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("../cldr")):e(Cldr)}(function(e){var t=e._coreLoad,i=e._jsonMerge,n=e._pathNormalize,r=e._resourceGet,a=e._validatePresence,s=e._validateTypePath,o=function(e,t){var i,a;if("root"!==t)return i=n(["supplemental/parentLocales/parentLocale",t]),(a=r(e._resolved,i)||r(e._raw,i))?a:(a=t.substr(0,t.lastIndexOf(e.localeSep)),a?a:"root")},l=function(e,t,i){var n,r=e,a=t.length;for(n=0;n<a-1;n++)r[t[n]]||(r[t[n]]={}),r=r[t[n]];r[t[n]]=i},c=function(){var e;return e=function(t,a,s,c,u){var d,h,p;if("undefined"!=typeof a&&a!==u)return d=n(s,c),p=r(t._resolved,d),p&&"object"!=typeof p?p:(p=r(t._raw,d),p||(h=o(t,a),p=e(t,h,s,i(c,{bundle:h}),a)),p&&l(t._resolved,d,p),p)}}();return e._raw={},e.load=function(){e._raw=t(e,e._raw,arguments)},e.prototype.get=function(t){return a(t,"path"),s(t,"path"),c(e,this.attributes&&this.attributes.bundle||"",t,this.attributes)},e._eventInit&&e._eventInit(),e}),function(e,t){"function"==typeof define&&define.amd?define("globalize/message",["cldr","../globalize","cldr/event"],t):"object"==typeof exports?module.exports=t(require("cldrjs"),require("../globalize")):t(e.Cldr,e.Globalize)}(this,function(e,t){var i,n=t._alwaysArray,r=t._createError,a=t._isPlainObject,s=t._runtimeBind,o=t._validateDefaultLocale,l=t._validate,c=t._validateParameterPresence,u=t._validateParameterType,d=t._validateParameterTypePlainObject;i=function(){function e(e,t){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(e))return t?t+"."+e:e;var i=JSON.stringify(e);return t?t+"["+i+"]":i}function t(e,t,i){if(this.lc=[e],this.runtime.pluralFuncs={},this.runtime.pluralFuncs[this.lc[0]]=t,this.runtime.fmt={},i)for(var n in i)this.runtime.fmt[n]=i[n]}return t._parse=function(){function e(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function t(e,t,i,n,r,a){this.message=e,this.expected=t,this.found=i,this.offset=n,this.line=r,this.column=a,this.name="SyntaxError"}function i(e){function i(t){function i(t,i,n){var r,a;for(r=i;r<n;r++)a=e.charAt(r),"\n"===a?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Ve!==t&&(Ve>t&&(Ve=0,We={line:1,column:1,seenCR:!1}),i(We,Ve,t),Ve=t),We}function n(e){Be<Ke||(Be>Ke&&(Ke=Be,Ze=[]),Ze.push(e))}function r(n,r,a){function s(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function i(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,r,a,s=new Array(e.length);for(a=0;a<e.length;a++)s[a]=e[a].description;return n=e.length>1?s.slice(0,-1).join(", ")+" or "+s[e.length-1]:s[0],r=t?'"'+i(t)+'"':"end of input","Expected "+n+" but "+r+" found."}var l=i(a),c=a<e.length?e.charAt(a):null;return null!==r&&s(r),new t(null!==n?n:o(r,c),r,c,a,l.line,l.column)}function a(){var e;return e=s()}function s(){var e,t,i;for(e=Be,t=[],i=o(),i===I&&(i=v(),i===I&&(i=g()));i!==I;)t.push(i),i=o(),i===I&&(i=v(),i===I&&(i=g()));return t!==I&&(Fe=e,t=E(t)),e=t}function o(){var t,i,r,a,s,o,c;return t=Be,123===e.charCodeAt(Be)?(i=T,Be++):(i=I,0===Xe&&n(N)),i!==I?(r=x(),r!==I?(a=b(),a!==I?(s=Be,44===e.charCodeAt(Be)?(o=D,Be++):(o=I,0===Xe&&n(R)),o!==I?(c=l(),c!==I?(o=[o,c],s=o):(Be=s,s=P)):(Be=s,s=P),s===I&&(s=j),s!==I?(o=x(),o!==I?(125===e.charCodeAt(Be)?(c=_,Be++):(c=I,0===Xe&&n(O)),c!==I?(Fe=t,i=G(a,s),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t}function l(){var t,i,r,a,s,o,l,u;if(t=Be,i=x(),i!==I?(e.substr(Be,6)===H?(r=H,Be+=6):(r=I,0===Xe&&n(U)),r!==I?(a=x(),a!==I?(44===e.charCodeAt(Be)?(s=D,Be++):(s=I,0===Xe&&n(R)),s!==I?(o=x(),o!==I?(l=c(),l!==I?(u=x(),u!==I?(Fe=t,i=$(r,l),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t===I&&(t=Be,i=x(),i!==I?(e.substr(Be,13)===q?(r=q,Be+=13):(r=I,0===Xe&&n(B)),r!==I?(a=x(),a!==I?(44===e.charCodeAt(Be)?(s=D,Be++):(s=I,0===Xe&&n(R)),s!==I?(o=x(),o!==I?(l=c(),l!==I?(u=x(),u!==I?(Fe=t,i=$(r,l),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t===I&&(t=Be,i=x(),i!==I?(e.substr(Be,6)===F?(r=F,Be+=6):(r=I,0===Xe&&n(V)),r!==I?(a=x(),a!==I?(44===e.charCodeAt(Be)?(s=D,Be++):(s=I,0===Xe&&n(R)),s!==I?(o=x(),o!==I?(l=p(),l!==I?(u=x(),u!==I?(Fe=t,i=$(r,l),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t===I)))if(t=Be,i=x(),i!==I)if(r=b(),r!==I){for(a=[],s=m();s!==I;)a.push(s),s=m();a!==I?(Fe=t,i=W(r,a),t=i):(Be=t,t=P)}else Be=t,t=P;else Be=t,t=P;return t}function c(){var e,t,i,n;if(e=Be,t=u(),t===I&&(t=j),t!==I){if(i=[],n=d(),n!==I)for(;n!==I;)i.push(n),n=d();else i=P;i!==I?(Fe=e,t=K(t,i),e=t):(Be=e,e=P)}else Be=e,e=P;return e}function u(){var t,i,r,a,s,o,l,c;return t=Be,i=x(),i!==I?(e.substr(Be,6)===Z?(r=Z,Be+=6):(r=I,0===Xe&&n(X)),r!==I?(a=x(),a!==I?(58===e.charCodeAt(Be)?(s=J,Be++):(s=I,0===Xe&&n(Y)),s!==I?(o=x(),o!==I?(l=L(),l!==I?(c=x(),c!==I?(Fe=t,i=Q(l),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t}function d(){var t,i,r,a,o,l,c,u,d;return t=Be,i=x(),i!==I?(r=h(),r!==I?(a=x(),a!==I?(123===e.charCodeAt(Be)?(o=T,Be++):(o=I,0===Xe&&n(N)),o!==I?(l=x(),l!==I?(c=s(),c!==I?(u=x(),u!==I?(125===e.charCodeAt(Be)?(d=_,Be++):(d=I,0===Xe&&n(O)),d!==I?(Fe=t,i=ee(r,c),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t}function h(){var t,i,r;return t=Be,i=b(),i!==I&&(Fe=t,i=te(i)),t=i,t===I&&(t=Be,61===e.charCodeAt(Be)?(i=ie,Be++):(i=I,0===Xe&&n(ne)),i!==I?(r=L(),r!==I?(Fe=t,i=Q(r),t=i):(Be=t,t=P)):(Be=t,t=P)),t}function p(){var e,t,i;if(e=Be,t=[],i=f(),i!==I)for(;i!==I;)t.push(i),i=f();else t=P;return t!==I&&(Fe=e,t=re(t)),e=t}function f(){var t,i,r,a,o,l,c,u,d;return t=Be,i=x(),i!==I?(r=b(),r!==I?(a=x(),a!==I?(123===e.charCodeAt(Be)?(o=T,Be++):(o=I,0===Xe&&n(N)),o!==I?(l=x(),l!==I?(c=s(),c!==I?(u=x(),u!==I?(125===e.charCodeAt(Be)?(d=_,Be++):(d=I,0===Xe&&n(O)),d!==I?(Fe=t,i=ee(r,c),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t}function m(){var t,i,r,a,s,o;return t=Be,i=x(),i!==I?(44===e.charCodeAt(Be)?(r=D,Be++):(r=I,0===Xe&&n(R)),r!==I?(a=x(),a!==I?(s=b(),s!==I?(o=x(),o!==I?(Fe=t,i=ae(s),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P),t}function g(){var t,i;return t=Be,35===e.charCodeAt(Be)?(i=se,Be++):(i=I,0===Xe&&n(oe)),i!==I&&(Fe=t,i=le()),t=i}function v(){var e,t,i;if(e=Be,t=[],i=y(),i===I&&(i=C()),i!==I)for(;i!==I;)t.push(i),i=y(),i===I&&(i=C());else t=P;return t!==I&&(Fe=e,t=ce(t)),e=t}function b(){var t,i,r,a,s,o,l;if(Xe++,t=Be,i=x(),i!==I){if(r=Be,a=Be,de.test(e.charAt(Be))?(s=e.charAt(Be),Be++):(s=I,0===Xe&&n(he)),s!==I){for(o=[],pe.test(e.charAt(Be))?(l=e.charAt(Be),Be++):(l=I,0===Xe&&n(fe));l!==I;)o.push(l),pe.test(e.charAt(Be))?(l=e.charAt(Be),Be++):(l=I,0===Xe&&n(fe));o!==I?(s=[s,o],a=s):(Be=a,a=P)}else Be=a,a=P;a!==I&&(a=e.substring(r,Be)),r=a,r!==I?(a=x(),a!==I?(Fe=t,i=me(r),t=i):(Be=t,t=P)):(Be=t,t=P)}else Be=t,t=P;return Xe--,t===I&&(i=I,0===Xe&&n(ue)),t}function y(){var e,t,i;if(e=Be,t=[],i=w(),i!==I)for(;i!==I;)t.push(i),i=w();else t=P;return t!==I&&(Fe=e,t=ge(t)),e=t}function w(){var t,i,r,a,s,o;return t=Be,ve.test(e.charAt(Be))?(i=e.charAt(Be),Be++):(i=I,0===Xe&&n(be)),i!==I&&(Fe=t,i=ye(i)),t=i,t===I&&(t=Be,e.substr(Be,2)===we?(i=we,Be+=2):(i=I,0===Xe&&n(Le)),i!==I&&(Fe=t,i=ke()),t=i,t===I&&(t=Be,e.substr(Be,2)===xe?(i=xe,Be+=2):(i=I,0===Xe&&n(Ce)),i!==I&&(Fe=t,i=Se()),t=i,t===I&&(t=Be,e.substr(Be,2)===Me?(i=Me,Be+=2):(i=I,0===Xe&&n(Ie)),i!==I&&(Fe=t,i=Ae()),t=i,t===I&&(t=Be,e.substr(Be,2)===ze?(i=ze,Be+=2):(i=I,0===Xe&&n(Ee)),i!==I&&(Fe=t,i=Pe()),t=i,t===I&&(t=Be,e.substr(Be,2)===Te?(i=Te,Be+=2):(i=I,0===Xe&&n(Ne)),i!==I?(r=k(),r!==I?(a=k(),a!==I?(s=k(),s!==I?(o=k(),o!==I?(Fe=t,i=je(r,a,s,o),t=i):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)):(Be=t,t=P)))))),t}function L(){var t,i,r;if(t=Be,i=[],De.test(e.charAt(Be))?(r=e.charAt(Be),Be++):(r=I,0===Xe&&n(Re)),r!==I)for(;r!==I;)i.push(r),De.test(e.charAt(Be))?(r=e.charAt(Be),Be++):(r=I,0===Xe&&n(Re));else i=P;return i!==I&&(Fe=t,i=_e(i)),t=i}function k(){var t;return Oe.test(e.charAt(Be))?(t=e.charAt(Be),Be++):(t=I,0===Xe&&n(Ge)),t}function x(){var e,t,i;for(Xe++,e=Be,t=[],i=C();i!==I;)t.push(i),i=C();return t!==I&&(Fe=e,t=Ue(t)),e=t,Xe--,e===I&&(t=I,0===Xe&&n(He)),e}function C(){var t;return $e.test(e.charAt(Be))?(t=e.charAt(Be),Be++):(t=I,0===Xe&&n(qe)),t}var S,M=arguments.length>1?arguments[1]:{},I={},A={start:a},z=a,E=function(e){return{type:"messageFormatPattern",statements:e}},P=I,T="{",N={type:"literal",value:"{",description:'"{"'},j=null,D=",",R={type:"literal",value:",",description:'","'},_="}",O={type:"literal",value:"}",description:'"}"'},G=function(e,t){var i={type:"messageFormatElement",argumentIndex:e};return t&&t.length?i.elementFormat=t[1]:i.output=!0,i},H="plural",U={type:"literal",value:"plural",description:'"plural"'},$=function(e,t){return{type:"elementFormat",key:e,val:t}},q="selectordinal",B={type:"literal",value:"selectordinal",description:'"selectordinal"'},F="select",V={type:"literal",value:"select",description:'"select"'},W=function(e,t){return{type:"elementFormat",key:e,val:t}},K=function(e,t){return{type:"pluralFormatPattern",pluralForms:t,offset:e||0}},Z="offset",X={type:"literal",value:"offset",description:'"offset"'},J=":",Y={type:"literal",value:":",description:'":"'},Q=function(e){return e},ee=function(e,t){return{key:e,val:t}},te=function(e){return e},ie="=",ne={type:"literal",value:"=",description:'"="'},re=function(e){return{type:"selectFormatPattern",pluralForms:e}},ae=function(e){return e},se="#",oe={type:"literal",value:"#",description:'"#"'},le=function(){return{type:"octothorpe"}},ce=function(e){return{type:"string",val:e.join("")}},ue={type:"other",description:"identifier"},de=/^[0-9a-zA-Z$_]/,he={type:"class",value:"[0-9a-zA-Z$_]",description:"[0-9a-zA-Z$_]"},pe=/^[^ \t\n\r,.+={}]/,fe={type:"class",value:"[^ \\t\\n\\r,.+={}]",description:"[^ \\t\\n\\r,.+={}]"},me=function(e){return e},ge=function(e){return e.join("")},ve=/^[^{}#\\\0-\x1F \t\n\r]/,be={type:"class",value:"[^{}#\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}#\\\\\\0-\\x1F \\t\\n\\r]"},ye=function(e){return e},we="\\\\",Le={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},ke=function(){return"\\"},xe="\\#",Ce={type:"literal",value:"\\#",description:'"\\\\#"'},Se=function(){return"#"},Me="\\{",Ie={type:"literal",value:"\\{",description:'"\\\\{"'},Ae=function(){return"{"},ze="\\}",Ee={type:"literal",value:"\\}",description:'"\\\\}"'},Pe=function(){return"}"},Te="\\u",Ne={type:"literal",value:"\\u",description:'"\\\\u"'},je=function(e,t,i,n){return String.fromCharCode(parseInt("0x"+e+t+i+n))},De=/^[0-9]/,Re={type:"class",value:"[0-9]",description:"[0-9]"},_e=function(e){return parseInt(e.join(""),10)},Oe=/^[0-9a-fA-F]/,Ge={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},He={type:"other",description:"whitespace"},Ue=function(e){return e.join("")},$e=/^[ \t\n\r]/,qe={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Be=0,Fe=0,Ve=0,We={line:1,column:1,seenCR:!1},Ke=0,Ze=[],Xe=0;if("startRule"in M){if(!(M.startRule in A))throw new Error("Can't start parsing from rule \""+M.startRule+'".');z=A[M.startRule]}if(S=z(),S!==I&&Be===e.length)return S;throw S!==I&&Be<e.length&&n({type:"end",description:"end of input"}),r(null,Ze,Ke)}return e(t,Error),{SyntaxError:t,parse:i}}().parse,t.plurals={},t.formatters={},t.prototype.runtime={number:function(e,t){if(isNaN(e))throw new Error("'"+e+"' isn't a number.");return e-(t||0)},plural:function(e,t,i,n,r){if({}.hasOwnProperty.call(n,e))return n[e]();t&&(e-=t);var a=i(e,r);return a in n?n[a]():n.other()},select:function(e,t){return{}.hasOwnProperty.call(t,e)?t[e]():t.other()},pluralFuncs:{},fmt:{},toString:function(){var t=function(i,n){if("object"!=typeof i){var r=i.toString().replace(/^(function )\w*/,"$1"),a=/([ \t]*)\S.*$/.exec(r);return a?r.replace(new RegExp("^"+a[1],"mg"),""):r}var s=[];for(var o in i)"toString"!=o&&(0==n?s.push("var "+o+" = "+t(i[o],n+1)+";\n"):s.push(e(o)+": "+t(i[o],n+1)));if(0==n)return s.join("");if(0==s.length)return"{}";for(var a="  ";--n;)a+="  ";return"{\n"+s.join(",\n").replace(/^/gm,a)+"\n}"};return t(this,0)}},t.prototype._precompile=function(i,n){n=n||{keys:{},offset:{}};var r,a,s=[],o=[];switch(i.type){case"messageFormatPattern":for(r=0;r<i.statements.length;++r)s.push(this._precompile(i.statements[r],n));return a=s.join(" + ")||'""',n.pf_count?a:"function(d) { return "+a+"; }";case"messageFormatElement":return n.pf_count=n.pf_count||0,i.output?e(i.argumentIndex,"d"):(n.keys[n.pf_count]=i.argumentIndex,this._precompile(i.elementFormat,n));case"elementFormat":switch(o=[e(n.keys[n.pf_count],"d")],i.key){case"select":return o.push(this._precompile(i.val,n)),"select("+o.join(", ")+")";case"selectordinal":return o=o.concat([0,e(this.lc[0],"pluralFuncs"),this._precompile(i.val,n),1]),"plural("+o.join(", ")+")";case"plural":return n.offset[n.pf_count||0]=i.val.offset||0,o=o.concat([n.offset[n.pf_count]||0,e(this.lc[0],"pluralFuncs"),this._precompile(i.val,n)]),"plural("+o.join(", ")+")";default:return this.withIntlSupport&&!(i.key in this.runtime.fmt)&&i.key in t.formatters&&(a=t.formatters[i.key],this.runtime.fmt[i.key]="function"==typeof a(this)?a(this):a),o.push(JSON.stringify(this.lc)),i.val&&i.val.length&&o.push(JSON.stringify(1==i.val.length?i.val[0]:i.val)),"fmt."+i.key+"("+o.join(", ")+")"}case"pluralFormatPattern":case"selectFormatPattern":n.pf_count=n.pf_count||0,"selectFormatPattern"==i.type&&(n.offset[n.pf_count]=0);var l=!0;for(r=0;r<i.pluralForms.length;++r){var c=i.pluralForms[r].key;"other"===c&&(l=!1);var u=JSON.parse(JSON.stringify(n));u.pf_count++,s.push(e(c)+": function() { return "+this._precompile(i.pluralForms[r].val,u)+";}")}if(l)throw new Error("No 'other' form found in "+i.type+" "+n.pf_count);return"{ "+s.join(", ")+" }";case"string":return JSON.stringify(i.val||"");case"octothorpe":return n.pf_count?(o=[e(n.keys[n.pf_count-1],"d")],n.offset[n.pf_count-1]&&o.push(n.offset[n.pf_count-1]),"number("+o.join(", ")+")"):'"#"';default:throw new Error("Bad AST type: "+i.type)}},t.prototype.compile=function(i,n){var r={},a=this.lc,s=function(e,i){try{var n=t._parse(i);return e._precompile(n)}catch(e){throw new Error((n?"Precompiler":"Parser")+" error: "+e.toString())}},o=function(t,i){if(i||(i=0),"object"!=typeof t)return t;for(var n=[],r="",a=0;a<i;++a)r+="  ";for(var s in t)n.push("\n"+r+"  "+e(s)+": "+o(t[s],i+1));return"{"+n.join(",")+"\n"+r+"}"};if("string"==typeof i){var l=new Function("number, plural, select, pluralFuncs, fmt","return "+s(this,i));return l(this.runtime.number,this.runtime.plural,this.runtime.select,this.runtime.pluralFuncs,this.runtime.fmt)}n=n||{};for(var c in i)if(n.locale&&(this.lc=n.locale[c]&&[].concat(n.locale[c])||a),"string"==typeof i[c])try{r[c]=s(this,i[c])}catch(e){throw e.message=e.message.replace(":"," with `"+c+"`:"),e}else{r[c]={};for(var u in i[c])try{r[c][u]=s(this,i[c][u])}catch(e){throw e.message=e.message.replace(":"," with `"+u+"` in `"+c+"`:"),e}}this.lc=a;var d=this.runtime.toString()+"\n";switch(n.global||""){case"exports":var h=[];for(var p in r)h.push(e(p,"exports")+" = "+o(r[p]));return new Function(d+h.join(";\n"));case"module.exports":return new Function(d+"module.exports = "+o(r));case"":return new Function(d+"return "+o(r));default:return new Function("G",d+e(n.global,"G")+" = "+o(r))}},t}();var h=function(){return r("E_MISSING_PLURAL_MODULE","Plural module not loaded.")},p=function(e){l("E_MISSING_MESSAGE_BUNDLE","Missing message bundle for locale `{locale}`.",e.attributes.bundle&&void 0!==e.get("globalize-messages/{bundle}"),{locale:e.locale})},f=function(e,t){e=e.join("/"),l("E_MISSING_MESSAGE","Missing required message content `{path}`.",void 0!==t,{path:e})},m=function(e,t){e=e.join("/"),l("E_INVALID_MESSAGE","Invalid message content `{path}`. {expected} expected.","string"==typeof t,{expected:"a string",path:e})},g=function(e,t){u(e,t,void 0===e||a(e)||Array.isArray(e),"Array or Plain Object")},v=function(e){return function(t){return"number"!=typeof t&&"string"!=typeof t||(t=[].slice.call(arguments,0)),g(t,"variables"),e(t)}},b=function(e,t){var i=e.locale,n=t.toString;return t.toString=function(){var e,r,a,s={};return a=n.call(t),/number\(/.test(a)&&(s.number="messageFormat.number"),/plural\(/.test(a)&&(s.plural="messageFormat.plural"),/select\(/.test(a)&&(s.select="messageFormat.select"),a.replace(/pluralFuncs(\[([^\]]+)\]|\.([a-zA-Z]+))/,function(e){return s.pluralFuncs='{"'+i+'": Globalize("'+i+'").pluralGenerator()}',e}),e=Object.keys(s).join(", "),r=Object.keys(s).map(function(e){return s[e]}).join(", "),"(function( "+e+" ) {\n  return "+a+"\n})("+r+")"},t},y=[].slice;return t.loadMessages=function(t){var i,n={"globalize-messages":t,main:{}};c(t,"json"),d(t,"json");for(i in t)t.hasOwnProperty(i)&&(n.main[i]={});e.load(n)},t.messageFormatter=t.prototype.messageFormatter=function(e){var t,r,a,l,d,g=y.call(arguments,0);return c(e,"path"),u(e,"path","string"==typeof e||Array.isArray(e),"a String nor an Array"),e=n(e),t=this.cldr,o(t),p(t),a=t.get(["globalize-messages/{bundle}"].concat(e)),f(e,a),Array.isArray(a)&&(a=a.join(" ")),m(e,a),l=void 0!==this.plural?this.pluralGenerator():h,r=new i(t.locale,l).compile(a),d=v(r),s(g,t,d,[b(t,r),l]),d},t.formatMessage=t.prototype.formatMessage=function(e){return this.messageFormatter(e).apply({},y.call(arguments,1))},t}),define("ev-script",["require","backbone","underscore","jquery","globalize","json!cldr-data/supplemental/likelySubtags.json","json!ev-script/i18n/messages.json","ev-script/models/video-settings","ev-script/models/playlist-settings","ev-script/views/field","ev-script/views/video-embed","ev-script/views/playlist-embed","ev-script/models/app-info","ev-script/auth/basic/auth","ev-script/auth/forms/auth","ev-script/auth/none/auth","ev-script/util/events","ev-script/util/cache","cldr/supplemental","cldr/unresolved","globalize/message"],function(e){"use strict";var t=(e("backbone"),e("underscore")),i=e("jquery"),n=e("globalize"),r=e("json!cldr-data/supplemental/likelySubtags.json"),a=e("json!ev-script/i18n/messages.json"),s=e("ev-script/models/video-settings"),o=e("ev-script/models/playlist-settings"),l=e("ev-script/views/field"),c=e("ev-script/views/video-embed"),u=e("ev-script/views/playlist-embed"),d=e("ev-script/models/app-info"),h=e("ev-script/auth/basic/auth"),p=e("ev-script/auth/forms/auth"),f=e("ev-script/auth/none/auth"),m=e("ev-script/util/events"),g=e("ev-script/util/cache");e("cldr/supplemental"),e("cldr/unresolved"),e("globalize/message"),n.load(r),n.loadMessages(a);var v=function(e){var r=Math.floor(1e16*Math.random()).toString(16),a=g.caches.get(e.ensembleUrl);a||(a=g.caches.set(e.ensembleUrl,new g.Cache));var v={ensembleUrl:"",authPath:"",urlCallback:function(e){return e},pageSize:100,scrollHeight:null,fitToParent:!1,hidePickers:!0,dialogMargin:40,authType:"basic",defaultProvider:"",defaultVideoWidth:"",pluploadFlashPath:"",getLocaleCallback:function(){return"en-US"}},b=g.setAppConfig(r,t.extend({},v,e));n.locale(b.getLocaleCallback()),m.initEvents(r),this.appEvents=m.getEvents(r),this.globalEvents=m.getEvents();var y=i.Deferred();t.extend(this,y.promise());var w=new d({},{appId:r});g.setAppInfo(r,w),w.fetch({}).always(t.bind(function(){if(w.get("ApplicationVersion")||"forms"!==b.authType){var e;switch(b.authType){case"forms":e=new p(r);break;case"none":e=new f(r);break;default:e=new h(r)}g.setAppAuth(r,e),this.handleField=function(e,t,n){var a=i(n,e);new l({id:e.id||r,el:e,model:t,$field:a,appId:r})},this.handleEmbed=function(e,t){if(t instanceof s){var i=new c({el:e,model:t,appId:r});i.render()}else{var n=new u({el:e,model:t,appId:r});n.render()}},this.getEmbedCode=function(e){var t=i("<div/>");return"video"===e.type?this.handleEmbed(t[0],new s(e)):this.handleEmbed(t[0],new o(e)),t.html()},this.appEvents.trigger("appLoaded"),y.resolve()}else y.reject("Configured to use forms authentication against a pre-3.6 API.")},this))};return{VideoSettings:s,PlaylistSettings:o,EnsembleApp:v}}),define("jquery",function(){return $||jQuery}),define("jquery-ui",["jquery"],function(){}),define("plupload",function(){return plupload}),define("jquery.plupload.queue",["jquery","plupload"],function(){}),require("jquery.cookie"),require.config({config:{i18n:{locale:($.cookie("i18n.langtag")||"en-us").toLowerCase()}}}),require("ev-script")});
//# sourceMappingURL=ev-script.min.js.map